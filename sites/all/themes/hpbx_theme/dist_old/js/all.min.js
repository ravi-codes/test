function sgSlbInit(e){var t=e.find('input[type="hidden"]'),i=e.find(".sg-slider-button-item");e.find(".sg-slider-button-control").on("click",sgSlbControlClickHandler);for(var n=0;n<i.length;n++)if($(i[n]).data("id")==t.val()){sgSlbMoveToIndex(e,n);break}}function sgSlbControlClickHandler(){var e=$(this),t=e.closest(".sg-slider-button");t.hasClass(sgSlbIsAnimatingClass)||(e.hasClass("sg-slider-button-control-back")?sgSlbMoveBack(t):sgSlbMoveForward(t))}function sgSlbMoveForward(e){var t=parseInt(e.attr("data-index"));sgSlbMoveToIndex(e,t+1)}function sgSlbMoveBack(e){var t=parseInt(e.attr("data-index"));sgSlbMoveToIndex(e,t-1)}function sgSlbMoveToIndex(e,t){var i=e.find('input[type="hidden"]'),n=e.find(".sg-slider-button-items"),r=n.find(".sg-slider-button-item").length,s=e.width(),o=-1*t*s;e.addClass(sgSlbIsAnimatingClass),t==r?(t=0,o=0,e.addClass(sgSlbBorderReachedClass),window.setTimeout(sgSlbAnimationEnded,sgSlbAnimationDurationBorderReached,e)):-1==t?(t=r-1,o=-1*t*s,e.addClass(sgSlbBorderReachedClass),window.setTimeout(sgSlbAnimationEnded,sgSlbAnimationDurationBorderReached,e)):window.setTimeout(sgSlbAnimationEnded,sgSlbAnimationDurationDefault,e);var a=$(n.find(".sg-slider-button-item")[t]);n.css("left",o),e.attr("data-index",t),i.val(a.data("id")),e.trigger("change")}function sgSlbAnimationEnded(e){null!=e&&(e.removeClass(sgSlbIsAnimatingClass),e.removeClass(sgSlbBorderReachedClass))}function sgSrsInit(e){var t=(e.find('input[type="hidden"]'),e.find(".sg-srs-line-container")),i=e.find(".sg-srs-ticks"),n=e.find(".sg-srs-labels"),r=e.find(".sg-srs-handle"),s=e.data("values").split(","),o=e.data("labels").split(","),a=e.data("prefixes").split(","),l=e.data("postfixes").split(",");t.on("click",sgSrsLineClickHandler),t.on("mousemove",sgSrsLineMouseMoveHandler),t.on("mouseout",sgSrsLineMouseOutHandler),e.attr("data-amount",s.length);for(var c=0;c<s.length;c++){var d=Math.round(c/(s.length-1)*100),h="sg-srs-tick"+(0==c||c==s.length-1?" sg-srs-outer":""),u=c==s.length-1?"right: 0%":"left: "+d+"%",p='<div class="'+h+'" style="'+u+'"></div>';i.append(p);var f=null!=o[c]?o[c]:"",g=null!=a[c]?a[c]:"",m=null!=l[c]?l[c]:"",v="sg-srs-label";v+=0==c?" sg-srs-left":"",v+=c==s.length-1?" sg-srs-right":"";var _="";c>0&&c<s.length-1&&(_+=' style="',_+="left: "+d+"%; ",_+="width: "+Math.round(1/(s.length-1)*100)+"%; ",_+="margin-left: -"+Math.round(1/(s.length-1)*50)+"%; ",_+='"');var b='<span class="'+v+'"'+_+">";b+='<span class="sg-srs-label-prefix">'+g+"</span>",b+='<span class="sg-srs-label-text">'+f+"</span>",b+='<span class="sg-srs-label-postfix">'+m+"</span>",b+="</span>",n.append(b)}r.draggable({containment:t,drag:sgSrsHandleDragHandler,start:sgSrsHandleDragStartHandler,stop:sgSrsHandleDragStopHandler}),sgSrsMoveToSnapPoint(e,3)}function sgSrsLineClickHandler(e){var t=$(this),i=t.closest(".sg-snapped-range-slider"),n=e.offsetX,r=sgSrsGetClosestSnapPointIndex(i,n);sgSrsMoveToSnapPoint(i,r)}function sgSrsLineMouseMoveHandler(e){var t=$(this),i=t.closest(".sg-snapped-range-slider"),n=e.offsetX,r=sgSrsGetClosestSnapPointIndex(i,n);sgSrsSetLabelToSnapTo(i,r)}function sgSrsLineMouseOutHandler(){var e=$(this),t=e.closest(".sg-snapped-range-slider");t.find(".sg-srs-label").removeClass("sg-srs-to-snap-to")}function sgSrsGetClosestSnapPointIndex(e,t){var i=e.data("amount"),n=e.find(".sg-srs-line-container").width(),r=n/(i-1),s=Math.round(t/r);return s}function sgSrsMoveToSnapPoint(e,t){var i=e.find('input[type="hidden"]'),n=e.find(".sg-srs-handle"),r=e.find(".sg-srs-active-line"),s=e.data("amount"),o=Math.round(t/(s-1)*100),a=e.data("values").split(","),l=n.width()+parseInt(n.css("border-left-width"))+parseInt(n.css("border-right-width"));n.attr("style","left: "+o+"%; left: calc("+o+"% - "+l/2+"px)"),r.attr("style","width: "+o+"%; width: calc("+o+"% - "+l/2+"px)"),sgSrsSetLabelToSnapTo(e,-1),sgSrsSetActiveLabel(e,t),i.val(a[t]),e.trigger("change")}function sgSrsHandleDragHandler(e){var t=$(e.target),i=t.closest(".sg-snapped-range-slider"),n=i.find(".sg-srs-active-line"),r=parseInt(t.css("left")),s=i.find(".sg-srs-line-container").width(),o=Math.round(r/s*100),a=t.width()+parseInt(t.css("border-left-width"))+parseInt(t.css("border-right-width"));sgSrsIndexToSnapTo=sgSrsGetClosestSnapPointIndex(i,r+a/2),sgSrsSetLabelToSnapTo(i,sgSrsIndexToSnapTo),n.attr("style","width: "+o+"%; width: calc("+o+"% + "+a/2+"px)")}function sgSrsHandleDragStartHandler(e){var t=$(e.target),i=t.closest(".sg-snapped-range-slider");i.addClass(sgSrsDraggingClass)}function sgSrsHandleDragStopHandler(e){var t=$(e.target),i=t.closest(".sg-snapped-range-slider");i.removeClass(sgSrsDraggingClass),sgSrsMoveToSnapPoint(i,sgSrsIndexToSnapTo)}function sgSrsSetLabelToSnapTo(e,t){for(var i=e.find(".sg-srs-label"),n=0;n<i.length;n++)$(i[n]).toggleClass("sg-srs-to-snap-to",n==t)}function sgSrsSetActiveLabel(e,t){for(var i=e.find(".sg-srs-label"),n=0;n<i.length;n++)$(i[n]).toggleClass("sg-srs-active",n==t)}function sgSetClassCompleted(e){e.toggleClass("sg-completed",""!=e.val())}function initDropdowns(e){var t=e.chosen({search_contains:!0});t.on("change",function(e){$(e.target.nextSibling).toggleClass("sg-completed",null!=$(this).val()&&""!=$(this).val())}),e.trigger("change")}function hpbxShowAlert(e,t,i,n,r){_hpbxShowModal(e,t,i,null,n,r,null,null)}function hpbxShowConfirm(e,t,i,n,r){_hpbxShowModal("confirm",null,null,e,t,i,n,r)}function _hpbxShowModal(e,t,i,n,r,s,o,a){var l=$(".hpbx-alert.hpbx-alert-"+e),c=l.find(".hpbx-alert-box"),d=c.find(".hpbx-alert-close-button"),h=c.find(".hpbx-confirm-positive-button"),u=c.find(".hpbx-confirm-negative-button");d.off("click").on("click",hpbxHideAlert),h.off("click").on("click",hpbxHideAlert),u.off("click").on("click",hpbxHideAlert),"confirm"==e?(null!=n&&c.find(".hpbx-notification-title").html(n),null!=r&&h.html(r),null!=o&&u.html(o),null!=s&&h.on("click",s),null!=a&&u.on("click",a)):(null!=t&&c.find(".hpbx-notification-title").first().html(t),null!=i&&c.find(".hpbx-notification-message").html(i),null!=r&&d.html(r),null!=s&&d.on("click",s)),l.addClass("hpbx-alert-show"),c.css("margin-top",-1*c.outerHeight()/2)}function hpbxHideAlert(){$(".hpbx-alert").removeClass("hpbx-alert-show")}function hpbxInitAutoCompletes(e){e.each(function(){var e=$(this),t=e.data("title"),i=e.data("values"),n=$('<ul class="hpbx-autocomplete-list"></ul>'),r=$('<div class="hpbx-autocomplete-popover"></div>');if(i&&i instanceof Array&&!e.hasClass("hpbx-delay-init")){if(null!=t){var s=$('<li class="hpbx-autocomplete-list-title"></li>').data("value","title").text(t);n.append(s)}$(i).each(function(){var e=$('<li class="hpbx-autocomplete-list-item"></li>').data("value",this.value).text(this.label);n.append(e)}),n.on("click",function(t){var i=$(t.target).data("value");"title"!=i&&(e.val(i),e.trigger("hpbx-autocomplete-item-click"))});var o=function(){r.css({width:e.outerWidth()})},a=function(t){t.target==e.get(0)||$(t.target).hasClass("hpbx-autocomplete-list-title")||l(!1)},l=function(e){e?(r.addClass("hpbx-autocomplete-popover-active"),$(document).on("click",a).on("resize",o),o()):(r.removeClass("hpbx-autocomplete-popover-active"),$(document).off("click",a).off("resize",o))},c=function(){var t=e.val(),i=n.find(".hpbx-autocomplete-list-item");i.removeClass("hpbx-autocomplete-list-item-active"),t&&0!==t.length&&i.each(function(){var e=$(this),i=e.data("value");i&&0!==i.length&&i==t&&(e.addClass("hpbx-autocomplete-list-item-active"),d())})},d=function(){var e=n.find(".hpbx-autocomplete-list-item-active"),t=e.height(),i=e.index();r.scrollTop(i*t)},h=function(t){var i=n.find(".hpbx-autocomplete-list-item:not(.hpbx-autocomplete-list-item-hidden)"),r=n.find(".hpbx-autocomplete-list-item-active"),s=r.index();t&&s>0&&i.length>1?e.val(i.eq(s-1).data("value")):!t&&s<i.length-1&&e.val(i.eq(s+1).data("value")),c()},u=function(){var t=n.find(".hpbx-autocomplete-list-item-active");e.val(t.data("value")),l(!1)},p=function(){var t=n.find(".hpbx-autocomplete-list-item");t.removeClass("hpbx-autocomplete-list-item-hidden"),t.each(function(i){var n=$(this).text(),r=e.val();-1===n.toLowerCase().indexOf(r.toLowerCase())?t.eq(i).addClass("hpbx-autocomplete-list-item-hidden"):t.eq(i).removeClass("hpbx-autocomplete-list-item-hidden")}),r.toggle(t.length!=n.find(".hpbx-autocomplete-list-item-hidden").length)};r.append(n),e.after(r).on("focus",function(){l(!0),c()}).on("keydown",function(e){switch(e.which){case 9:l(!1);break;case 38:h(!0);break;case 40:h();break;case 13:e.preventDefault(),u()}}).on("keyup",function(e){-1!==$.inArray(e.which,[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,8,46])&&p()})}})}function hpbxBulkUploadSendNextRow(){hpbxBulkUploadSetupNextRow()?(setTimeout(hpbxBulkUploadSetRowStatus,500,Math.random()>.5,"The server says no..... en dan een nog veel langere tekst en dan eigenlijk nog veel langer<br />en dan ook nog over twee regels"),setTimeout(hpbxBulkUploadSendNextRow,500)):hpbxBulkUploadEndOfProcess()}function hpbxBulkUploadSetupNextRow(){if(hpbxBulkUploadData.length>0){var e=hpbxBulkUploadData.shift();return hpbxBulkUploadCurrentRow=e.$row,hpbxBulkUploadCurrentRowData=e.data,!0}return hpbxHideLoader(),!1}function hpbxBulkUploadSetRowStatus(e,t){e?(hpbxBulkUploadCurrentRow.addClass("hpbx-bulk-upload-successful"),hpbxBulkUploadCurrentRow.find('input[type="text"]').off("blur"),hpbxBulkUploadCurrentRow.find(".hpbx-autocomplete").off("hpbx-autocomplete-item-click"),hpbxBulkUploadCurrentRow.find("select").off("change"),hpbxBulkUploadCurrentRow.find('input[type="text"]').prop("disabled",!0),hpbxBulkUploadCurrentRow.find("select").prop("disabled",!0).trigger("liszt:updated"),hpbxBulkUploadSuccessfulCounter++):(hpbxBulkUploadCurrentRow.addClass("hpbx-bulk-upload-unsuccessful"),hpbxBulkUploadCurrentRow.find(".hpbx-bulk-upload-status-upload-failure-message").html(t)),hpbxLoaderSetProgress(++hpbxBulkUploadCounter/hpbxBulkUploadNumberOfRowsTotal*100)}function hpbxBulkUploadEndOfProcess(){var e=$(".hpbx-alert"),t=e.find(".hpbx-notification-message").data("message");t=t.replace("###total###",hpbxBulkUploadCounter),t=t.replace("###successful###",hpbxBulkUploadSuccessfulCounter),setTimeout(hpbxShowAlert,500,"small",null,t,null,hpbxBulkUploadRemoveProcessedRows)}function hpbxBulkUploadRemoveProcessedRows(){var e=$("tr.hpbx-bulk-upload-successful");$(".hpbx-bulk-upload-table").addClass("hpbx-animating"),e.each(function(){hpbxBulkUploadRemoveRow($(this))}),setTimeout(hpbxBulkUploadRemoveProcessedRowsLastStep,hpbxBulkUploadRemoveRowAnimationDuration),$(".hpbx-bulk-upload-add").fadeIn(hpbxBulkUploadRemoveRowAnimationDuration)}function hpbxBulkUploadRemoveRow(e){e.find("td").wrapInner('<div class="hpbx-bulk-upload-anmiation-remove-prepare"></div>'),e.find(".hpbx-bulk-upload-anmiation-remove-prepare").animate({height:0},hpbxBulkUploadRemoveRowAnimationDuration)}function hpbxBulkUploadRemoveRowLastStep(e){1==$(".hpbx-bulk-upload-table tr.hpbx-bulk-upload-data-row").length?e.addClass("hpbx-bulk-upload-row-can-be-deleted"):e.remove()}function hpbxBulkUploadRemoveProcessedRowsLastStep(){var e=$(".hpbx-bulk-upload-table tr.hpbx-bulk-upload-data-row"),t=$("tr.hpbx-bulk-upload-successful");e.length!=t.length?t.remove():(t.addClass("hpbx-bulk-upload-row-can-be-deleted"),hpbxShowAlert("big")),$(".hpbx-bulk-upload-table").removeClass("hpbx-animating")}function cancelZoom(){function e(e){t.content=i+("blur"==e.type?i.match(s,"")?"":r+10:r+1)}var t,i,n=document,r=",maximum-scale=",s=/,*maximum\-scale\=\d*\.*\d*/;this.addEventListener&&n.querySelector&&(t=n.querySelector('meta[name="viewport"]'),i=t.content,this.addEventListener("focus",e,!0),this.addEventListener("blur",e,!1))}function deviceDropdownInit(e){var t,i=e.data("device-list"),n=[],r=e.data("device-type-target");0==e.closest(".hpbx-bulk-upload-add").length&&(t=e.hasClass("hpbx-bulk-upload-field-device-brand")?e.closest(".hpbx-bulk-upload-data-row").find(".hpbx-bulk-upload-field-device-type"):$(r)),null!=t&&($.each(i,function(t,i){e.append($('<option value="'+t+'">'+i.label+"</option>")),$.each(i.types,function(e,t){n.push(t)})}),e.on("change",function(r,s){if(s!==!0){var o=e.val();t.find('option[value!=""]').remove(),$.each(void 0!==i[o]?i[o].types:n,function(e,i){t.append($('<option value="'+i.value+'">'+i.label+"</option>"))}),t.trigger("liszt:updated")}}))}function polarToCartesian(e,t,i,n){var r=n*Math.PI/180,s=e+i*Math.cos(r),o=t+i*Math.sin(r);return[s,o]}function generateAndAnimatePartialCircle(e,t,i,n,r,s,o,a){var l=generatePartialCirclePath(e,t,i,n,r),c=Snap.path.getTotalLength(l),d=o.paper.path().attr({"class":s});return Snap.animate(0,c,function(n){var r=Snap.path.getPointAtLength(l,n),s=generatePartialCirclePath(e,t,i,r.x,r.y);d.attr({path:s})},a,mina.easeinout),d}function generatePartialCirclePath(e,t,i,n,r){var s="m"+e+" "+(t-i);return s+="A "+i+" "+i+", 90, ",s+=(e>n?"1, ":"0, ")+"1, ",s+=n+" "+r}function initDropdowns(e){var t=e.chosen({search_contains:!0});t.on("change",function(e){var t=$(this),i=$(e.target.nextSibling);(t.hasClass("sg-error")||i.hasClass("sg-error"))&&(i.toggleClass("sg-error"),t.removeClass("sg-error")),i.toggleClass("sg-completed",null!=$(this).val()&&""!=$(this).val())}),e.trigger("change")}function hpbxShowLoader(e,t){var i=$(".hpbx-loader"),n=i.find(".hpbx-loader-box");null!=e&&""!=e||null==i.attr("data-title")||(e=i.attr("data-title")),null!=t&&""!=t||null==i.attr("data-subtitle")||(t=i.attr("data-subtitle")),n.find(".hpbx-loader-title").html(e),n.find(".hpbx-loader-subtitle").html(t),n.find(".hpbx-loader-progress-line").css("width","0"),n.find(".hpbx-loader-progress-dot").css("left",0),i.show(),n.css("margin-top",-1*n.height()/2)}function hpbxHideLoader(){setTimeout(hpbxActuallyHideLoader,500)}function hpbxActuallyHideLoader(){$(".hpbx-loader").hide()}function hpbxLoaderSetProgress(e){$(".hpbx-loader-progress-line").css("width",e+"%"),$(".hpbx-loader-progress-dot").css("left",e+"%")}function switchStyleguide(e){$("head link[rel=stylesheet]").attr("href",e),$(".hpbx-help-iframe").contents().find("head link[rel=stylesheet]").attr("href",e)}function setFormLabelsClass(){$(".hpbx-tab-form-label").each(function(){var e=$(this);e.height()>30&&e.addClass("hpbx-tab-form-label-multiple-lines")})}function openMediaLibraryPopup(){$("#hpbx-help-edit-media-library-popup-trigger").trigger("click"),$(".hpbx-help-edit-media-library-popup .hpbx-scrollable-container").perfectScrollbar("update")}function toggleHelp(e){if(null!=e&&$(e.currentTarget).hasClass("hpbx-help-close-handle"))return void window.parent.toggleHelp();if($("body").hasClass(helpVariables.bodyClassHelpOpen)||(hpbxHelpOpenedTimestamp=new Date,$(".hpbx-help-loading-overlay").removeClass("hpbx-animate-away")),$("body").toggleClass(helpVariables.bodyClassHelpOpen),$("body").removeClass(helpVariables.bodyClassMenuOpen),!$("body").hasClass("hpbx-page-wizard")){var t,i=$(".container"),n=i.width(),r=$(window).width(),s=$(".hpbx-help").width(),o=$(".hpbx-menu").width(),a=parseInt($(".container").css("margin-left")),l=parseInt($(".container").css("padding-left"));r>=1170&&($("body").hasClass(helpVariables.bodyClassHelpOpen)?(t=(r-s-o-n-l-l)/2,i.css("margin-left",a),i.css("margin-right",a)):(resetHelp(),t=(r-o-n-l-l)/2),20>t?(t=20,$("body").addClass("hpbx-too-little-space")):$("body").removeClass("hpbx-too-little-space"),i.animate({"margin-left":t,"margin-right":t},200,restoreContainerMargin))}$("body").hasClass(helpVariables.bodyClassHelpOpen)||(Cookies.set("hpbx-help-animate-on-load",!0),$("body").removeClass("hpbx-help-no-loader")),Cookies.set("hpbx-help-open",$("body").hasClass(helpVariables.bodyClassHelpOpen))}function resetHelp(){$(".hpbx-help").attr("style",""),$("body").attr("style",""),$(".hpbx-menu").attr("style","")}function restoreContainerMargin(){$("body").hasClass(helpVariables.bodyClassHelpOpen)||$(".container").attr("style","")}function animateHelpOverlay(){$(".hpbx-help-loading-overlay").addClass("hpbx-animate-away")}function openImagePopup(e){$.magnificPopup.open({items:{src:e},mainClass:"hpbx-popup-root",closeOnBgClick:!1,type:"image"})}!function(e){e(function(){e(".sg-slider-button").each(function(){sgSlbInit(e(this))})})}(window.jQuery,window,document);var sgSlbIsAnimatingClass="sg-is-animating",sgSlbBorderReachedClass="sg-border-reached",sgSlbAnimationDurationDefault=200,sgSlbAnimationDurationBorderReached=500;!function(e){e(function(){e(".sg-snapped-range-slider").each(function(){sgSrsInit(e(this))})})}(window.jQuery,window,document);var sgSrsDraggingClass="sg-srs-dragging",sgSrsIndexToSnapTo=0;(function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,n,r,s,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,o=[],n=0,r=s.length;r>n;n++)i=s[n],o.push(this.add_option(i,t,e.disabled));return o},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,identifier:$(e).attr("data-identifier")||"",text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var i,n,r,s,o;for(n=new e,o=t.childNodes,r=0,s=o.length;s>r;r++)i=o[r],n.add_node(i);return n.parsed},this.SelectParser=e}).call(this),function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=null!=t?t:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_search_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},e.prototype.set_search_text=function(){this.search_text=this.form_field.getAttribute("data-search-text")?this.form_field.getAttribute("data-search-text"):"Narrow results"},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.result_add_option=function(e){var t,i;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=""!==e.style.cssText?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="needsclick '+t.join(" ")+'"'+i+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,i;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*e.length),t=e.substring(i,i+1)},e}(),t.AbstractChosen=e}.call(this),function(){var e,t,i,n,r={}.hasOwnProperty,s=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};n=this,e=jQuery,e.fn.extend({chosen:function(i){var n,r,s;return s=navigator.userAgent.toLowerCase(),r=/(msie) ([\w.]+)/.exec(s)||[],n={name:r[1]||"",version:r[2]||"0"},"msie"===n.name&&("6.0"===n.version||"7.0"===n.version&&7===document.documentMode)?this:this.each(function(){var n;return n=e(this),n.hasClass("chzn-done")?void 0:n.data("chosen",new t(this,i))})}}),t=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,t),r.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},r.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},r.prototype.set_up_html=function(){var t,n,r,s,o,a;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",t=["chzn-container","needsclick"],t.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),r={id:this.container_id,"class":t.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},n=e("<div />",r),n.html(this.is_multiple?'<ul class="chzn-choices needsclick"><li class="search-field"><input type="text" placeholder="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop needsclick" style="left:-9000px;"><ul class="chzn-results"></ul></div>':'<a href="javascript:void(0)" class="chzn-single chzn-default needsclick sg-animate-up" tabindex="-1"><span class="needsclick">'+this.default_text+'</span><div class="sg-handle needsclick"><div class="sg-divider needsclick"></div></div></a><div class="chzn-drop needsclick" style="left:-9000px;"><div class="chzn-search"><div class="chzn-search-icon"></div><input type="text" autocomplete="off" placeholder="'+this.search_text+'" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(n),this.container=e("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),s=this.container.height(),o=this.f_width-i(this.dropdown),this.dropdown.css({width:o+"px",top:s+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=o-i(this.search_container)-i(this.search_field),this.search_field.css({width:a+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},r.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){return e.container_mousedown(t)}),this.container.mouseup(function(t){return e.container_mouseup(t)}),this.container.mouseenter(function(t){return e.mouse_enter(t)}),this.container.mouseleave(function(t){return e.mouse_leave(t)}),this.search_results.mouseup(function(t){return e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){return e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){return e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){return e.results_update_field(t)}),this.form_field_jq.bind("liszt:activate",function(t){return e.activate_field(t)}),this.form_field_jq.bind("liszt:open",function(t){return e.container_mousedown(t)}),this.search_field.blur(function(t){return e.input_blur(t)}),this.search_field.keyup(function(t){return e.keyup_checker(t)}),this.search_field.keydown(function(t){return e.keydown_checker(t)}),this.search_field.focus(function(t){return e.input_focus(t)}),this.is_multiple?this.search_choices.click(function(t){return e.choices_click(t)}):this.container.click(function(e){return e.preventDefault()})},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},r.prototype.container_mousedown=function(t){var i;return this.is_disabled?void 0:(i=null!=t?e(t.target).hasClass("search-choice-close"):!1,t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),this.pending_destroy_click||i?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()))},r.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},r.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},r.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),!1},r.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){var e,t,i,r,s;for(this.parsing=!0,this.results_data=n.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",s=this.results_data,i=0,r=s.length;r>i;i++)t=s[i],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},r.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},r.prototype.result_do_highlight=function(e){var t,i,n,r,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),r=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=r)return this.search_results.scrollTop(t-n>0?t-n:0);if(s>i)return this.search_results.scrollTop(i)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){var e;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return e=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",left:0}),this.selected_item.removeClass("sg-animate-up"),this.selected_item.addClass("sg-animate-down"),this.dropdown.removeClass("sg-animate-up"),this.dropdown.addClass("sg-animate-down"),this.results_show_step_2(this.dropdown.find(".chzn-results")),this.results_showing=!0,document.activeElement.blur(),this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},r.prototype.results_show_step_2=function(e){window.setTimeout(function(){e.closest(".chzn-container").css("position","static"),window.setTimeout(function(){e.closest(".chzn-container").css("position","relative")},10)},25),window.setTimeout(function(){e.css("overflow-y","auto")},200)},r.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.selected_item.removeClass("sg-animate-down"),this.selected_item.addClass("sg-animate-up"),this.dropdown.removeClass("sg-animate-down"),this.dropdown.addClass("sg-animate-up").find(".chzn-results").css("overflow","hidden"),this.search_field.blur(),this.results_showing=!1},r.prototype.set_tab_index=function(){var e;return this.form_field_jq.attr("tabindex")?(e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",e)):void 0},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))
},r.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},r.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},r.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},r.prototype.choices_click=function(t){return t.preventDefault(),!this.active_field||e(t.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},r.prototype.choice_build=function(t){var i,n,r,s=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+t.array_index,this.choices+=1,n=t.disabled?'<li class="search-choice search-choice-disabled" id="'+i+'"><span>'+t.html+"</span></li>":'<li class="search-choice" id="'+i+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>',this.search_container.before(n),r=e("#"+i).find("a").first(),r.click(function(e){return s.choice_destroy_link_click(e)}))},r.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},r.prototype.choice_destroy=function(e){return this.result_deselect(e.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},r.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},r.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},r.prototype.result_select=function(e){var t,i,n,r;return this.result_highlight?(t=this.result_highlight,i=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),r=i.substr(i.lastIndexOf("_")+1),n=this.results_data[r],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.is_multiple?this.choice_build(n):(this.selected_item.find("span").first().text(n.text),this.allow_single_deselect&&this.single_deselect_control_build()),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0},r.prototype.result_activate=function(e){return e.addClass("active-result")},r.prototype.result_deactivate=function(e){return e.removeClass("active-result")},r.prototype.result_deselect=function(t){var i,n;return n=this.results_data[t],this.form_field.options[n.options_index].disabled?!1:(n.selected=!1,this.form_field.options[n.options_index].selected=!1,i=e("#"+this.container_id+"_o_"+t),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[n.options_index].value}),this.search_field_scale(),!0)},r.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},r.prototype.winnow_results=function(){var t,i,n,r,s,o,a,l,c,d,h,u,p,f,g,m,v;for(this.no_results_clear(),c=0,d=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),o=this.search_contains?"":"^",s=new RegExp(o+d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),u=new RegExp(d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),v=this.results_data,p=0,g=v.length;g>p;p++)if(i=v[p],!i.disabled&&!i.empty)if(i.group)e("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(t=!1,l=i.dom_id,a=e("#"+l),s.test(i.html)||s.test(i.identifier))t=!0,c+=1;else if(this.enable_split_word_search&&(i.html.indexOf(" ")>=0||0===i.html.indexOf("["))){if(r=i.html.replace(/\[|\]/g,"").split(" "),r.length)for(f=0,m=r.length;m>f;f++)n=r[f],s.test(n)&&(t=!0,c+=1)}else if(this.enable_split_word_search&&(i.identifier.indexOf(" ")>=0||0===i.identifier.indexOf("["))&&(r=i.identifier.replace(/\[|\]/g,"").split(" "),r.length))for(f=0,m=r.length;m>f;f++)n=r[f],s.test(n)&&(t=!0,c+=1);t?(h=i.html,a.html(h),this.result_activate(a),null!=i.group_array_index&&e("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>c&&d.length?this.no_results(d):this.winnow_results_set_highlight()},r.prototype.winnow_results_clear=function(){var t,i,n,r,s;for(this.search_field.val(""),i=this.search_results.find("li"),s=[],n=0,r=i.length;r>n;n++)t=i[n],t=e(t),s.push(t.hasClass("group-result")?t.css("display","auto"):this.is_multiple&&t.hasClass("result-selected")?void 0:this.result_activate(t));return s},r.prototype.winnow_results_set_highlight=function(){var e,t;return this.result_highlight||(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null==e)?void 0:this.result_do_highlight(e)},r.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i)},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var t,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},r.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},r.prototype.search_field_scale=function(){var t,i,n,r,s,o,a,l,c;if(this.is_multiple){for(n=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)r=o[l],s+=r+":"+this.search_field.css(r)+";";return i=e("<div />",{style:s}),i.text(this.search_field.val()),e("body").append(i),a=i.width()+25,i.remove(),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},r.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},r}(AbstractChosen),n.Chosen=t,i=function(e){var t;return t=e.outerWidth()-e.width()},n.get_side_border_padding=i}.call(this),function(e,t,i){e(i).ready(function(){0==e(".ie8").length&&e.fn.chosen&&initDropdowns(e(".chzn-select")),e('input[type="text"], input[type="email"], input[type="password"]').each(function(){var t=e(this);sgSetClassCompleted(t),t.change(function(){sgSetClassCompleted(t)})}),e(".sg-btn.copy-content-for-hover").each(function(){var t=e(this),i=t.find(".sg-caption").clone();i.removeClass("sg-caption").addClass("sg-caption-hover"),t.append(i)}),e(".sg-btn-file-input").each(function(){var t=e(this),i=t.find('input[type="file"]'),n=t.siblings(".sg-btn-file-input-label");i.on("change",{inputField:i,label:n},function(e){var t=e.data.inputField.val().split("\\").pop();e.data.label.html(t)})}),new FastClick(i.body)})}(window.jQuery,window,document),function(){"use strict";function e(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}var s;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=o.length;c>l;l++)a[o[l]]=r(a[o[l]],a);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,i.hijacked||i,n):r.call(t,e,i,n)},t.addEventListener=function(e,i,n){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):r.call(t,e,i,n)}),"function"==typeof t.onclick&&(s=t.onclick,t.addEventListener("click",function(e){s(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!t,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=n&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(n&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;n&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,i,s;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],n){if(s=window.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!r){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,a,l,c,d=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=e.changedTouches[0],d=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||d,d.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=d.tagName.toLowerCase(),"label"===a){if(t=this.findControl(d)){if(this.focus(d),i)return!1;d=t}}else if(this.needsFocus(d))return e.timeStamp-o>100||n&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(d),this.sendClick(d,e),n&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return n&&!r&&(l=d.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(d)||(e.preventDefault(),this.sendClick(d,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,r,s;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(s=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],s>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,i){return new e(t,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,n){var r,s,o,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,s=r.name,t.href&&s&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return n&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),r=isNaN(n);return(r||n>=0)&&t(i,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,s){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(s,n(this,t)+"px")})},e.fn["outer"+i]=function(t,r){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(s,n(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var r,s=e.ui[t].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(e,t,i,n){var r,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,i)}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,r,s;for(s=0;null!=(r=i[s]);s++)try{n=e._data(r,"events"),n&&n.remove&&e(r).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var r,s,o,a,l={},c=t.split(".")[0];return t=t.split(".")[1],r=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(l[t]=n)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:r}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,s=i.call(arguments,1),o=0,a=s.length;a>o;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&void 0!==r&&(t[n]=e.isPlainObject(r)?e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,a=i.call(arguments,1),l=this;return o?this.each(function(){var i,n=e.data(this,r);return"instance"===s?(l=n,!1):n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(r=o[t]=e.widget.extend({},this.options[t]),s=0;s<n.length-1;s++)r[n[s]]=r[n[s]]||{},r=r[n[s]];if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var r,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,o){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?r.delegate(d,c,a):i.bind(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,s,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[a]?n[t](r):a!==t&&n[a]?n[a](r.duration,r.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define(["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())
},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),r=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options,s=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var r=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i,n){var r=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,i,n){e.each(n.sortables,function(){var r=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(r=!1),r})),r?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var r=e("body"),s=n.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(t,i,n){var r=n.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(t,i,n){var r=n.options;r._opacity&&e(i.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var r=n.options,s=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var r=n.options;n.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var r,s,o,a,l,c,d,h,u,p,f=n.options,g=f.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,_=i.offset.top,b=_+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left-n.margins.left,c=l+n.snapElements[u].width,d=n.snapElements[u].top-n.margins.top,h=d+n.snapElements[u].height,l-g>v||m>c+g||d-g>b||_>h+g||!e.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(d-b)<=g,s=Math.abs(h-_)<=g,o=Math.abs(l-v)<=g,a=Math.abs(c-m)<=g,r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(d-_)<=g,s=Math.abs(h-b)<=g,o=Math.abs(l-m)<=g,a=Math.abs(c-v)<=g,r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(r||s||o||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=r||s||o||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var r,s=n.options,o=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(r=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(t,i,n){var r=n.options;r._zIndex&&e(i.helper).css("zIndex",r._zIndex)}}),e.ui.draggable}),function($){$.extend({tablesorter:new function(){function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var i="";if(0!=e.tBodies.length){var n=e.tBodies[0].rows;if(n[0])for(var r=[],s=n[0].cells,o=s.length,a=0;o>a;a++){var l=!1;$.metadata&&$(t[a]).metadata()&&$(t[a]).metadata().sorter?l=getParserById($(t[a]).metadata().sorter):e.config.headers[a]&&e.config.headers[a].sorter&&(l=getParserById(e.config.headers[a].sorter)),l||(l=detectParserForColumn(e,n,-1,a)),e.config.debug&&(i+="column:"+a+" parser:"+l.id+"\n"),r.push(l)}return e.config.debug&&log(i),r}}function detectParserForColumn(e,t,i,n){for(var r=parsers.length,s=!1,o=!1,a=!0;""==o&&a;)i++,t[i]?(s=getNodeFromRowAndCellIndex(t,i,n),o=trimAndGetNodeText(e.config,s),e.config.debug&&log("Checking if value was empty on row:"+i)):a=!1;for(var l=1;r>l;l++)if(parsers[l].is(o,e,s))return parsers[l];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,i){return e[t].cells[i]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){for(var t=parsers.length,i=0;t>i;i++)if(parsers[i].id.toLowerCase()==e.toLowerCase())return parsers[i];return!1}function buildCache(e){if(e.config.debug)var t=new Date;for(var i=e.tBodies[0]&&e.tBodies[0].rows.length||0,n=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,r=e.config.parsers,s={row:[],normalized:[]},o=0;i>o;++o){var a=$(e.tBodies[0].rows[o]),l=[];if(a.hasClass(e.config.cssChildRow))s.row[s.row.length-1]=s.row[s.row.length-1].add(a);else{s.row.push(a);for(var c=0;n>c;++c)l.push(r[c].format(getElementText(e.config,a[0].cells[c]),e,a[0].cells[c]));l.push(s.normalized.length),s.normalized.push(l),l=null}}return e.config.debug&&benchmark("Building cache for "+i+" rows:",t),s}function getElementText(e,t){if(!t)return"";var i=$(t),n=i.attr("data-sort-value");if(void 0!==n)return n;var r="";return e.supportsTextContent||(e.supportsTextContent=t.textContent||!1),r="simple"==e.textExtraction?e.supportsTextContent?t.textContent:t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0].innerHTML:t.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text()}function appendToTable(e,t){if(e.config.debug)var i=new Date;for(var n=t,r=n.row,s=n.normalized,o=s.length,a=s[0].length-1,l=$(e.tBodies[0]),c=[],d=0;o>d;d++){var h=s[d][a];if(c.push(r[h]),!e.config.appender)for(var u=r[h].length,p=0;u>p;p++)l[0].appendChild(r[h][p])}e.config.appender&&e.config.appender(e,c),c=null,e.config.debug&&benchmark("Rebuilt table:",i),applyWidget(e),setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(e){if(e.config.debug)var t=new Date;var i=($.metadata?!0:!1,computeTableHeaderCellIndexes(e)),n=$(e.config.selectorHeaders,e).each(function(t){if(this.column=i[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(e.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(e,t))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(e,t)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(e,t)),!this.sortDisabled){var n=$(this).addClass(e.config.cssHeader);e.config.onRenderHeader&&e.config.onRenderHeader.apply(n)}e.config.headerList[t]=this});return e.config.debug&&(benchmark("Built headers:",t),log(n)),n}function computeTableHeaderCellIndexes(e){for(var t=[],i={},n=e.getElementsByTagName("THEAD")[0],r=n.getElementsByTagName("TR"),s=0;s<r.length;s++)for(var o=r[s].cells,a=0;a<o.length;a++){var l,c=o[a],d=c.parentNode.rowIndex,h=d+"-"+c.cellIndex,u=c.rowSpan||1,p=c.colSpan||1;"undefined"==typeof t[d]&&(t[d]=[]);for(var f=0;f<t[d].length+1;f++)if("undefined"==typeof t[d][f]){l=f;break}i[h]=l;for(var f=d;d+u>f;f++){"undefined"==typeof t[f]&&(t[f]=[]);for(var g=t[f],m=l;l+p>m;m++)g[m]="x"}}return i}function checkCellColSpan(e,t,i){for(var n=[],r=e.tHead.rows,s=r[i].cells,o=0;o<s.length;o++){var a=s[o];a.colSpan>1?n=n.concat(checkCellColSpan(e,headerArr,i++)):(1==e.tHead.length||a.rowSpan>1||!r[i+1])&&n.push(a)}return n}function checkHeaderMetadata(e){return $.metadata&&$(e).metadata().sorter===!1?!0:!1}function checkHeaderOptions(e,t){return e.config.headers[t]&&e.config.headers[t].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(e,t){return e.config.headers[t]&&e.config.headers[t].lockedOrder?e.config.headers[t].lockedOrder:!1}function applyWidget(e){for(var t=e.config.widgets,i=t.length,n=0;i>n;n++)getWidgetById(t[n]).format(e)}function getWidgetById(e){for(var t=widgets.length,i=0;t>i;i++)if(widgets[i].id.toLowerCase()==e.toLowerCase())return widgets[i]}function formatSortingOrder(e){return"Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==e?1:0}function isValueInArray(e,t){for(var i=t.length,n=0;i>n;n++)if(t[n][0]==e)return!0;return!1}function setHeadersCss(e,t,i,n){t.removeClass(n[0]).removeClass(n[1]);var r=[];t.each(function(){this.sortDisabled||(r[this.column]=$(this))});for(var s=i.length,o=0;s>o;o++)r[i[o][0]].addClass(n[i[o][1]])}function fixColumnWidth(e){var t=e.config;if(t.widthFixed){var i=$("<colgroup>");$("tr:first td",e.tBodies[0]).each(function(){i.append($("<col>").css("width",$(this).width()))}),$(e).prepend(i)}}function updateHeaderSortCount(e,t){for(var i=e.config,n=t.length,r=0;n>r;r++){var s=t[r],o=i.headerList[s[0]];o.count=s[1],o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(e,t,i){var n="a["+i+"]",r="b["+i+"]";return"text"==e&&"asc"==t?"("+n+" == "+r+" ? 0 : ("+n+" === null ? Number.POSITIVE_INFINITY : ("+r+" === null ? Number.NEGATIVE_INFINITY : ("+n+" < "+r+") ? -1 : 1 )));":"text"==e&&"desc"==t?"("+n+" == "+r+" ? 0 : ("+n+" === null ? Number.POSITIVE_INFINITY : ("+r+" === null ? Number.NEGATIVE_INFINITY : ("+r+" < "+n+") ? -1 : 1 )));":"numeric"==e&&"asc"==t?"("+n+" === null && "+r+" === null) ? 0 :("+n+" === null ? Number.POSITIVE_INFINITY : ("+r+" === null ? Number.NEGATIVE_INFINITY : "+n+" - "+r+"));":"numeric"==e&&"desc"==t?"("+n+" === null && "+r+" === null) ? 0 :("+n+" === null ? Number.POSITIVE_INFINITY : ("+r+" === null ? Number.NEGATIVE_INFINITY : "+r+" - "+n+"));":void 0}function makeSortText(e){return"((a["+e+"] < b["+e+"]) ? -1 : ((a["+e+"] > b["+e+"]) ? 1 : 0));"}function makeSortTextDesc(e){return"((b["+e+"] < a["+e+"]) ? -1 : ((b["+e+"] > a["+e+"]) ? 1 : 0));"}function makeSortNumeric(e){return"a["+e+"]-b["+e+"];"}function makeSortNumericDesc(e){return"b["+e+"]-a["+e+"];"}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):t>e?-1:e>t?1:0}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):e>t?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark;var sortWrapper;this.construct=function(e){return this.each(function(){if(this.tHead&&this.tBodies){var t,i,n,r;this.config={},r=$.extend(this.config,$.tablesorter.defaults,e),t=$(this),$.data(this,"tablesorter",r),i=buildHeaders(this),this.config.parsers=buildParserCache(this,i),n=buildCache(this);var s=[r.cssDesc,r.cssAsc];fixColumnWidth(this),i.click(function(e){var o=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&o>0){t.trigger("sortStart");var a=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),e[r.sortMultiSortKey])if(isValueInArray(a,r.sortList))for(var l=0;l<r.sortList.length;l++){var c=r.sortList[l],d=r.headerList[c[0]];c[0]==a&&(d.count=c[1],d.count++,c[1]=d.count%2)}else r.sortList.push([a,this.order]);else{if(r.sortList=[],null!=r.sortForce)for(var h=r.sortForce,l=0;l<h.length;l++)h[l][0]!=a&&r.sortList.push(h[l]);r.sortList.push([a,this.order])}return setTimeout(function(){setHeadersCss(t[0],i,r.sortList,s),appendToTable(t[0],multisort(t[0],r.sortList,n))},1),!1}}).mousedown(function(){return r.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),t.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,i),n=buildCache(e)},1)}).bind("updateCell",function(e,t){var i=this.config,r=[t.parentNode.rowIndex-1,t.cellIndex];n.normalized[r[0]][r[1]]=i.parsers[r[1]].format(getElementText(i,t),t)}).bind("sorton",function(e,t){$(this).trigger("sortStart"),r.sortList=t;var o=r.sortList;updateHeaderSortCount(this,o),setHeadersCss(this,i,o,s),appendToTable(this,multisort(this,o,n))}).bind("appendCache",function(){appendToTable(this,n)}).bind("applyWidgetId",function(e,t){getWidgetById(t).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(r.sortList=$(this).metadata().sortlist),r.sortList.length>0&&t.trigger("sorton",[r.sortList]),applyWidget(this)}})},this.addParser=function(e){for(var t=parsers.length,i=!0,n=0;t>n;n++)parsers[n].id.toLowerCase()==e.id.toLowerCase()&&(i=!1);i&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e){return/^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))},this.clearTableBody=function(e){if($.browser.msie)for(;e.tBodies[0].firstChild;)e.tBodies[0].removeChild(e.tBodies[0].firstChild);else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var i=t.config;return $.tablesorter.isDigit(e,i)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[$?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[$]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),i="",n=t.length,r=0;n>r;r++){var s=t[r];i+=2==s.length?"0"+s:s}return $.tablesorter.formatFloat(i)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var i=t.config;return e=e.replace(/\-/g,"/"),"us"==i.dateFormat&&(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")),"pt"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"uk"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==i.dateFormat||"dd-mm-yy"==i.dateFormat)&&(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(e,t,i){var n=t.config,r=n.parserMetadataName?n.parserMetadataName:"sortValue";return $(i).metadata()[r]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;var i,n,r=-1;$("tr:visible",e.tBodies[0]).each(function(){i=$(this),i.hasClass(e.config.cssChildRow)||r++,n=r%2==0,i.removeClass(e.config.widgetZebra.css[n?0:1]).addClass(e.config.widgetZebra.css[n?1:0])}),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})}(jQuery),function(e,t,i){function n(t,i){this.element=t,this.$element=e(t),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=e({}),this.options=e.extend({},r,i),this.init()}var r={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,scrollToAccordion:!1,activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};
n.prototype.init=function(){var i=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),e(t).on("resize",function(e){i._setState(e)}),e(t).on("hashchange",function(e){var n=i._getTabRefBySelector(t.location.hash),r=i._getTab(n);n>=0&&!r._ignoreHashChange&&!r.disabled&&i._openTab(e,i._getTab(n),!0)}),this.options.rotate!==!1&&this.startRotation(),this.$element.bind("tabs-activate",function(e,t){i.options.activate.call(this,e,t)}),this.$element.bind("tabs-deactivate",function(e,t){i.options.deactivate.call(this,e,t)}),this.$element.bind("tabs-activate-state",function(e,t){i.options.activateState.call(this,e,t)}),this.$element.bind("tabs-load",function(e){var t;i._setState(e),i.options.startCollapsed===!0||"accordion"===i.options.startCollapsed&&"accordion"===i.state||(t=i._getStartTab(),i._openTab(e,t),i.options.load.call(this,e,t))}),this.$element.trigger("tabs-load")},n.prototype._loadElements=function(){var t=this,i=this.$element.children("ul"),n=[],r=0;return this.$element.addClass("r-tabs"),i.addClass("r-tabs-nav"),e("li",i).each(function(){var i,s,o,a,l,c=e(this),d=c.hasClass(t.options.classes.stateExcluded);if(!d){i=e("a",c),l=i.attr("href"),s=e(l),o=e("<div></div>").insertBefore(s),a=e("<a></a>").attr("href",l).html(i.html()).appendTo(o);var h={_ignoreHashChange:!1,id:r,disabled:-1!==e.inArray(r,t.options.disabled),tab:e(this),anchor:e("a",c),panel:s,selector:l,accordionTab:o,accordionAnchor:a,active:!1};r++,n.push(h)}}),n},n.prototype._loadClasses=function(){for(var e=0;e<this.tabs.length;e++)this.tabs[e].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[e].anchor.addClass(this.options.classes.anchor),this.tabs[e].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[e].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[e].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[e].disabled&&(this.tabs[e].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[e].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},n.prototype._loadEvents=function(){for(var e=this,i=function(i){var n=e._getCurrentTab(),r=i.data.tab;i.preventDefault(),r.disabled||(e.options.setHash&&(history.pushState?history.pushState(null,null,r.selector):t.location.hash=r.selector),i.data.tab._ignoreHashChange=!0,(n!==r||e._isCollapisble())&&(e._closeTab(i,n),n===r&&e._isCollapisble()||e._openTab(i,r,!1,!0)))},n=0;n<this.tabs.length;n++)this.tabs[n].anchor.on(e.options.event,{tab:e.tabs[n]},i),this.tabs[n].accordionAnchor.on(e.options.event,{tab:e.tabs[n]},i)},n.prototype._getStartTab=function(){var e,i=this._getTabRefBySelector(t.location.hash);return e=this._getTab(i>=0&&!this._getTab(i).disabled?i:this.options.active>0&&!this._getTab(this.options.active).disabled?this.options.active:0)},n.prototype._setState=function(t){var n,r=e("ul",this.$element),s=this.state,o="string"==typeof this.options.startCollapsed;this.state=r.is(":visible")?"tabs":"accordion",this.state!==s&&(this.$element.trigger("tabs-activate-state",{oldState:s,newState:this.state}),s&&o&&this.options.startCollapsed!==this.state&&this._getCurrentTab()===i&&(n=this._getStartTab(t),this._openTab(t,n)))},n.prototype._openTab=function(t,i,n,r){var s=this;n&&this._closeTab(t,this._getCurrentTab()),r&&this.rotateInterval>0&&this.stopRotation(),i.active=!0,i.tab.removeClass(s.options.classes.stateDefault).addClass(s.options.classes.stateActive),i.accordionTab.removeClass(s.options.classes.stateDefault).addClass(s.options.classes.stateActive),s._doTransition(i.panel,s.options.animation,"open",function(){i.panel.removeClass(s.options.classes.stateDefault).addClass(s.options.classes.stateActive),"accordion"!==s.getState()||!s.options.scrollToAccordion||s._isInView(i.accordionTab)&&"default"===s.options.animation||("default"!==s.options.animation&&s.options.duration>0?e("html, body").animate({scrollTop:i.accordionTab.offset().top},s.options.duration):e("html, body").scrollTop(i.accordionTab.offset().top))}),this.$element.trigger("tabs-activate",i)},n.prototype._closeTab=function(e,t){var n,r=this,s="string"==typeof r.options.animationQueue;t!==i&&(n=s&&r.getState()===r.options.animationQueue?!0:s?!1:r.options.animationQueue,t.active=!1,t.tab.removeClass(r.options.classes.stateActive).addClass(r.options.classes.stateDefault),r._doTransition(t.panel,r.options.animation,"close",function(){t.accordionTab.removeClass(r.options.classes.stateActive).addClass(r.options.classes.stateDefault),t.panel.removeClass(r.options.classes.stateActive).addClass(r.options.classes.stateDefault)},!n),this.$element.trigger("tabs-deactivate",t))},n.prototype._doTransition=function(e,t,i,n,r){var s,o=this;switch(t){case"slide":s="open"===i?"slideDown":"slideUp";break;case"fade":s="open"===i?"fadeIn":"fadeOut";break;default:s="open"===i?"show":"hide",o.options.duration=0}this.$queue.queue("responsive-tabs",function(r){e[s]({duration:o.options.duration,complete:function(){n.call(e,t,i),r()}})}),("open"===i||r)&&this.$queue.dequeue("responsive-tabs")},n.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},n.prototype._getTab=function(e){return this.tabs[e]},n.prototype._getTabRefBySelector=function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].selector===e)return t;return-1},n.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},n.prototype._getNextTabRef=function(e){var t=e||this._getCurrentTabRef(),i=t===this.tabs.length-1?0:t+1;return this._getTab(i).disabled?this._getNextTabRef(i):i},n.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},n.prototype._getCurrentTabRef=function(){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].active)return e;return-1},n.prototype._isInView=function(i){var n=e(t).scrollTop(),r=n+e(t).height(),s=i.offset().top,o=s+i.height();return r>=o&&s>=n},n.prototype.activate=function(e,t){var i=jQuery.Event("tabs-activate"),n=this._getTab(e);n.disabled||this._openTab(i,n,!0,t||!0)},n.prototype.deactivate=function(e){var t=jQuery.Event("tabs-dectivate"),i=this._getTab(e);i.disabled||this._closeTab(t,i)},n.prototype.enable=function(e){var t=this._getTab(e);t&&(t.disabled=!1,t.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),t.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},n.prototype.disable=function(e){var t=this._getTab(e);t&&(t.disabled=!0,t.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),t.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},n.prototype.getState=function(){return this.state},n.prototype.startRotation=function(t){var i=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var e=jQuery.Event("rotate");i._openTab(e,i._getTab(i._getNextTabRef()),!0)},t||(e.isNumeric(i.options.rotate)?i.options.rotate:4e3))},n.prototype.stopRotation=function(){t.clearInterval(this.rotateInterval),this.rotateInterval=0},e.fn.responsiveTabs=function(t){var r=arguments;return t===i||"object"==typeof t?this.each(function(){e.data(this,"responsivetabs")||e.data(this,"responsivetabs",new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var i=e.data(this,"responsivetabs");i instanceof n&&"function"==typeof i[t]&&i[t].apply(i,Array.prototype.slice.call(r,1)),"destroy"===t&&e.data(this,"responsivetabs",null)}):void 0}}(jQuery,window),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(e){var t,i,n,r,s,o,a="Close",l="BeforeClose",c="AfterClose",d="BeforeAppend",h="MarkupParse",u="Open",p="Change",f="mfp",g="."+f,m="mfp-ready",v="mfp-removing",_="mfp-prevent-close",b=function(){},y=!!window.jQuery,x=e(window),w=function(e,i){t.ev.on(f+e+g,i)},k=function(t,i,n,r){var s=document.createElement("div");return s.className="mfp-"+t,n&&(s.innerHTML=n),r?i&&i.appendChild(s):(s=e(s),i&&s.appendTo(i)),s},C=function(i,n){t.ev.triggerHandler(f+i,n),t.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),t.st.callbacks[i]&&t.st.callbacks[i].apply(t,e.isArray(n)?n:[n]))},S=function(i){return i===o&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),o=i),t.currTemplate.closeBtn},j=function(){e.magnificPopup.instance||(t=new b,t.init(),e.magnificPopup.instance=t)},T=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};b.prototype={constructor:b,init:function(){var i=navigator.appVersion;t.isLowIE=t.isIE8=document.all&&!document.addEventListener,t.isAndroid=/android/gi.test(i),t.isIOS=/iphone|ipad|ipod/gi.test(i),t.supportsTransition=T(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),n=e(document),t.popupsCache={}},open:function(i){var r;if(i.isObj===!1){t.items=i.items.toArray(),t.index=0;var o,a=i.items;for(r=0;r<a.length;r++)if(o=a[r],o.parsed&&(o=o.el[0]),o===i.el[0]){t.index=r;break}}else t.items=e.isArray(i.items)?i.items:[i.items],t.index=i.index||0;if(t.isOpen)return void t.updateItemHTML();t.types=[],s="",t.ev=i.mainEl&&i.mainEl.length?i.mainEl.eq(0):n,i.key?(t.popupsCache[i.key]||(t.popupsCache[i.key]={}),t.currTemplate=t.popupsCache[i.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,i),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=k("bg").on("click"+g,function(){t.close()}),t.wrap=k("wrap").attr("tabindex",-1).on("click"+g,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=k("container",t.wrap)),t.contentContainer=k("content"),t.st.preloader&&(t.preloader=k("preloader",t.container,t.st.tLoading));var l=e.magnificPopup.modules;for(r=0;r<l.length;r++){var c=l[r];c=c.charAt(0).toUpperCase()+c.slice(1),t["init"+c].call(t)}C("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(w(h,function(e,t,i,n){i.close_replaceWith=S(n.type)}),s+=" mfp-close-btn-in"):t.wrap.append(S())),t.st.alignTop&&(s+=" mfp-align-top"),t.wrap.css(t.fixedContentPos?{overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}:{top:x.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:n.height(),position:"absolute"}),t.st.enableEscapeKey&&n.on("keyup"+g,function(e){27===e.keyCode&&t.close()}),x.on("resize"+g,function(){t.updateSize()}),t.st.closeOnContentClick||(s+=" mfp-auto-cursor"),s&&t.wrap.addClass(s);var d=t.wH=x.height(),p={};if(t.fixedContentPos&&t._hasScrollBar(d)){var f=t._getScrollbarSize();f&&(p.marginRight=f)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):p.overflow="hidden");var v=t.st.mainClass;return t.isIE7&&(v+=" mfp-ie7"),v&&t._addClassToMFP(v),t.updateItemHTML(),C("BuildControls"),e("html").css(p),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||e(document.body)),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(m),t._setFocus()):t.bgOverlay.addClass(m),n.on("focusin"+g,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(d),C(u),i},close:function(){t.isOpen&&(C(l),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(v),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){C(a);var i=v+" "+m+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(i+=t.st.mainClass+" "),t._removeClassFromMFP(i),t.fixedContentPos){var r={marginRight:""};t.isIE7?e("body, html").css("overflow",""):r.overflow="",e("html").css(r)}n.off("keyup"+g+" focusin"+g),t.ev.off(g),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&t.currTemplate[t.currItem.type]!==!0||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t.st.autoFocusLast&&t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,C(c)},updateSize:function(e){if(t.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;t.wrap.css("height",n),t.wH=n}else t.wH=e||x.height();t.fixedContentPos||t.wrap.css("height",t.wH),C("Resize")},updateItemHTML:function(){var i=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),i.parsed||(i=t.parseEl(t.index));var n=i.type;if(C("BeforeChange",[t.currItem?t.currItem.type:"",n]),t.currItem=i,!t.currTemplate[n]){var s=t.st[n]?t.st[n].markup:!1;C("FirstMarkupParse",s),t.currTemplate[n]=s?e(s):!0}r&&r!==i.type&&t.container.removeClass("mfp-"+r+"-holder");var o=t["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,t.currTemplate[n]);t.appendContent(o,n),i.preloaded=!0,C(p,i),r=i.type,t.container.prepend(t.contentContainer),C("AfterChange")},appendContent:function(e,i){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&t.currTemplate[i]===!0?t.content.find(".mfp-close").length||t.content.append(S()):t.content=e:t.content="",C(d),t.container.addClass("mfp-"+i+"-holder"),t.contentContainer.append(t.content)},parseEl:function(i){var n,r=t.items[i];if(r.tagName?r={el:e(r)}:(n=r.type,r={data:r,src:r.src}),r.el){for(var s=t.types,o=0;o<s.length;o++)if(r.el.hasClass("mfp-"+s[o])){n=s[o];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=n||t.st.type||"inline",r.index=i,r.parsed=!0,t.items[i]=r,C("ElementParse",r),t.items[i]},addGroup:function(e,i){var n=function(n){n.mfpEl=this,t._openClick(n,e,i)};i||(i={});var r="click.magnificPopup";i.mainEl=e,i.items?(i.isObj=!0,e.off(r).on(r,n)):(i.isObj=!1,i.delegate?e.off(r).on(r,i.delegate,n):(i.items=e,e.off(r).on(r,n)))},_openClick:function(i,n,r){var s=void 0!==r.midClick?r.midClick:e.magnificPopup.defaults.midClick;if(s||!(2===i.which||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){var o=void 0!==r.disableOn?r.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(x.width()<o)return!0;i.type&&(i.preventDefault(),t.isOpen&&i.stopPropagation()),r.el=e(i.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),t.open(r)}},updateStatus:function(e,n){if(t.preloader){i!==e&&t.container.removeClass("mfp-s-"+i),n||"loading"!==e||(n=t.st.tLoading);var r={status:e,text:n};C("UpdateStatus",r),e=r.status,n=r.text,t.preloader.html(n),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),i=e}},_checkIfClose:function(i){if(!e(i).hasClass(_)){var n=t.st.closeOnContentClick,r=t.st.closeOnBgClick;if(n&&r)return!0;if(!t.content||e(i).hasClass("mfp-close")||t.preloader&&i===t.preloader[0])return!0;if(i===t.content[0]||e.contains(t.content[0],i)){if(n)return!0}else if(r&&e.contains(document,i))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?n.height():document.body.scrollHeight)>(e||x.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(i){return i.target===t.wrap[0]||e.contains(t.wrap[0],i.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,i,n){var r;n.data&&(i=e.extend(n.data,i)),C(h,[t,i,n]),e.each(i,function(i,n){if(void 0===n||n===!1)return!0;if(r=i.split("_"),r.length>1){var s=t.find(g+"-"+r[0]);if(s.length>0){var o=r[1];"replaceWith"===o?s[0]!==n[0]&&s.replaceWith(n):"img"===o?s.is("img")?s.attr("src",n):s.replaceWith(e("<img>").attr("src",n).attr("class",s.attr("class"))):s.attr(r[1],n)}}else t.find(g+"-"+i).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(t,i){return j(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=i||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,i){i.options&&(e.magnificPopup.defaults[t]=i.options),e.extend(this.proto,i.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},e.fn.magnificPopup=function(i){j();var n=e(this);if("string"==typeof i)if("open"===i){var r,s=y?n.data("magnificPopup"):n[0].magnificPopup,o=parseInt(arguments[1],10)||0;s.items?r=s.items[o]:(r=n,s.delegate&&(r=r.find(s.delegate)),r=r.eq(o)),t._openClick({mfpEl:r},n,s)}else t.isOpen&&t[i].apply(t,Array.prototype.slice.call(arguments,1));else i=e.extend(!0,{},i),y?n.data("magnificPopup",i):n[0].magnificPopup=i,t.addGroup(n,i);return n};var P,A,D,M="inline",I=function(){D&&(A.after(D.addClass(P)).detach(),D=null)};e.magnificPopup.registerModule(M,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(M),w(a+"."+M,function(){I()})},getInline:function(i,n){if(I(),i.src){var r=t.st.inline,s=e(i.src);if(s.length){var o=s[0].parentNode;o&&o.tagName&&(A||(P=r.hiddenClass,A=k(P),P="mfp-"+P),D=s.after(A).detach().removeClass(P)),t.updateStatus("ready")}else t.updateStatus("error",r.tNotFound),s=e("<div>");return i.inlineElement=s,s}return t.updateStatus("ready"),t._parseMarkup(n,{},i),n}}});var E,O="ajax",N=function(){E&&e(document.body).removeClass(E)},L=function(){N(),t.req&&t.req.abort()};e.magnificPopup.registerModule(O,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(O),E=t.st.ajax.cursor,w(a+"."+O,L),w("BeforeChange."+O,L)},getAjax:function(i){E&&e(document.body).addClass(E),t.updateStatus("loading");var n=e.extend({url:i.src,success:function(n,r,s){var o={data:n,xhr:s};C("ParseAjax",o),t.appendContent(e(o.data),O),i.finished=!0,N(),t._setFocus(),setTimeout(function(){t.wrap.addClass(m)},16),t.updateStatus("ready"),C("AjaxContentAdded")},error:function(){N(),i.finished=i.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",i.src))}},t.st.ajax.settings);return t.req=e.ajax(n),""}}});var H,Y=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=t.st.image.titleSrc;if(n){if(e.isFunction(n))return n.call(t,i);if(i.el)return i.el.attr(n)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=t.st.image,n=".image";t.types.push("image"),w(u+n,function(){"image"===t.currItem.type&&i.cursor&&e(document.body).addClass(i.cursor)}),w(a+n,function(){i.cursor&&e(document.body).removeClass(i.cursor),x.off("resize"+g)}),w("Resize"+n,t.resizeImage),t.isLowIE&&w("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var i=0;t.isLowIE&&(i=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-i)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,H&&clearInterval(H),e.isCheckingImgSize=!1,C("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var i=0,n=e.img[0],r=function(s){H&&clearInterval(H),H=setInterval(function(){return n.naturalWidth>0?void t._onImageHasSize(e):(i>200&&clearInterval(H),i++,void(3===i?r(10):40===i?r(50):100===i&&r(500)))},s)};r(1)},getImage:function(i,n){var r=0,s=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,C("ImageLoadComplete")):(r++,200>r?setTimeout(s,100):o()))},o=function(){i&&(i.img.off(".mfploader"),i===t.currItem&&(t._onImageHasSize(i),t.updateStatus("error",a.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},a=t.st.image,l=n.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=e(c).on("load.mfploader",s).on("error.mfploader",o),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),c=i.img[0],c.naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return t._parseMarkup(n,{title:Y(i),img_replaceWith:i.img},i),t.resizeImage(),i.hasSize?(H&&clearInterval(H),i.loadError?(n.addClass("mfp-loading"),t.updateStatus("error",a.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),t.updateStatus("ready")),n):(t.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),t.findImageSize(i)),n)}}});var R,W=function(){return void 0===R&&(R=void 0!==document.createElement("p").style.MozTransform),R};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,i=t.st.zoom,n=".zoom";if(i.enabled&&t.supportsTransition){var r,s,o=i.duration,c=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},s="transition";return r["-webkit-"+s]=r["-moz-"+s]=r["-o-"+s]=r[s]=n,t.css(r),t},d=function(){t.content.css("visibility","visible")};w("BuildControls"+n,function(){if(t._allowZoom()){if(clearTimeout(r),t.content.css("visibility","hidden"),e=t._getItemToZoom(),!e)return void d();s=c(e),s.css(t._getOffset()),t.wrap.append(s),r=setTimeout(function(){s.css(t._getOffset(!0)),r=setTimeout(function(){d(),setTimeout(function(){s.remove(),e=s=null,C("ZoomAnimationEnded")},16)},o)},16)}}),w(l+n,function(){if(t._allowZoom()){if(clearTimeout(r),t.st.removalDelay=o,!e){if(e=t._getItemToZoom(),!e)return;s=c(e)}s.css(t._getOffset(!0)),t.wrap.append(s),t.content.css("visibility","hidden"),setTimeout(function(){s.css(t._getOffset())},16)}}),w(a+n,function(){t._allowZoom()&&(d(),s&&s.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return t.currItem.hasSize?t.currItem.img:!1},_getOffset:function(i){var n;n=i?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var r=n.offset(),s=parseInt(n.css("padding-top"),10),o=parseInt(n.css("padding-bottom"),10);r.top-=e(window).scrollTop()-s;var a={width:n.width(),height:(y?n.innerHeight():n[0].offsetHeight)-o-s};return W()?a["-moz-transform"]=a.transform="translate("+r.left+"px,"+r.top+"px)":(a.left=r.left,a.top=r.top),a}}});var B="iframe",z="//about:blank",F=function(e){if(t.currTemplate[B]){var i=t.currTemplate[B].find("iframe");i.length&&(e||(i[0].src=z),t.isIE8&&i.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(B,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(B),w("BeforeChange",function(e,t,i){t!==i&&(t===B?F():i===B&&F(!0))}),w(a+"."+B,function(){F()})},getIframe:function(i,n){var r=i.src,s=t.st.iframe;e.each(s.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var o={};return s.srcAction&&(o[s.srcAction]=r),t._parseMarkup(n,o,i),t.updateStatus("ready"),n}}});var $=function(e){var i=t.items.length;return e>i-1?e-i:0>e?i+e:e},X=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=t.st.gallery,r=".mfp-gallery";return t.direction=!0,i&&i.enabled?(s+=" mfp-gallery",w(u+r,function(){i.navigateByImgClick&&t.wrap.on("click"+r,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),n.on("keydown"+r,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),w("UpdateStatus"+r,function(e,i){i.text&&(i.text=X(i.text,t.currItem.index,t.items.length))}),w(h+r,function(e,n,r,s){var o=t.items.length;r.counter=o>1?X(i.tCounter,s.index,o):""}),w("BuildControls"+r,function(){if(t.items.length>1&&i.arrows&&!t.arrowLeft){var n=i.arrowMarkup,r=t.arrowLeft=e(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(_),s=t.arrowRight=e(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(_);r.click(function(){t.prev()}),s.click(function(){t.next()}),t.container.append(r.add(s))}}),w(p+r,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),void w(a+r,function(){n.off(r),t.wrap.off("click"+r),t.arrowRight=t.arrowLeft=null})):!1},next:function(){t.direction=!0,t.index=$(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=$(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,i=t.st.gallery.preload,n=Math.min(i[0],t.items.length),r=Math.min(i[1],t.items.length);for(e=1;e<=(t.direction?r:n);e++)t._preloadItem(t.index+e);for(e=1;e<=(t.direction?n:r);e++)t._preloadItem(t.index-e)},_preloadItem:function(i){if(i=$(i),!t.items[i].preloaded){var n=t.items[i];n.parsed||(n=t.parseEl(i)),C("LazyLoad",n),"image"===n.type&&(n.img=e('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,C("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}}});var U="retina";e.magnificPopup.registerModule(U,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,i=e.ratio;i=isNaN(i)?i():i,i>1&&(w("ImageHasSize."+U,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/i,width:"100%"})}),w("ElementParse."+U,function(t,n){n.src=e.replaceSrc(n,i)}))}}}}),j()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,n){var r,s,o,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,s=r.name,t.href&&s&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return n&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),r=isNaN(n);return(r||n>=0)&&t(i,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,s){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(s,n(this,t)+"px")})},e.fn["outer"+i]=function(t,r){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(s,n(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var r,s=e.ui[t].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(e,t,i,n){var r,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,i)}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=0,i=Array.prototype.slice;return e.cleanData=function(t){return function(i){var n,r,s;for(s=0;null!=(r=i[s]);s++)try{n=e._data(r,"events"),n&&n.remove&&e(r).triggerHandler("remove")
}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var r,s,o,a,l={},c=t.split(".")[0];return t=t.split(".")[1],r=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=r,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(l[t]=n)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:r}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,s=i.call(arguments,1),o=0,a=s.length;a>o;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&void 0!==r&&(t[n]=e.isPlainObject(r)?e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,a=i.call(arguments,1),l=this;return o?this.each(function(){var i,n=e.data(this,r);return"instance"===s?(l=n,!1):n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,r,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(r=o[t]=e.widget.extend({},this.options[t]),s=0;s<n.length-1;s++)r[n[s]]=r[n[s]]||{},r=r[n[s]];if(t=n.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var r,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,o){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?r.delegate(d,c,a):i.bind(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,s,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&e.effects&&e.effects.effect[a]?n[t](r):a!==t&&n[a]?n[a](r.duration,r.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define(["jquery","./widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),t=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),r=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options,s=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=e(r.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var r=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i,n){var r=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,i,n){e.each(n.sortables,function(){var r=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(r=!1),r})),r?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var r=e("body"),s=n.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(t,i,n){var r=n.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(t,i,n){var r=n.options;r._opacity&&e(i.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var r=n.options,s=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var r=n.options;n.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var r,s,o,a,l,c,d,h,u,p,f=n.options,g=f.snapTolerance,m=i.offset.left,v=m+n.helperProportions.width,_=i.offset.top,b=_+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left-n.margins.left,c=l+n.snapElements[u].width,d=n.snapElements[u].top-n.margins.top,h=d+n.snapElements[u].height,l-g>v||m>c+g||d-g>b||_>h+g||!e.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(d-b)<=g,s=Math.abs(h-_)<=g,o=Math.abs(l-v)<=g,a=Math.abs(c-m)<=g,r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(d-_)<=g,s=Math.abs(h-b)<=g,o=Math.abs(l-m)<=g,a=Math.abs(c-v)<=g,r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(r||s||o||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=r||s||o||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var r,s=n.options,o=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(r=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var r=e(i.helper),s=n.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(t,i,n){var r=n.options;r._zIndex&&e(i.helper).css("zIndex",r._zIndex)}}),e.ui.draggable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,r=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(n=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var r,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0
},_mouseDrag:function(t){var i,n,r,s,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],r=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,s=e.left,o=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,u="y"===this.options.axis||t+d>s&&o>t+d,p=h&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return n?this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,r,s,o,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(s=e(c[n],this.document[0]),r=s.length-1;r>=0;r--)o=e.data(s[r],this.widgetFullName),o&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,r,s,o,a,l,c,d=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(r=e(u[i],this.document[0]),n=r.length-1;n>=0;n--)s=e.data(r[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(h.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=h.length-1;i>=0;i--)for(o=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",o),d.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,r,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=r.outerWidth(),n.height=r.outerHeight()),s=r.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r)):"tr"===n?t._createTrPlaceholder(t.currentItem,r):"img"===n&&r.attr("src",t.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(e,r){(!i||n.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,r,s,o,a,l,c,d,h,u=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(u&&e.contains(this.containers[i].element[0],u.element[0]))continue;u=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(r=1e4,s=null,d=u.floating||this._isFloating(this.currentItem),o=d?"left":"top",a=d?"width":"height",h=d?"clientX":"clientY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[o],c=!1,t[h]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[h]-l)<r&&(r=Math.abs(t[h]-l),s=this.items[n],this.direction=c?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],i=e(r.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,s=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/r.grid[0])*r.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}),function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,r=n._mouseInit;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),r.call(t)}}}(jQuery),function(){var e={},t=null,i=!0,n=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:i=!1}catch(r){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(r){n=!0}else n=!0;if(i){var s="undefined"==typeof t.createGain?t.createGainNode():t.createGain();s.gain.value=1,s.connect(t.destination)}var o=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=t,this.noAudio=n,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};o.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,i&&(s.gain.value=e);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var r=0;r<t._howls[n]._audioNode.length;r++)t._howls[n]._audioNode[r].volume=t._howls[n]._volume*t._volume;return t}return i?s.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,i&&(s.gain.value=e?0:t._volume);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var r=0;r<t._howls[n]._audioNode.length;r++)t._howls[n]._audioNode[r].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var i=function(){var n=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=n,r.connect(t.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",i,!1))},0)};return window.addEventListener("touchstart",i,!1),e}}};var a=null,l={};n||(a=new Audio,l={mp3:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var c=new o(l),d=function(e){var n=this;n._autoplay=e.autoplay||!1,n._buffer=e.buffer||!1,n._duration=e.duration||0,n._format=e.format||null,n._loop=e.loop||!1,n._loaded=!1,n._sprite=e.sprite||{},n._src=e.src||"",n._pos3d=e.pos3d||[0,0,-.5],n._volume=void 0!==e.volume?e.volume:1,n._urls=e.urls||[],n._rate=e.rate||1,n._model=e.model||null,n._onload=[e.onload||function(){}],n._onloaderror=[e.onloaderror||function(){}],n._onend=[e.onend||function(){}],n._onpause=[e.onpause||function(){}],n._onplay=[e.onplay||function(){}],n._onendTimer=[],n._webAudio=i&&!n._buffer,n._audioNode=[],n._webAudio&&n._setupAudioNode(),"undefined"!=typeof t&&t&&c.iOSAutoEnable&&c._enableiOSAudio(),c._howls.push(n),n.load()};if(d.prototype={load:function(){var e=this,t=null;if(n)return void e.on("loaderror");for(var i=0;i<e._urls.length;i++){var r,s;if(e._format)r=e._format;else{if(s=e._urls[i],r=/^data:audio\/([^;,]+);/i.exec(s),r||(r=/\.([^.]+)$/.exec(s.split("?",1)[0])),!r)return void e.on("loaderror");r=r[1].toLowerCase()}if(l[r]){t=e._urls[i];break}}if(!t)return void e.on("loaderror");if(e._src=t,e._webAudio)h(e,t);else{var a=new Audio;a.addEventListener("error",function(){a.error&&4===a.error.code&&(o.noAudio=!0),e.on("loaderror",{type:a.error?a.error.code:0})},!1),e._audioNode.push(a),a.src=t,a._pos=0,a.preload="auto",a.volume=c._muted?0:e._volume*c.volume();var d=function(){e._duration=Math.ceil(10*a.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),a.removeEventListener("canplaythrough",d,!1)};a.addEventListener("canplaythrough",d,!1),a.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,i){var n=this;return"function"==typeof e&&(i=e),e&&"function"!=typeof e||(e="_default"),n._loaded?n._sprite[e]?(n._inactiveNode(function(r){r._sprite=e;var s=r._pos>0?r._pos:n._sprite[e][0]/1e3,o=0;n._webAudio?(o=n._sprite[e][1]/1e3-r._pos,r._pos>0&&(s=n._sprite[e][0]/1e3+s)):o=n._sprite[e][1]/1e3-(s-n._sprite[e][0]/1e3);var a,l=!(!n._loop&&!n._sprite[e][2]),d="string"==typeof i?i:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:d,sprite:e,loop:l};a=setTimeout(function(){!n._webAudio&&l&&n.stop(t.id).play(e,t.id),n._webAudio&&!l&&(n._nodeById(t.id).paused=!0,n._nodeById(t.id)._pos=0,n._clearEndTimer(t.id)),n._webAudio||l||n.stop(t.id),n.on("end",d)},1e3*o),n._onendTimer.push({timer:a,id:t.id})}(),n._webAudio){var h=n._sprite[e][0]/1e3,u=n._sprite[e][1]/1e3;r.id=d,r.paused=!1,f(n,[l,h,u],d),n._playStart=t.currentTime,r.gain.value=n._volume,"undefined"==typeof r.bufferSource.start?r.bufferSource.noteGrainOn(0,s,o):r.bufferSource.start(0,s,o)}else{if(4!==r.readyState&&(r.readyState||!navigator.isCocoonJS))return n._clearEndTimer(d),function(){var t=n,s=e,o=i,a=r,l=function(){t.play(s,o),a.removeEventListener("canplaythrough",l,!1)};a.addEventListener("canplaythrough",l,!1)}(),n;r.readyState=4,r.id=d,r.currentTime=s,r.muted=c._muted||r.muted,r.volume=n._volume*c.volume(),setTimeout(function(){r.play()},0)}return n.on("play"),"function"==typeof i&&i(d),n}),n):("function"==typeof i&&i(),n):(n.on("load",function(){n.play(e,i)}),n)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var i=e?t._nodeById(e):t._activeNode();if(i)if(i._pos=t.pos(null,e),t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var i=e?t._nodeById(e):t._activeNode();if(i)if(i._pos=0,t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var i=e?t._nodeById(e):t._activeNode();return i&&(t._webAudio?i.gain.value=0:i.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var i=e?t._nodeById(e):t._activeNode();return i&&(t._webAudio?i.gain.value=t._volume:i.muted=!1),t},volume:function(e,t){var i=this;if(e=parseFloat(e),e>=0&&1>=e){if(i._volume=e,!i._loaded)return i.on("play",function(){i.volume(e,t)}),i;var n=t?i._nodeById(t):i._activeNode();return n&&(i._webAudio?n.gain.value=e:n.volume=e*c.volume()),i}return i._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,i){var n=this;if(!n._loaded)return n.on("load",function(){n.pos(e)}),"number"==typeof e?n:n._pos||0;e=parseFloat(e);var r=i?n._nodeById(i):n._activeNode();if(r)return e>=0?(n.pause(i),r._pos=e,n.play(r._sprite,i),n):n._webAudio?r._pos+(t.currentTime-n._playStart):r.currentTime;if(e>=0)return n;for(var s=0;s<n._audioNode.length;s++)if(n._audioNode[s].paused&&4===n._audioNode[s].readyState)return n._webAudio?n._audioNode[s]._pos:n._audioNode[s].currentTime},pos3d:function(e,t,i,n){var r=this;if(t="undefined"!=typeof t&&t?t:0,i="undefined"!=typeof i&&i?i:-.5,!r._loaded)return r.on("play",function(){r.pos3d(e,t,i,n)}),r;if(!(e>=0||0>e))return r._pos3d;if(r._webAudio){var s=n?r._nodeById(n):r._activeNode();s&&(r._pos3d=[e,t,i],s.panner.setPosition(e,t,i),s.panner.panningModel=r._model||"HRTF")}return r},fade:function(e,t,i,n,r){var s=this,o=Math.abs(e-t),a=e>t?"down":"up",l=o/.01,c=i/l;if(!s._loaded)return s.on("load",function(){s.fade(e,t,i,n,r)}),s;s.volume(e,r);for(var d=1;l>=d;d++)!function(){var e=s._volume+("up"===a?.01:-.01)*d,i=Math.round(1e3*e)/1e3,o=t;setTimeout(function(){s.volume(i,r),i===o&&n&&n()},c*d)}()},fadeIn:function(e,t,i){return this.volume(0).play().fade(0,e,t,i)},fadeOut:function(e,t,i,n){var r=this;return r.fade(r._volume,e,t,function(){i&&i(),r.pause(n),r.on("end")},n)},_nodeById:function(e){for(var t=this,i=t._audioNode[0],n=0;n<t._audioNode.length;n++)if(t._audioNode[n].id===e){i=t._audioNode[n];break}return i},_activeNode:function(){for(var e=this,t=null,i=0;i<e._audioNode.length;i++)if(!e._audioNode[i].paused){t=e._audioNode[i];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,i=null,n=0;n<t._audioNode.length;n++)if(t._audioNode[n].paused&&4===t._audioNode[n].readyState){e(t._audioNode[n]),i=!0;break}if(t._drainPool(),!i){var r;if(t._webAudio)r=t._setupAudioNode(),e(r);else{t.load(),r=t._audioNode[t._audioNode.length-1];var s=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",o=function(){r.removeEventListener(s,o,!1),e(r)};r.addEventListener(s,o,!1)}}},_drainPool:function(){var e,t=this,i=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&i++;for(e=t._audioNode.length-1;e>=0&&!(5>=i);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),i--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,i=0,n=0;n<t._onendTimer.length;n++)if(t._onendTimer[n].id===e){i=n;break}var r=t._onendTimer[i];r&&(clearTimeout(r.timer),t._onendTimer.splice(i,1))},_setupAudioNode:function(){var e=this,i=e._audioNode,n=e._audioNode.length;return i[n]="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),i[n].gain.value=e._volume,i[n].paused=!0,i[n]._pos=0,i[n].readyState=4,i[n].connect(s),i[n].panner=t.createPanner(),i[n].panner.panningModel=e._model||"equalpower",i[n].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),i[n].panner.connect(i[n]),i[n]},on:function(e,t){var i=this,n=i["_on"+e];if("function"==typeof t)n.push(t);else for(var r=0;r<n.length;r++)t?n[r].call(i,t):n[r].call(i);return i},off:function(e,t){var i=this,n=i["_on"+e],r=t?t.toString():null;if(r){for(var s=0;s<n.length;s++)if(r===n[s].toString()){n.splice(s,1);break}}else i["_on"+e]=[];return i},unload:function(){for(var t=this,i=t._audioNode,n=0;n<t._audioNode.length;n++)i[n].paused||(t.stop(i[n].id),t.on("end",i[n].id)),t._webAudio?i[n].disconnect(0):i[n].src="";
for(n=0;n<t._onendTimer.length;n++)clearTimeout(t._onendTimer[n].timer);var r=c._howls.indexOf(t);null!==r&&r>=0&&c._howls.splice(r,1),delete e[t._src],t=null}},i)var h=function(t,i){if(i in e)return t._duration=e[i].duration,void p(t);if(/^data:[^;]+;base64,/.test(i)){for(var n=atob(i.split(",")[1]),r=new Uint8Array(n.length),s=0;s<n.length;++s)r[s]=n.charCodeAt(s);u(r.buffer,t,i)}else{var o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){u(o.response,t,i)},o.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[i],t.load())};try{o.send()}catch(a){o.onerror()}}},u=function(i,n,r){t.decodeAudioData(i,function(t){t&&(e[r]=t,p(n,t))},function(){n.on("loaderror")})},p=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},f=function(i,n,r){var s=i._nodeById(r);s.bufferSource=t.createBufferSource(),s.bufferSource.buffer=e[i._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=n[0],n[0]&&(s.bufferSource.loopStart=n[1],s.bufferSource.loopEnd=n[1]+n[2]),s.bufferSource.playbackRate.value=i._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:c,Howl:d}}),"undefined"!=typeof exports&&(exports.Howler=c,exports.Howl=d),"undefined"!=typeof window&&(window.Howler=c,window.Howl=d)}(),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return Tt.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){xt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var i=!0;return f(function(){return i&&(r(e),i=!1),t.apply(this,arguments)},t)}function o(e,t){_i[e]||(r(t),_i[e]=!0)}function a(e,t){return function(i){return v(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function c(e,t){var i,n,r=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(r,"months");return 0>t-s?(i=e.clone().add(r-1,"months"),n=(t-s)/(s-i)):(i=e.clone().add(r+1,"months"),n=(t-s)/(i-s)),-(r+n)}function d(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function h(){}function u(e,t){t!==!1&&E(e),g(this,e),this._d=new Date(+e._d),yi===!1&&(yi=!0,xt.updateOffset(this),yi=!1)}function p(e){var t=j(e),i=t.year||0,n=t.quarter||0,r=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*n+12*i,this._data={},this._locale=xt.localeData(),this._bubble()}function f(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t){var i,n,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Lt.length>0)for(i in Lt)n=Lt[i],r=t[n],"undefined"!=typeof r&&(e[n]=r);return e}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,i){for(var n=""+Math.abs(e),r=e>=0;n.length<t;)n="0"+n;return(r?i?"+":"":"-")+n}function _(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function b(e,t){var i;return t=Y(t,e),e.isBefore(t)?i=_(e,t):(i=_(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function y(e,t){return function(i,n){var r,s;return null===n||isNaN(+n)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,r=xt.duration(i,n),x(this,r,e),this}}function x(e,t,i,n){var r=t._milliseconds,s=t._days,o=t._months;n=null==n?!0:n,r&&e._d.setTime(+e._d+r*i),s&&gt(e,"Date",ft(e,"Date")+s*i),o&&pt(e,ft(e,"Month")+o*i),n&&xt.updateOffset(e,s||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function C(e,t,i){var n,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(n=0;r>n;n++)(i&&e[n]!==t[n]||!i&&P(e[n])!==P(t[n]))&&o++;return o+s}function S(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=hi[e]||ui[t]||t}return e}function j(e){var t,n,r={};for(n in e)i(e,n)&&(t=S(n),t&&(r[t]=e[n]));return r}function T(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}xt[t]=function(r,s){var o,a,l=xt._locale[t],c=[];if("number"==typeof r&&(s=r,r=e),a=function(e){var t=xt().utc().set(n,e);return l.call(xt._locale,t,r||"")},null!=s)return a(s);for(o=0;i>o;o++)c.push(a(o));return c}}function P(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function A(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return ct(xt([e,11,31+t-i]),t,i).week}function M(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function E(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[At]<0||e._a[At]>11?At:e._a[Dt]<1||e._a[Dt]>A(e._a[Pt],e._a[At])?Dt:e._a[Mt]<0||e._a[Mt]>24||24===e._a[Mt]&&(0!==e._a[It]||0!==e._a[Et]||0!==e._a[Ot])?Mt:e._a[It]<0||e._a[It]>59?It:e._a[Et]<0||e._a[Et]>59?Et:e._a[Ot]<0||e._a[Ot]>999?Ot:-1,e._pf._overflowDayOfYear&&(Pt>t||t>Dt)&&(t=Dt),e._pf.overflow=t)}function O(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function N(e){return e?e.toLowerCase().replace("_","-"):e}function L(e){for(var t,i,n,r,s=0;s<e.length;){for(r=N(e[s]).split("-"),t=r.length,i=N(e[s+1]),i=i?i.split("-"):null;t>0;){if(n=H(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&C(r,i,!0)>=t-1)break;t--}s++}return null}function H(e){var t=null;if(!Nt[e]&&Ht)try{t=xt.locale(),require("./locale/"+e),xt.locale(t)}catch(i){}return Nt[e]}function Y(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(xt.isMoment(e)||k(e)?+e:+xt(e))-+i,i._d.setTime(+i._d+n),xt.updateOffset(i,!1),i):xt(e).local()}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t,i,n=e.match(Bt);for(t=0,i=n.length;i>t;t++)n[t]=vi[n[t]]?vi[n[t]]:R(n[t]);return function(r){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(r,e):n[t];return s}}function B(e,t){return e.isValid()?(t=z(t,e.localeData()),pi[t]||(pi[t]=W(t)),pi[t](e)):e.localeData().invalidDate()}function z(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(zt.lastIndex=0;n>=0&&zt.test(e);)e=e.replace(zt,i),zt.lastIndex=0,n-=1;return e}function F(e,t){var i,n=t._strict;switch(e){case"Q":return Jt;case"DDDD":return ti;case"YYYY":case"GGGG":case"gggg":return n?ii:Xt;case"Y":case"G":case"g":return ri;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ni:Ut;case"S":if(n)return Jt;case"SS":if(n)return ei;case"SSS":if(n)return ti;case"DDD":return $t;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Gt;case"a":case"A":return t._locale._meridiemParse;case"x":return Qt;case"X":return Zt;case"Z":case"ZZ":return Kt;case"T":return Vt;case"SSSS":return qt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?ei:Ft;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ft;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return i=new RegExp(Z(Q(e.replace("\\","")),"i"))}}function $(e){e=e||"";var t=e.match(Kt)||[],i=t[t.length-1]||[],n=(i+"").match(ci)||["-",0,0],r=+(60*n[1])+P(n[2]);return"+"===n[0]?r:-r}function X(e,t,i){var n,r=i._a;switch(e){case"Q":null!=t&&(r[At]=3*(P(t)-1));break;case"M":case"MM":null!=t&&(r[At]=P(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t,e,i._strict),null!=n?r[At]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Dt]=P(t));break;case"Do":null!=t&&(r[Dt]=P(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=P(t));break;case"YY":r[Pt]=xt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[Pt]=P(t);break;case"a":case"A":i._meridiem=t;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":r[Mt]=P(t);break;case"m":case"mm":r[It]=P(t);break;case"s":case"ss":r[Et]=P(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Ot]=P(1e3*("0."+t));break;case"x":i._d=new Date(P(t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=$(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=P(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=xt.parseTwoDigitYear(t)}}function U(e){var i,n,r,s,o,a,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(o=1,a=4,n=t(i.GG,e._a[Pt],ct(xt(),1,4).year),r=t(i.W,1),s=t(i.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=t(i.gg,e._a[Pt],ct(xt(),o,a).year),r=t(i.w,1),null!=i.d?(s=i.d,o>s&&++r):s=null!=i.e?i.e+o:o),l=dt(n,r,s,a,o),e._a[Pt]=l.year,e._dayOfYear=l.dayOfYear}function q(e){var i,n,r,s,o=[];if(!e._d){for(r=K(e),e._w&&null==e._a[Dt]&&null==e._a[At]&&U(e),e._dayOfYear&&(s=t(e._a[Pt],r[Pt]),e._dayOfYear>M(s)&&(e._pf._overflowDayOfYear=!0),n=st(s,0,e._dayOfYear),e._a[At]=n.getUTCMonth(),e._a[Dt]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=o[i]=r[i];for(;7>i;i++)e._a[i]=o[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Mt]&&0===e._a[It]&&0===e._a[Et]&&0===e._a[Ot]&&(e._nextDay=!0,e._a[Mt]=0),e._d=(e._useUTC?st:rt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Mt]=24)}}function G(e){var t;e._d||(t=j(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],q(e))}function K(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function V(t){if(t._f===xt.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var i,n,r,s,o,a=""+t._i,l=a.length,c=0;for(r=z(t._f,t._locale).match(Bt)||[],i=0;i<r.length;i++)s=r[i],n=(a.match(F(s,t))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),c+=n.length),vi[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),X(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-c,a.length>0&&t._pf.unusedInput.push(a),t._pf.bigHour===!0&&t._a[Mt]<=12&&(t._pf.bigHour=e),t._a[Mt]=d(t._locale,t._a[Mt],t._meridiem),q(t),E(t)}function Q(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r})}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e){var t,i,r,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[s],V(t),O(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==r||r>o)&&(r=o,i=t));f(e,i||t)}function et(e){var t,i,n=e._i,r=si.exec(n);if(r){for(e._pf.iso=!0,t=0,i=ai.length;i>t;t++)if(ai[t][1].exec(n)){e._f=ai[t][0]+(r[6]||" ");break}for(t=0,i=li.length;i>t;t++)if(li[t][1].exec(n)){e._f+=li[t][0];break}n.match(Kt)&&(e._f+="Z"),V(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,xt.createFromInputFallback(e))}function it(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function nt(t){var i,n=t._i;n===e?t._d=new Date:k(n)?t._d=new Date(+n):null!==(i=Yt.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?tt(t):w(n)?(t._a=it(n.slice(0),function(e){return parseInt(e,10)}),q(t)):"object"==typeof n?G(t):"number"==typeof n?t._d=new Date(n):xt.createFromInputFallback(t)}function rt(e,t,i,n,r,s,o){var a=new Date(e,t,i,n,r,s,o);return 1970>e&&a.setFullYear(e),a}function st(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ot(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function at(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function lt(e,t,i){var n=xt.duration(e).abs(),r=jt(n.as("s")),s=jt(n.as("m")),o=jt(n.as("h")),a=jt(n.as("d")),l=jt(n.as("M")),c=jt(n.as("y")),d=r<fi.s&&["s",r]||1===s&&["m"]||s<fi.m&&["mm",s]||1===o&&["h"]||o<fi.h&&["hh",o]||1===a&&["d"]||a<fi.d&&["dd",a]||1===l&&["M"]||l<fi.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,at.apply({},d)}function ct(e,t,i){var n,r=i-t,s=i-e.day();return s>r&&(s-=7),r-7>s&&(s+=7),n=xt(e).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function dt(e,t,i,n,r){var s,o,a=st(e,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:r,s=r-a+(a>n?7:0)-(r>a?7:0),o=7*(t-1)+(i-r)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:M(e-1)+o}}function ht(t){var i,n=t._i,r=t._f;return t._locale=t._locale||xt.localeData(t._l),null===n||r===e&&""===n?xt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),xt.isMoment(n)?new u(n,!0):(r?w(r)?J(t):V(t):nt(t),i=new u(t),i._nextDay&&(i.add(1,"d"),i._nextDay=e),i))}function ut(e,t){var i,n;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return xt();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function pt(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),A(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function ft(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function gt(e,t,i){return"Month"===t?pt(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function mt(e,t){return function(i){return null!=i?(gt(this,e,i),xt.updateOffset(this,t),this):ft(this,e)}}function vt(e){return 400*e/146097}function _t(e){return 146097*e/400}function bt(e){xt.duration.fn[e]=function(){return this._data[e]}}function yt(e){"undefined"==typeof ender&&(wt=St.moment,St.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",xt):xt)}for(var xt,wt,kt,Ct="2.9.0",St="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,jt=Math.round,Tt=Object.prototype.hasOwnProperty,Pt=0,At=1,Dt=2,Mt=3,It=4,Et=5,Ot=6,Nt={},Lt=[],Ht="undefined"!=typeof module&&module&&module.exports,Yt=/^\/?Date\((\-?\d+)/i,Rt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Wt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,zt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ft=/\d\d?/,$t=/\d{1,3}/,Xt=/\d{1,4}/,Ut=/[+\-]?\d{1,6}/,qt=/\d+/,Gt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kt=/Z|[\+\-]\d\d:?\d\d/gi,Vt=/T/i,Qt=/[\+\-]?\d+/,Zt=/[\+\-]?\d+(\.\d{1,3})?/,Jt=/\d/,ei=/\d\d/,ti=/\d{3}/,ii=/\d{4}/,ni=/[+-]?\d{6}/,ri=/[+-]?\d+/,si=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oi="YYYY-MM-DDTHH:mm:ssZ",ai=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],li=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ci=/([\+\-]|\d\d)/gi,di=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),hi={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ui={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pi={},fi={s:45,m:45,h:22,d:26,M:11},gi="DDD w W M D d".split(" "),mi="M D H h m s w W".split(" "),vi={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return P(this.milliseconds()/100)},SS:function(){return v(P(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(P(e/60),2)+":"+v(P(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(P(e/60),2)+v(P(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},_i={},bi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],yi=!1;gi.length;)kt=gi.pop(),vi[kt+"o"]=l(vi[kt],kt);for(;mi.length;)kt=mi.pop(),vi[kt+kt]=a(vi[kt],2);vi.DDDD=a(vi.DDD,3),f(h.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,i){var n,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=xt.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=xt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,i){var n=this._calendar[e];return"function"==typeof n?n.apply(t,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(e,t,i,n):r.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ct(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),xt=function(t,i,r,s){var o;return"boolean"==typeof r&&(s=r,r=e),o={},o._isAMomentObject=!0,o._i=t,o._f=i,o._l=r,o._strict=s,o._isUTC=!1,o._pf=n(),ht(o)},xt.suppressDeprecationWarnings=!1,xt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),xt.min=function(){var e=[].slice.call(arguments,0);return ut("isBefore",e)},xt.max=function(){var e=[].slice.call(arguments,0);return ut("isAfter",e)},xt.utc=function(t,i,r,s){var o;return"boolean"==typeof r&&(s=r,r=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=r,o._i=t,o._f=i,o._strict=s,o._pf=n(),ht(o).utc()},xt.unix=function(e){return xt(1e3*e)},xt.duration=function(e,t){var n,r,s,o,a=e,l=null;return xt.isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(l=Rt.exec(e))?(n="-"===l[1]?-1:1,a={y:0,d:P(l[Dt])*n,h:P(l[Mt])*n,m:P(l[It])*n,s:P(l[Et])*n,ms:P(l[Ot])*n}):(l=Wt.exec(e))?(n="-"===l[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},a={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=b(xt(a.from),xt(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),r=new p(a),xt.isDuration(e)&&i(e,"_locale")&&(r._locale=e._locale),r},xt.version=Ct,xt.defaultFormat=oi,xt.ISO_8601=function(){},xt.momentProperties=Lt,xt.updateOffset=function(){},xt.relativeTimeThreshold=function(t,i){return fi[t]===e?!1:i===e?fi[t]:(fi[t]=i,!0)},xt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return xt.locale(e,t)}),xt.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?xt.defineLocale(e,t):xt.localeData(e),i&&(xt.duration._locale=xt._locale=i)),xt._locale._abbr},xt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Nt[e]||(Nt[e]=new h),Nt[e].set(t),xt.locale(e),Nt[e]):(delete Nt[e],null)},xt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return xt.localeData(e)}),xt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return xt._locale;if(!w(e)){if(t=H(e))return t;e=[e]}return L(e)},xt.isMoment=function(e){return e instanceof u||null!=e&&i(e,"_isAMomentObject")},xt.isDuration=function(e){return e instanceof p};for(kt=bi.length-1;kt>=0;--kt)T(bi[kt]);xt.normalizeUnits=function(e){return S(e)},xt.invalid=function(e){var t=xt.utc(0/0);return null!=e?f(t._pf,e):t._pf.userInvalidated=!0,t},xt.parseZone=function(){return xt.apply(null,arguments).parseZone()},xt.parseTwoDigitYear=function(e){return P(e)+(P(e)>68?1900:2e3)},xt.isDate=k,f(xt.fn=u.prototype,{clone:function(){return xt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=xt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return O(this)},isDSTShifted:function(){return this._a?this.isValid()&&C(this._a,(this._isUTC?xt.utc(this._a):xt(this._a)).toArray())>0:!1},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=B(this,e||xt.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,i){var n,r,s=Y(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(r=c(this,s),"quarter"===t?r/=3:"year"===t&&(r/=12)):(n=this-s,r="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-o)/864e5:"week"===t?(n-o)/6048e5:n),i?r:m(r)},from:function(e,t){return xt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(xt(),e)},calendar:function(e){var t=e||xt(),i=Y(t,this).startOf("day"),n=this.diff(i,"days",!0),r=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,xt(t)))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ot(e,this.localeData()),this.add(e-t,"d")):t},month:mt("Month",!0),startOf:function(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=S(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+this>+e):(i=xt.isMoment(e)?+e:+xt(e),i<+this.clone().startOf(t))},isBefore:function(e,t){var i;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+e>+this):(i=xt.isMoment(e)?+e:+xt(e),+this.clone().endOf(t)<i)},isBetween:function(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)},isSame:function(e,t){var i;return t=S(t||"millisecond"),"millisecond"===t?(e=xt.isMoment(e)?e:xt(e),+this===+e):(i=+xt(e),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=xt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=xt.apply(null,arguments),e>this?this:e}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var i,n=this._offset||0;return null!=e?("string"==typeof e&&(e=$(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?x(this,xt.duration(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,xt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset($(this._i)),this},hasAlignedHourOffset:function(e){return e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(e){var t=jt((xt(this).startOf("day")-xt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ct(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=S(e),this[e]()},set:function(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else e=S(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var i;return t===e?this._locale._abbr:(i=xt.localeData(t),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),xt.fn.millisecond=xt.fn.milliseconds=mt("Milliseconds",!1),xt.fn.second=xt.fn.seconds=mt("Seconds",!1),xt.fn.minute=xt.fn.minutes=mt("Minutes",!1),xt.fn.hour=xt.fn.hours=mt("Hours",!0),xt.fn.date=mt("Date",!0),xt.fn.dates=s("dates accessor is deprecated. Use date instead.",mt("Date",!0)),xt.fn.year=mt("FullYear",!0),xt.fn.years=s("years accessor is deprecated. Use year instead.",mt("FullYear",!0)),xt.fn.days=xt.fn.day,xt.fn.months=xt.fn.month,xt.fn.weeks=xt.fn.week,xt.fn.isoWeeks=xt.fn.isoWeek,xt.fn.quarters=xt.fn.quarter,xt.fn.toJSON=xt.fn.toISOString,xt.fn.isUTC=xt.fn.isUtc,f(xt.duration.fn=p.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,r=this._days,s=this._months,o=this._data,a=0;
o.milliseconds=n%1e3,e=m(n/1e3),o.seconds=e%60,t=m(e/60),o.minutes=t%60,i=m(t/60),o.hours=i%24,r+=m(i/24),a=m(vt(r)),r-=m(_t(a)),s+=m(r/30),r%=30,a+=m(s/12),s%=12,o.days=r,o.months=s,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*P(this._months/12)},humanize:function(e){var t=lt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=xt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=xt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=S(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=S(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*vt(t),"month"===e?i:i/12;switch(t=this._days+Math.round(_t(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:xt.fn.lang,locale:xt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||r||s?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),xt.duration.fn.toString=xt.duration.fn.toISOString;for(kt in di)i(di,kt)&&bt(kt.toLowerCase());xt.duration.fn.asMilliseconds=function(){return this.as("ms")},xt.duration.fn.asSeconds=function(){return this.as("s")},xt.duration.fn.asMinutes=function(){return this.as("m")},xt.duration.fn.asHours=function(){return this.as("h")},xt.duration.fn.asDays=function(){return this.as("d")},xt.duration.fn.asWeeks=function(){return this.as("weeks")},xt.duration.fn.asMonths=function(){return this.as("M")},xt.duration.fn.asYears=function(){return this.as("y")},xt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===P(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Ht?module.exports=xt:"function"==typeof define&&define.amd?(define(function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(St.moment=wt),xt}),yt(!0)):yt()}.call(this),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function t(s,o,l,u){function p(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",T.component.nodes(w.open),C.box),C.wrap),C.frame),C.holder,'tabindex="-1"')}function f(){S.data(o,T).addClass(C.input).val(S.data("value")?T.get("select",k.format):s.value),k.editable||S.on("focus."+w.id+" click."+w.id,function(e){e.preventDefault(),T.open()}).on("keydown."+w.id,y),r(s,{haspopup:!0,expanded:!1,readonly:!1,owns:s.id+"_root"})}function g(){r(T.$root[0],"hidden",!0)}function m(){T.$holder.on({keydown:y,"focus.toOpen":b,blur:function(){S.removeClass(C.target)},focusin:function(e){T.$root.removeClass(C.focused),e.stopPropagation()},"mousedown click":function(t){var i=t.target;i!=T.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(i).is("input, select, textarea, button, option")||(t.preventDefault(),T.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),i=t.data(),n=t.hasClass(C.navDisabled)||t.hasClass(C.disabled),r=a();r=r&&(r.type||r.href),(n||r&&!e.contains(T.$root[0],r))&&T.$holder[0].focus(),!n&&i.nav?T.set("highlight",T.component.item.highlight,{nav:i.nav}):!n&&"pick"in i?(T.set("select",i.pick),k.closeOnSelect&&T.close(!0)):i.clear?(T.clear(),k.closeOnClear&&T.close(!0)):i.close&&T.close(!0)})}function v(){var t;k.hiddenName===!0?(t=s.name,s.name=""):(t=["string"==typeof k.hiddenPrefix?k.hiddenPrefix:"","string"==typeof k.hiddenSuffix?k.hiddenSuffix:"_submit"],t=t[0]+s.name+t[1]),T._hidden=e('<input type=hidden name="'+t+'"'+(S.data("value")||s.value?' value="'+T.get("select",k.formatSubmit)+'"':"")+">")[0],S.on("change."+w.id,function(){T._hidden.value=s.value?T.get("select",k.formatSubmit):""})}function _(){x&&h?T.$holder.find("."+C.frame).one("transitionend",function(){T.$holder[0].focus()}):T.$holder[0].focus()}function b(e){e.stopPropagation(),S.addClass(C.target),T.$root.addClass(C.focused),T.open()}function y(e){var t=e.keyCode,i=/^(8|46)$/.test(t);return 27==t?(T.close(!0),!1):void((32==t||i||!w.open&&T.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?T.clear().close():T.open()))}if(!s)return t;var x=!1,w={id:s.id||"P"+Math.abs(~~(Math.random()*new Date))},k=l?e.extend(!0,{},l.defaults,u):u||{},C=e.extend({},t.klasses(),k.klass),S=e(s),j=function(){return this.start()},T=j.prototype={constructor:j,$node:S,start:function(){return w&&w.start?T:(w.methods={},w.start=!0,w.open=!1,w.type=s.type,s.autofocus=s==a(),s.readOnly=!k.editable,s.id=s.id||w.id,"text"!=s.type&&(s.type="text"),T.component=new l(T,k),T.$root=e('<div class="'+C.picker+'" id="'+s.id+'_root" />'),g(),T.$holder=e(p()).appendTo(T.$root),m(),k.formatSubmit&&v(),f(),k.containerHidden?e(k.containerHidden).append(T._hidden):S.after(T._hidden),k.container?e(k.container).append(T.$root):S.after(T.$root),T.on({start:T.component.onStart,render:T.component.onRender,stop:T.component.onStop,open:T.component.onOpen,close:T.component.onClose,set:T.component.onSet}).on({start:k.onStart,render:k.onRender,stop:k.onStop,open:k.onOpen,close:k.onClose,set:k.onSet}),x=i(T.$holder[0]),s.autofocus&&T.open(),T.trigger("start").trigger("render"))},render:function(t){return t?(T.$holder=e(p()),m(),T.$root.html(T.$holder)):T.$root.find("."+C.box).html(T.component.nodes(w.open)),T.trigger("render")},stop:function(){return w.start?(T.close(),T._hidden&&T._hidden.parentNode.removeChild(T._hidden),T.$root.remove(),S.removeClass(C.input).removeData(o),setTimeout(function(){S.off("."+w.id)},0),s.type=w.type,s.readOnly=!1,T.trigger("stop"),w.methods={},w.start=!1,T):T},open:function(i){return w.open?T:(S.addClass(C.active),r(s,"expanded",!0),setTimeout(function(){T.$root.addClass(C.opened),r(T.$root[0],"hidden",!1)},0),i!==!1&&(w.open=!0,x&&d.css("overflow","hidden").css("padding-right","+="+n()),_(),c.on("click."+w.id+" focusin."+w.id,function(e){var t=e.target;t!=s&&t!=document&&3!=e.which&&T.close(t===T.$holder[0])}).on("keydown."+w.id,function(i){var n=i.keyCode,r=T.component.key[n],s=i.target;27==n?T.close(!0):s!=T.$holder[0]||!r&&13!=n?e.contains(T.$root[0],s)&&13==n&&(i.preventDefault(),s.click()):(i.preventDefault(),r?t._.trigger(T.component.key.go,T,[t._.trigger(r)]):T.$root.find("."+C.highlighted).hasClass(C.disabled)||(T.set("select",T.component.item.highlight),k.closeOnSelect&&T.close(!0)))})),T.trigger("open"))},close:function(e){return e&&(k.editable?s.focus():(T.$holder.off("focus.toOpen").focus(),setTimeout(function(){T.$holder.on("focus.toOpen",b)},0))),S.removeClass(C.active),r(s,"expanded",!1),setTimeout(function(){T.$root.removeClass(C.opened+" "+C.focused),r(T.$root[0],"hidden",!0)},0),w.open?(w.open=!1,x&&d.css("overflow","").css("padding-right","-="+n()),c.off("."+w.id),T.trigger("close")):T},clear:function(e){return T.set("clear",null,e)},set:function(t,i,n){var r,s,o=e.isPlainObject(t),a=o?t:{};if(n=o&&e.isPlainObject(i)?i:n||{},t){o||(a[t]=i);for(r in a)s=a[r],r in T.component.item&&(void 0===s&&(s=null),T.component.set(r,s,n)),("select"==r||"clear"==r)&&S.val("clear"==r?"":T.get(r,k.format)).trigger("change");T.render()}return n.muted?T:T.trigger("set",a)},get:function(e,i){if(e=e||"value",null!=w[e])return w[e];if("valueSubmit"==e){if(T._hidden)return T._hidden.value;e="value"}if("value"==e)return s.value;if(e in T.component.item){if("string"==typeof i){var n=T.component.get(e);return n?t._.trigger(T.component.formats.toString,T.component,[i,n]):""}return T.component.get(e)}},on:function(t,i,n){var r,s,o=e.isPlainObject(t),a=o?t:{};if(t){o||(a[t]=i);for(r in a)s=a[r],n&&(r="_"+r),w.methods[r]=w.methods[r]||[],w.methods[r].push(s)}return T},off:function(){var e,t,i=arguments;for(e=0,namesCount=i.length;e<namesCount;e+=1)t=i[e],t in w.methods&&delete w.methods[t];return T},trigger:function(e,i){var n=function(e){var n=w.methods[e];n&&n.map(function(e){t._.trigger(e,T,[i])})};return n("_"+e),n(e),T}};return new j}function i(e){var t,i="position";return e.currentStyle?t=e.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(e)[i]),"fixed"==t}function n(){if(d.height()<=l.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=t[0].offsetWidth;t.css("overflow","scroll");var n=e('<div style="width:100%" />').appendTo(t),r=n[0].offsetWidth;return t.remove(),i-r}function r(t,i,n){if(e.isPlainObject(i))for(var r in i)s(t,r,i[r]);else s(t,i,n)}function s(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function o(t,i){e.isPlainObject(t)||(t={attribute:i}),i="";for(var n in t){var r=("role"==n?"":"aria-")+n,s=t[n];i+=null==s?"":r+'="'+t[n]+'"'}return i}function a(){try{return document.activeElement}catch(e){}}var l=e(window),c=e(document),d=e(document.documentElement),h=null!=document.documentElement.style.transition;return t.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var i,n="",r=t._.trigger(e.min,e);r<=t._.trigger(e.max,e,[r]);r+=e.i)i=t._.trigger(e.item,e,[r]),n+=t._.node(e.node,i[0],i[1],i[2]);return n},node:function(t,i,n,r){return i?(i=e.isArray(i)?i.join(""):i,n=n?' class="'+n+'"':"",r=r?" "+r:"","<"+t+n+r+">"+i+"</"+t+">"):""},lead:function(e){return(10>e?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:o},t.extend=function(i,n){e.fn[i]=function(r,s){var o=this.data(i);return"picker"==r?o:o&&"string"==typeof r?t._.trigger(o[r],o,[s]):this.each(function(){var s=e(this);s.data(i)||new t(this,i,n,r)})},e.fn[i].defaults=n.defaults},t}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,n=e.$node[0],r=n.value,s=e.$node.data("value"),o=s||r,a=s?t.formatSubmit:t.format,l=function(){return n.currentStyle?"rtl"==n.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};i.settings=t,i.$node=e.$node,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return e[0]===!0?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),o?i.set("select",o,{format:a,defaultValue:!0}):i.set("select",null).set("highlight",i.item.now),i.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=i.item.highlight,n=new Date(t.year,t.month,t.date+e);i.set("highlight",n,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var i=this.value;i&&(e.set("highlight",[e.get("view").year,i,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var i=this.value;i&&(e.set("highlight",[i,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var n="";i.disabled(i.get("now"))&&(n=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+n+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var n=7,r=6,s=e._;i.prototype.set=function(e,t,i){var n=this,r=n.item;return null===t?("clear"==e&&(e="select"),r[e]=t,n):(r["enable"==e?"disable":"flip"==e?"enable":e]=n.queue[e].split(" ").map(function(r){return t=n[r](e,t,i)}).pop(),"select"==e?n.set("highlight",r.select,i):"highlight"==e?n.set("view",r.highlight,i):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&n.disabled(r.select)&&n.set("select",r.select,i),r.highlight&&n.disabled(r.highlight)&&n.set("highlight",r.highlight,i)),n)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,i,n){var r,o=this;return i=void 0===i?e:i,i==-1/0||1/0==i?r=i:t.isPlainObject(i)&&s.isInteger(i.pick)?i=i.obj:t.isArray(i)?(i=new Date(i[0],i[1],i[2]),i=s.isDate(i)?i:o.create().obj):i=s.isInteger(i)||s.isDate(i)?o.normalize(new Date(i),n):o.now(e,i,n),{year:r||i.getFullYear(),month:r||i.getMonth(),date:r||i.getDate(),day:r||i.getDay(),obj:r||i,pick:r||i.getTime()}},i.prototype.createRange=function(e,i){var n=this,r=function(e){return e===!0||t.isArray(e)||s.isDate(e)?n.create(e):e};return s.isInteger(e)||(e=r(e)),s.isInteger(i)||(i=r(i)),s.isInteger(e)&&t.isPlainObject(i)?e=[i.year,i.month,i.date+e]:s.isInteger(i)&&t.isPlainObject(e)&&(i=[e.year,e.month,e.date+i]),{from:r(e),to:r(i)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},i.prototype.navigate=function(e,i,n){var r,s,o,a,l=t.isArray(i),c=t.isPlainObject(i),d=this.item.view;if(l||c){for(c?(s=i.year,o=i.month,a=i.date):(s=+i[0],o=+i[1],a=+i[2]),n&&n.nav&&d&&d.month!==o&&(s=d.year,o=d.month),r=new Date(s,o+(n&&n.nav?n.nav:0),1),s=r.getFullYear(),o=r.getMonth();new Date(s,o,a).getMonth()!==o;)a-=1;i=[s,o,a]}return i},i.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},i.prototype.measure=function(e,t){var i=this;return t?"string"==typeof t?t=i.parse(e,t):s.isInteger(t)&&(t=i.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(e,i,n){var r,o,a,l,c=this,d=i,h=n&&n.interval?n.interval:1,u=-1===c.item.enable,p=c.item.min,f=c.item.max,g=u&&c.item.disable.filter(function(e){if(t.isArray(e)){var n=c.create(e).pick;n<i.pick?r=!0:n>i.pick&&(o=!0)}return s.isInteger(e)}).length;if((!n||!n.nav&&!n.defaultValue)&&(!u&&c.disabled(i)||u&&c.disabled(i)&&(g||r||o)||!u&&(i.pick<=p.pick||i.pick>=f.pick)))for(u&&!g&&(!o&&h>0||!r&&0>h)&&(h*=-1);c.disabled(i)&&(Math.abs(h)>1&&(i.month<d.month||i.month>d.month)&&(i=d,h=h>0?1:-1),i.pick<=p.pick?(a=!0,h=1,i=c.create([p.year,p.month,p.date+(i.pick===p.pick?0:-1)])):i.pick>=f.pick&&(l=!0,h=-1,i=c.create([f.year,f.month,f.date+(i.pick===f.pick?0:1)])),!a||!l);)i=c.create([i.year,i.month,i.date+h]);return i},i.prototype.disabled=function(e){var i=this,n=i.item.disable.filter(function(n){return s.isInteger(n)?e.day===(i.settings.firstDay?n:n-1)%7:t.isArray(n)||s.isDate(n)?e.pick===i.create(n).pick:t.isPlainObject(n)?i.withinRange(n,e):void 0});return n=n.length&&!n.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!n:n||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.parse=function(e,t,i){var n=this,r={};return t&&"string"==typeof t?(i&&i.format||(i=i||{},i.format=n.settings.format),n.formats.toArray(i.format).map(function(e){var i=n.formats[e],o=i?s.trigger(i,n,[t,r]):e.replace(/^!/,"").length;i&&(r[e]=t.substr(0,o)),t=t.substr(o)}),[r.yyyy||r.yy,+(r.mm||r.m)-1,r.dd||r.d]):t},i.prototype.formats=function(){function e(e,t,i){var n=e.match(/[^\x00-\x7F]+|\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(n)+1),n.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?s.digits(e):t.date},dd:function(e,t){return e?2:s.lead(t.date)},ddd:function(e,i){return e?t(e):this.settings.weekdaysShort[i.day]},dddd:function(e,i){return e?t(e):this.settings.weekdaysFull[i.day]},m:function(e,t){return e?s.digits(e):t.month+1},mm:function(e,t){return e?2:s.lead(t.month+1)},mmm:function(t,i){var n=this.settings.monthsShort;return t?e(t,n,i):n[i.month]},mmmm:function(t,i){var n=this.settings.monthsFull;return t?e(t,n,i):n[i.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return s.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}}}(),i.prototype.isDateExact=function(e,i){var n=this;return s.isInteger(e)&&s.isInteger(i)||"boolean"==typeof e&&"boolean"==typeof i?e===i:(s.isDate(e)||t.isArray(e))&&(s.isDate(i)||t.isArray(i))?n.create(e).pick===n.create(i).pick:t.isPlainObject(e)&&t.isPlainObject(i)?n.isDateExact(e.from,i.from)&&n.isDateExact(e.to,i.to):!1},i.prototype.isDateOverlap=function(e,i){var n=this,r=n.settings.firstDay?1:0;return s.isInteger(e)&&(s.isDate(i)||t.isArray(i))?(e=e%7+r,e===n.create(i).day+1):s.isInteger(i)&&(s.isDate(e)||t.isArray(e))?(i=i%7+r,i===n.create(e).day+1):t.isPlainObject(e)&&t.isPlainObject(i)?n.overlapRanges(e,i):!1},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,i){var n=this,r=n.item.disable.slice(0);return"flip"==i?n.flipEnable():i===!1?(n.flipEnable(1),r=[]):i===!0?(n.flipEnable(-1),r=[]):i.map(function(e){for(var i,o=0;o<r.length;o+=1)if(n.isDateExact(e,r[o])){i=!0;break}i||(s.isInteger(e)||s.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&r.push(e)}),r},i.prototype.activate=function(e,i){var n=this,r=n.item.disable,o=r.length;return"flip"==i?n.flipEnable():i===!0?(n.flipEnable(1),r=[]):i===!1?(n.flipEnable(-1),r=[]):i.map(function(e){var i,a,l,c;for(l=0;o>l;l+=1){if(a=r[l],n.isDateExact(a,e)){i=r[l]=null,c=!0;break}if(n.isDateOverlap(a,e)){t.isPlainObject(e)?(e.inverted=!0,i=e):t.isArray(e)?(i=e,i[3]||i.push("inverted")):s.isDate(e)&&(i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(i)for(l=0;o>l;l+=1)if(n.isDateExact(r[l],e)){r[l]=null;break}if(c)for(l=0;o>l;l+=1)if(n.isDateOverlap(r[l],e)){r[l]=null;break}i&&r.push(i)}),r.filter(function(e){return null!=e})},i.prototype.nodes=function(e){var t=this,i=t.settings,o=t.item,a=o.now,l=o.select,c=o.highlight,d=o.view,h=o.disable,u=o.min,p=o.max,f=function(e,t){return i.firstDay&&(e.push(e.shift()),t.push(t.shift())),s.node("thead",s.node("tr",s.group({min:0,max:n-1,i:1,node:"th",item:function(n){return[e[n],i.klass.weekdays,'scope=col title="'+t[n]+'"']}})))}((i.showWeekdaysFull?i.weekdaysFull:i.weekdaysShort).slice(0),i.weekdaysFull.slice(0)),g=function(e){return s.node("div"," ",i.klass["nav"+(e?"Next":"Prev")]+(e&&d.year>=p.year&&d.month>=p.month||!e&&d.year<=u.year&&d.month<=u.month?" "+i.klass.navDisabled:""),"data-nav="+(e||-1)+" "+s.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?i.labelMonthNext:i.labelMonthPrev)+'"')},m=function(){var n=i.showMonthsShort?i.monthsShort:i.monthsFull;return i.selectMonths?s.node("select",s.group({min:0,max:11,i:1,node:"option",item:function(e){return[n[e],0,"value="+e+(d.month==e?" selected":"")+(d.year==u.year&&e<u.month||d.year==p.year&&e>p.month?" disabled":"")]}}),i.klass.selectMonth,(e?"":"disabled")+" "+s.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+i.labelMonthSelect+'"'):s.node("div",n[d.month],i.klass.month)},v=function(){var n=d.year,r=i.selectYears===!0?5:~~(i.selectYears/2);if(r){var o=u.year,a=p.year,l=n-r,c=n+r;if(o>l&&(c+=o-l,l=o),c>a){var h=l-o,f=c-a;l-=h>f?f:h,c=a}return s.node("select",s.group({min:l,max:c,i:1,node:"option",item:function(e){return[e,0,"value="+e+(n==e?" selected":"")]}}),i.klass.selectYear,(e?"":"disabled")+" "+s.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+i.labelYearSelect+'"')}return s.node("div",n,i.klass.year)};return s.node("div",(i.selectYears?v()+m():m()+v())+g()+g(1),i.klass.header)+s.node("table",f+s.node("tbody",s.group({min:0,max:r-1,i:1,node:"tr",item:function(e){var r=i.firstDay&&0===t.create([d.year,d.month,1]).day?-7:0;return[s.group({min:n*e-d.day+r+1,max:function(){return this.min+n-1},i:1,node:"td",item:function(e){e=t.create([d.year,d.month,e+(i.firstDay?1:0)]);var n=l&&l.pick==e.pick,r=c&&c.pick==e.pick,o=h&&t.disabled(e)||e.pick<u.pick||e.pick>p.pick,f=s.trigger(t.formats.toString,t,[i.format,e]);return[s.node("div",e.date,function(t){return t.push(d.month==e.month?i.klass.infocus:i.klass.outfocus),a.pick==e.pick&&t.push(i.klass.now),n&&t.push(i.klass.selected),r&&t.push(i.klass.highlighted),o&&t.push(i.klass.disabled),t.join(" ")}([i.klass.day]),"data-pick="+e.pick+" "+s.ariaAttr({role:"gridcell",label:f,selected:n&&t.$node.val()===f?!0:null,activedescendant:r?!0:null,disabled:o?!0:null})),"",s.ariaAttr({role:"presentation"})]}})]}})),i.klass.table,'id="'+t.$node[0].id+'_table" '+s.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0}))+s.node("div",s.node("button",i.today,i.klass.buttonToday,"type=button data-pick="+a.pick+(e&&!t.disabled(a)?"":" disabled")+" "+s.ariaAttr({controls:t.$node[0].id}))+s.node("button",i.clear,i.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+s.ariaAttr({controls:t.$node[0].id}))+s.node("button",i.close,i.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+s.ariaAttr({controls:t.$node[0].id})),i.klass.footer)},i.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",i)}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,n=e.$node[0].value,r=e.$node.data("value"),s=r||n,o=r?t.formatSubmit:t.format;i.settings=t,i.$node=e.$node,i.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.interval=t.interval||30,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return e[0]===!0?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),s?i.set("select",s,{format:o}):i.set("select",null).set("highlight",i.item.now),i.key={40:1,38:-1,39:1,37:-1,go:function(e){i.set("highlight",i.item.highlight.pick+e*i.item.interval,{interval:e*i.item.interval}),this.render()}},e.on("render",function(){var i=e.$root.children(),n=i.find("."+t.klass.viewset),r=function(e){return["webkit","moz","ms","o",""].map(function(t){return(t?"-"+t+"-":"")+e})},s=function(e,t){r("transform").map(function(i){e.css(i,t)}),r("transition").map(function(i){e.css(i,t)})};n.length&&(s(i,"none"),i[0].scrollTop=~~n.position().top-2*n[0].clientHeight,s(i,""))},1).on("open",function(){e.$root.find("button").attr("disabled",!1)},1).on("close",function(){e.$root.find("button").attr("disabled",!0)},1)}var n=24,r=60,s=12,o=n*r,a=e._;i.prototype.set=function(e,t,i){var n=this,r=n.item;return null===t?("clear"==e&&(e="select"),r[e]=t,n):(r["enable"==e?"disable":"flip"==e?"enable":e]=n.queue[e].split(" ").map(function(r){return t=n[r](e,t,i)}).pop(),"select"==e?n.set("highlight",r.select,i):"highlight"==e?n.set("view",r.highlight,i):"interval"==e?n.set("min",r.min,i).set("max",r.max,i):e.match(/^(flip|min|max|disable|enable)$/)&&(r.select&&n.disabled(r.select)&&n.set("select",t,i),r.highlight&&n.disabled(r.highlight)&&n.set("highlight",t,i),"min"==e&&n.set("max",r.max,i)),n)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,i,s){var l=this;return i=void 0===i?e:i,a.isDate(i)&&(i=[i.getHours(),i.getMinutes()]),t.isPlainObject(i)&&a.isInteger(i.pick)?i=i.pick:t.isArray(i)?i=+i[0]*r+ +i[1]:a.isInteger(i)||(i=l.now(e,i,s)),"max"==e&&i<l.item.min.pick&&(i+=o),"min"!=e&&"max"!=e&&(i-l.item.min.pick)%l.item.interval!==0&&(i+=l.item.interval),i=l.normalize(e,i,s),{hour:~~(n+i/r)%n,mins:(r+i%r)%r,time:(o+i)%o,pick:i%o}},i.prototype.createRange=function(e,i){var n=this,r=function(e){return e===!0||t.isArray(e)||a.isDate(e)?n.create(e):e};return a.isInteger(e)||(e=r(e)),a.isInteger(i)||(i=r(i)),a.isInteger(e)&&t.isPlainObject(i)?e=[i.hour,i.mins+e*n.settings.interval]:a.isInteger(i)&&t.isPlainObject(e)&&(i=[e.hour,e.mins+i*n.settings.interval]),{from:r(e),to:r(i)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t){var i,n=this.item.interval,s=new Date,o=s.getHours()*r+s.getMinutes(),l=a.isInteger(t);return o-=o%n,i=0>t&&-n>=n*t+o,o+="min"==e&&i?0:n,l&&(o+=n*(i&&"max"!=e?t+1:t)),o},i.prototype.normalize=function(e,t){var i=this.item.interval,n=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-n)%i},i.prototype.measure=function(e,i,s){var o=this;return i||(i="min"==e?[0,0]:[n-1,r-1]),"string"==typeof i?i=o.parse(e,i):i===!0||a.isInteger(i)?i=o.now(e,i,s):t.isPlainObject(i)&&a.isInteger(i.pick)&&(i=o.normalize(e,i.pick,s)),i},i.prototype.validate=function(e,t,i){var n=this,r=i&&i.interval?i.interval:n.item.interval;return n.disabled(t)&&(t=n.shift(t,r)),t=n.scope(t),n.disabled(t)&&(t=n.shift(t,-1*r)),t},i.prototype.disabled=function(e){var i=this,n=i.item.disable.filter(function(n){return a.isInteger(n)?e.hour==n:t.isArray(n)||a.isDate(n)?e.pick==i.create(n).pick:t.isPlainObject(n)?i.withinRange(n,e):void 0});return n=n.length&&!n.filter(function(e){return t.isArray(e)&&"inverted"==e[2]||t.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!n:n||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.shift=function(e,t){var i=this,n=i.item.min.pick,r=i.item.max.pick;for(t=t||i.item.interval;i.disabled(e)&&(e=i.create(e.pick+=t),!(e.pick<=n||e.pick>=r)););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(e,t,i){var n,s,o,l,c,d=this,h={};if(!t||"string"!=typeof t)return t;i&&i.format||(i=i||{},i.format=d.settings.format),d.formats.toArray(i.format).map(function(e){var i,n=d.formats[e],r=n?a.trigger(n,d,[t,h]):e.replace(/^!/,"").length;n&&(i=t.substr(0,r),h[e]=i.match(/^\d+$/)?+i:i),t=t.substr(r)});for(l in h)c=h[l],a.isInteger(c)?l.match(/^(h|hh)$/i)?(n=c,("h"==l||"hh"==l)&&(n%=12)):"i"==l&&(s=c):l.match(/^a$/i)&&c.match(/^p/i)&&("h"in h||"hh"in h)&&(o=!0);return(o?n+12:n)*r+s},i.prototype.formats={h:function(e,t){return e?a.digits(e):t.hour%s||s},hh:function(e,t){return e?2:a.lead(t.hour%s||s)},H:function(e,t){return e?a.digits(e):""+t.hour%24},HH:function(e,t){return e?a.digits(e):a.lead(t.hour%24)},i:function(e,t){return e?2:a.lead(t.mins)},a:function(e,t){return e?4:o/2>t.time%o?"a.m.":"p.m."},A:function(e,t){return e?2:o/2>t.time%o?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return a.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,i){var n=this;return a.isInteger(e)&&a.isInteger(i)||"boolean"==typeof e&&"boolean"==typeof i?e===i:(a.isDate(e)||t.isArray(e))&&(a.isDate(i)||t.isArray(i))?n.create(e).pick===n.create(i).pick:t.isPlainObject(e)&&t.isPlainObject(i)?n.isTimeExact(e.from,i.from)&&n.isTimeExact(e.to,i.to):!1},i.prototype.isTimeOverlap=function(e,i){var n=this;return a.isInteger(e)&&(a.isDate(i)||t.isArray(i))?e===n.create(i).hour:a.isInteger(i)&&(a.isDate(e)||t.isArray(e))?i===n.create(e).hour:t.isPlainObject(e)&&t.isPlainObject(i)?n.overlapRanges(e,i):!1},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,i){var n=this,r=n.item.disable.slice(0);return"flip"==i?n.flipEnable():i===!1?(n.flipEnable(1),r=[]):i===!0?(n.flipEnable(-1),r=[]):i.map(function(e){for(var i,s=0;s<r.length;s+=1)if(n.isTimeExact(e,r[s])){i=!0;break}i||(a.isInteger(e)||a.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&r.push(e)}),r},i.prototype.activate=function(e,i){var n=this,r=n.item.disable,s=r.length;return"flip"==i?n.flipEnable():i===!0?(n.flipEnable(1),r=[]):i===!1?(n.flipEnable(-1),r=[]):i.map(function(e){var i,o,l,c;for(l=0;s>l;l+=1){if(o=r[l],n.isTimeExact(o,e)){i=r[l]=null,c=!0;break}if(n.isTimeOverlap(o,e)){t.isPlainObject(e)?(e.inverted=!0,i=e):t.isArray(e)?(i=e,i[2]||i.push("inverted")):a.isDate(e)&&(i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(i)for(l=0;s>l;l+=1)if(n.isTimeExact(r[l],e)){r[l]=null;break}if(c)for(l=0;s>l;l+=1)if(n.isTimeOverlap(r[l],e)){r[l]=null;break}i&&r.push(i)}),r.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return a.isInteger(t)&&t>0?t:this.item.interval},i.prototype.nodes=function(e){var t=this,i=t.settings,n=t.item.select,r=t.item.highlight,s=t.item.view,o=t.item.disable;return a.node("ul",a.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var l=e.pick,c=n&&n.pick==l,d=r&&r.pick==l,h=o&&t.disabled(e),u=a.trigger(t.formats.toString,t,[i.format,e]);return[a.trigger(t.formats.toString,t,[a.trigger(i.formatLabel,t,[e])||i.format,e]),function(e){return c&&e.push(i.klass.selected),d&&e.push(i.klass.highlighted),s&&s.pick==l&&e.push(i.klass.viewset),h&&e.push(i.klass.disabled),e.join(" ")
}([i.klass.listItem]),"data-pick="+e.pick+" "+a.ariaAttr({role:"option",label:u,selected:c&&t.$node.val()===u?!0:null,activedescendant:d?!0:null,disabled:h?!0:null})]}})+a.node("li",a.node("button",i.clear,i.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+a.ariaAttr({controls:t.$node[0].id})),"",a.ariaAttr({role:"presentation"})),i.klass.list,a.ariaAttr({role:"listbox",controls:t.$node[0].id}))},i.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",i)}),function(e){var t,i,n="0.4.2",r="hasOwnProperty",s=/[\.\/]/,o=/\s*,\s*/,a="*",l=function(e,t){return e-t},c={n:{}},d=function(){for(var e=0,t=this.length;t>e;e++)if("undefined"!=typeof this[e])return this[e]},h=function(){for(var e=this.length;--e;)if("undefined"!=typeof this[e])return this[e]},u=function(e,n){e=String(e);var r,s=i,o=Array.prototype.slice.call(arguments,2),a=u.listeners(e),c=0,p=[],f={},g=[],m=t;g.firstDefined=d,g.lastDefined=h,t=e,i=0;for(var v=0,_=a.length;_>v;v++)"zIndex"in a[v]&&(p.push(a[v].zIndex),a[v].zIndex<0&&(f[a[v].zIndex]=a[v]));for(p.sort(l);p[c]<0;)if(r=f[p[c++]],g.push(r.apply(n,o)),i)return i=s,g;for(v=0;_>v;v++)if(r=a[v],"zIndex"in r)if(r.zIndex==p[c]){if(g.push(r.apply(n,o)),i)break;do if(c++,r=f[p[c]],r&&g.push(r.apply(n,o)),i)break;while(r)}else f[r.zIndex]=r;else if(g.push(r.apply(n,o)),i)break;return i=s,t=m,g};u._events=c,u.listeners=function(e){var t,i,n,r,o,l,d,h,u=e.split(s),p=c,f=[p],g=[];for(r=0,o=u.length;o>r;r++){for(h=[],l=0,d=f.length;d>l;l++)for(p=f[l].n,i=[p[u[r]],p[a]],n=2;n--;)t=i[n],t&&(h.push(t),g=g.concat(t.f||[]));f=h}return g},u.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var i=e.split(o),n=0,r=i.length;r>n;n++)!function(e){for(var i,n=e.split(s),r=c,o=0,a=n.length;a>o;o++)r=r.n,r=r.hasOwnProperty(n[o])&&r[n[o]]||(r[n[o]]={n:{}});for(r.f=r.f||[],o=0,a=r.f.length;a>o;o++)if(r.f[o]==t){i=!0;break}!i&&r.f.push(t)}(i[n]);return function(e){+e==+e&&(t.zIndex=+e)}},u.f=function(e){var t=[].slice.call(arguments,1);return function(){u.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},u.stop=function(){i=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},u.nts=function(){return t.split(s)},u.off=u.unbind=function(e,t){if(!e)return void(u._events=c={n:{}});var i=e.split(o);if(i.length>1)for(var n=0,l=i.length;l>n;n++)u.off(i[n],t);else{i=e.split(s);var d,h,p,n,l,f,g,m=[c];for(n=0,l=i.length;l>n;n++)for(f=0;f<m.length;f+=p.length-2){if(p=[f,1],d=m[f].n,i[n]!=a)d[i[n]]&&p.push(d[i[n]]);else for(h in d)d[r](h)&&p.push(d[h]);m.splice.apply(m,p)}for(n=0,l=m.length;l>n;n++)for(d=m[n];d.n;){if(t){if(d.f){for(f=0,g=d.f.length;g>f;f++)if(d.f[f]==t){d.f.splice(f,1);break}!d.f.length&&delete d.f}for(h in d.n)if(d.n[r](h)&&d.n[h].f){var v=d.n[h].f;for(f=0,g=v.length;g>f;f++)if(v[f]==t){v.splice(f,1);break}!v.length&&delete d.n[h].f}}else{delete d.f;for(h in d.n)d.n[r](h)&&d.n[h].f&&delete d.n[h].f}d=d.n}}},u.once=function(e,t){var i=function(){return u.unbind(e,i),t.apply(this,arguments)};return u.on(e,i)},u.version=n,u.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd?define("eve",[],function(){return u}):e.eve=u}(this),function(e,t){if("function"==typeof define&&define.amd)define(["eve"],function(i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("eve");module.exports=t(e,i)}else t(e,e.eve)}(window||this,function(e,t){var i=function(t){var i={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},r=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},s=0,o="M"+(+new Date).toString(36),a=function(){return o+(s++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var i=t.s-e;t.b+=t.dur*i,t.B+=t.dur*i,t.s=e},d=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},h=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},u=function(){var e=this;delete i[e.id],e.update(),t("mina.stop."+e.id,e)},p=function(){var e=this;e.pdif||(delete i[e.id],e.update(),e.pdif=e.get()-e.b)},f=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,i[e.id]=e)},g=function(){var e,t=this;if(r(t.start)){e=[];for(var i=0,n=t.start.length;n>i;i++)e[i]=+t.start[i]+(t.end[i]-t.start[i])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)},m=function(){var e=0;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r],o=s.get();e++,s.s=(o-s.b)/(s.dur/s.spd),s.s>=1&&(delete i[r],s.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),s.update()}e&&n(m)},v=function(e,t,r,s,o,l,_){var b={id:a(),start:e,end:t,b:r,s:0,dur:s-r,spd:1,get:o,set:l,easing:_||v.linear,status:c,speed:d,duration:h,stop:u,pause:p,resume:f,update:g};i[b.id]=b;var y,x=0;for(y in i)if(i.hasOwnProperty(y)&&(x++,2==x))break;return 1==x&&n(m),b};return v.time=l,v.getById=function(e){return i[e]||null},v.linear=function(e){return e},v.easeout=function(e){return Math.pow(e,1.7)},v.easein=function(e){return Math.pow(e,.48)},v.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,i=Math.sqrt(.1734+t*t),n=i-t,r=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),s=-i-t,o=Math.pow(Math.abs(s),1/3)*(0>s?-1:1),a=r+o+.5;return 3*(1-a)*a*a+a*a*a},v.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},v.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},v.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},v.bounce=function(e){var t,i=7.5625,n=2.75;return 1/n>e?t=i*e*e:2/n>e?(e-=1.5/n,t=i*e*e+.75):2.5/n>e?(e-=2.25/n,t=i*e*e+.9375):(e-=2.625/n,t=i*e*e+.984375),t},e.mina=v,v}("undefined"==typeof t?function(){}:t),n=function(e){function i(e,t){if(e){if(e.nodeType)return w(e);if(r(e,"array")&&i.set)return i.set.apply(i,e);if(e instanceof _)return e;if(null==t)return e=C.doc.querySelector(String(e)),w(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new x(e,t)}function n(e,t){if(t){if("#text"==e&&(e=C.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=C.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=n(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(X,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(U,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType){for(var i in t)if(t[S](i)){var r=j(t[i]);r?"xlink:"==i.substring(0,6)?e.setAttributeNS(X,i.substring(6),r):"xml:"==i.substring(0,4)?e.setAttributeNS(U,i.substring(4),r):e.setAttribute(i,r):e.removeAttribute(i)}}else"text"in t&&(e.nodeValue=t.text)}else e=C.doc.createElementNS(U,e);return e}function r(e,t){return t=j.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||N.call(e).slice(8,-1).toLowerCase()==t}function s(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[S](i)&&(t[i]=s(e[i]));return t}function o(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function a(e,t,i){function n(){var r=Array.prototype.slice.call(arguments,0),s=r.join(""),a=n.cache=n.cache||{},l=n.count=n.count||[];return a[S](s)?(o(l,s),i?i(a[s]):a[s]):(l.length>=1e3&&delete a[l.shift()],l.push(s),a[s]=e.apply(t,r),i?i(a[s]):a[s])}return n}function l(e,t,i,n,r,s){if(null==r){var o=e-i,a=t-n;return o||a?(180+180*A.atan2(-a,-o)/E+360)%360:0}return l(e,t,r,s)-l(i,n,r,s)}function c(e){return e%360*E/180}function d(e){return 180*e/E%360}function h(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,i,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==i&&1==n.length&&n.push(0,0),"scale"==i&&(n.length>2?n=n.slice(0,2):2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),t.push("skewX"==i?["m",1,0,A.tan(c(n[0])),1,0,0]:"skewY"==i?["m",1,A.tan(c(n[0])),0,1,0,0]:[i.charAt(0)].concat(n)),e}),t}function u(e,t){var n=et(e),r=new i.Matrix;if(n)for(var s=0,o=n.length;o>s;s++){var a,l,c,d,h,u=n[s],p=u.length,f=j(u[0]).toLowerCase(),g=u[0]!=f,m=g?r.invert():0;"t"==f&&2==p?r.translate(u[1],0):"t"==f&&3==p?g?(a=m.x(0,0),l=m.y(0,0),c=m.x(u[1],u[2]),d=m.y(u[1],u[2]),r.translate(c-a,d-l)):r.translate(u[1],u[2]):"r"==f?2==p?(h=h||t,r.rotate(u[1],h.x+h.width/2,h.y+h.height/2)):4==p&&(g?(c=m.x(u[2],u[3]),d=m.y(u[2],u[3]),r.rotate(u[1],c,d)):r.rotate(u[1],u[2],u[3])):"s"==f?2==p||3==p?(h=h||t,r.scale(u[1],u[p-1],h.x+h.width/2,h.y+h.height/2)):4==p?g?(c=m.x(u[2],u[3]),d=m.y(u[2],u[3]),r.scale(u[1],u[1],c,d)):r.scale(u[1],u[1],u[2],u[3]):5==p&&(g?(c=m.x(u[3],u[4]),d=m.y(u[3],u[4]),r.scale(u[1],u[2],c,d)):r.scale(u[1],u[2],u[3],u[4])):"m"==f&&7==p&&r.add(u[1],u[2],u[3],u[4],u[5],u[6])}return r}function p(e){var t=e.node.ownerSVGElement&&w(e.node.ownerSVGElement)||e.node.parentNode&&w(e.node.parentNode)||i.select("svg")||i(0,0),n=t.select("defs"),r=null==n?!1:n.node;return r||(r=y("defs",t.node).node),r}function f(e){return e.node.ownerSVGElement&&w(e.node.ownerSVGElement)||i.select("svg")}function m(e,t,i){function r(e){if(null==e)return O;if(e==+e)return e;n(c,{width:e});try{return c.getBBox().width}catch(t){return 0}}function s(e){if(null==e)return O;if(e==+e)return e;n(c,{height:e});try{return c.getBBox().height}catch(t){return 0}}function o(n,r){null==t?l[n]=r(e.attr(n)||0):n==t&&(l=r(null==i?e.attr(n)||0:i))}var a=f(e).node,l={},c=a.querySelector(".svg---mgr");switch(c||(c=n("rect"),n(c,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),a.appendChild(c)),e.type){case"rect":o("rx",r),o("ry",s);case"image":o("width",r),o("height",s);case"text":o("x",r),o("y",s);break;case"circle":o("cx",r),o("cy",s),o("r",r);break;case"ellipse":o("cx",r),o("cy",s),o("rx",r),o("ry",s);break;case"line":o("x1",r),o("x2",r),o("y1",s),o("y2",s);break;case"marker":o("refX",r),o("markerWidth",r),o("refY",s),o("markerHeight",s);break;case"radialGradient":o("fx",r),o("fy",s);break;case"tspan":o("dx",r),o("dy",s);break;default:o(t,r)}return a.removeChild(c),l}function v(e){r(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,i=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var s=n.childNodes;for(t=0;t<s.length;t++)this[i++]=w(s[t]);return this}function _(e){if(e.snap in q)return q[e.snap];var t;try{t=e.ownerSVGElement}catch(i){}this.node=e,t&&(this.paper=new x(t)),this.type=e.tagName||e.nodeName;var n=this.id=$(this);if(this.anims={},this._={transform:[]},e.snap=n,q[n]=this,"g"==this.type&&(this.add=v),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in x.prototype)x.prototype[S](r)&&(this[r]=x.prototype[r])}function b(e){this.node=e}function y(e,t){var i=n(e);t.appendChild(i);var r=w(i);return r}function x(e,t){var i,r,s,o=x.prototype;if(e&&"svg"==e.tagName){if(e.snap in q)return q[e.snap];var a=e.ownerDocument;i=new _(e),r=e.getElementsByTagName("desc")[0],s=e.getElementsByTagName("defs")[0],r||(r=n("desc"),r.appendChild(a.createTextNode("Created with Snap")),i.node.appendChild(r)),s||(s=n("defs"),i.node.appendChild(s)),i.defs=s;for(var l in o)o[S](l)&&(i[l]=o[l]);i.paper=i.root=i}else i=y("svg",C.doc.body),n(i.node,{height:t,version:1.1,width:e,xmlns:U});return i}function w(e){return e?e instanceof _||e instanceof b?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new x(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new x(e.contentDocument.getElementsByTagName("svg")[0]):new _(e):e}function k(e,t){for(var i=0,n=e.length;n>i;i++){var r={type:e[i].type,attr:e[i].attr()},s=e[i].children();t.push(r),s.length&&k(s,r.childNodes=[])}}i.version="0.4.0",i.toString=function(){return"Snap v"+this.version},i._={};var C={win:e.window,doc:e.window.document};i._.glob=C;{var S="hasOwnProperty",j=String,T=parseFloat,P=parseInt,A=Math,D=A.max,M=A.min,I=A.abs,E=(A.pow,A.PI),O=(A.round,""),N=Object.prototype.toString,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,H=(i._.separator=/[,\s]+/,/[\s]*,[\s]*/),Y={hs:1,rg:1},R=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,W=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,B=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,z=0,F="S"+(+new Date).toString(36),$=function(e){return(e&&e.type?e.type:O)+F+(z++).toString(36)},X="http://www.w3.org/1999/xlink",U="http://www.w3.org/2000/svg",q={};i.url=function(e){return"url('#"+e+"')"}}i._.$=n,i._.id=$,i.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,n){var r=n;return i.replace(t,function(e,t,i,n,s){t=t||n,r&&(t in r&&(r=r[t]),"function"==typeof r&&s&&(r=r()))}),r=(null==r||r==n?e:r)+""};return function(t,n){return j(t).replace(e,function(e,t){return i(e,t,n)})}}(),i._.clone=s,i._.cacher=a,i.rad=c,i.deg=d,i.sin=function(e){return A.sin(i.rad(e))},i.tan=function(e){return A.tan(i.rad(e))},i.cos=function(e){return A.cos(i.rad(e))},i.asin=function(e){return i.deg(A.asin(e))},i.acos=function(e){return i.deg(A.acos(e))},i.atan=function(e){return i.deg(A.atan(e))},i.atan2=function(e){return i.deg(A.atan2(e))},i.angle=l,i.len=function(e,t,n,r){return Math.sqrt(i.len2(e,t,n,r))},i.len2=function(e,t,i,n){return(e-i)*(e-i)+(t-n)*(t-n)},i.closestPoint=function(e,t,i){function n(e){var n=e.x-t,r=e.y-i;return n*n+r*r}for(var r,s,o,a,l=e.node,c=l.getTotalLength(),d=c/l.pathSegList.numberOfItems*.125,h=1/0,u=0;c>=u;u+=d)(a=n(o=l.getPointAtLength(u)))<h&&(r=o,s=u,h=a);for(d*=.5;d>.5;){var p,f,g,m,v,_;(g=s-d)>=0&&(v=n(p=l.getPointAtLength(g)))<h?(r=p,s=g,h=v):(m=s+d)<=c&&(_=n(f=l.getPointAtLength(m)))<h?(r=f,s=m,h=_):d*=.5}return r={x:r.x,y:r.y,length:s,distance:Math.sqrt(h)}},i.is=r,i.snapTo=function(e,t,i){if(i=r(i,"finite")?i:10,r(e,"array")){for(var n=e.length;n--;)if(I(e[n]-t)<=i)return e[n]}else{e=+e;var s=t%e;if(i>s)return t-s;if(s>e-i)return t-s+e}return t},i.getRGB=a(function(e){if(!e||(e=j(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:Q};if(!(Y[S](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=G(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q};var t,n,s,o,a,l,c=e.match(L);return c?(c[2]&&(s=P(c[2].substring(5),16),n=P(c[2].substring(3,5),16),t=P(c[2].substring(1,3),16)),c[3]&&(s=P((a=c[3].charAt(3))+a,16),n=P((a=c[3].charAt(2))+a,16),t=P((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4].split(H),t=T(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),n=T(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),s=T(l[2]),"%"==l[2].slice(-1)&&(s*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5].split(H),t=T(l[0]),"%"==l[0].slice(-1)&&(t/=100),n=T(l[1]),"%"==l[1].slice(-1)&&(n/=100),s=T(l[2]),"%"==l[2].slice(-1)&&(s/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),i.hsb2rgb(t,n,s,o)):c[6]?(l=c[6].split(H),t=T(l[0]),"%"==l[0].slice(-1)&&(t/=100),n=T(l[1]),"%"==l[1].slice(-1)&&(n/=100),s=T(l[2]),"%"==l[2].slice(-1)&&(s/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),i.hsl2rgb(t,n,s,o)):(t=M(A.round(t),255),n=M(A.round(n),255),s=M(A.round(s),255),o=M(D(o,0),1),c={r:t,g:n,b:s,toString:Q},c.hex="#"+(16777216|s|n<<8|t<<16).toString(16).slice(1),c.opacity=r(o,"finite")?o:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Q}},i),i.hsb=a(function(e,t,n){return i.hsb2rgb(e,t,n).hex}),i.hsl=a(function(e,t,n){return i.hsl2rgb(e,t,n).hex}),i.rgb=a(function(e,t,i,n){if(r(n,"finite")){var s=A.round;return"rgba("+[s(e),s(t),s(i),+n.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)});var G=function(e){var t=C.doc.getElementsByTagName("head")[0]||C.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return(G=a(function(e){if("red"==e.toLowerCase())return i;t.style.color=i,t.style.color=e;var n=C.doc.defaultView.getComputedStyle(t,O).getPropertyValue("color");return n==i?null:n}))(e)},K=function(){return"hsb("+[this.h,this.s,this.b]+")"},V=function(){return"hsl("+[this.h,this.s,this.l]+")"},Q=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Z=function(e,t,n){if(null==t&&r(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,t=e.g,e=e.r),null==t&&r(e,string)){var s=i.getRGB(e);e=s.r,t=s.g,n=s.b}return(e>1||t>1||n>1)&&(e/=255,t/=255,n/=255),[e,t,n]},J=function(e,t,n,s){e=A.round(255*e),t=A.round(255*t),n=A.round(255*n);var o={r:e,g:t,b:n,opacity:r(s,"finite")?s:1,hex:i.rgb(e,t,n),toString:Q};return r(s,"finite")&&(o.opacity=s),o};i.color=function(e){var t;return r(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=i.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):r(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=i.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(r(e,"string")&&(e=i.getRGB(e)),r(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=i.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=i.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=Q,e},i.hsb2rgb=function(e,t,i,n){r(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,n=e.o,e=e.h),e*=360;var s,o,a,l,c;return e=e%360/60,c=i*t,l=c*(1-I(e%2-1)),s=o=a=i-c,e=~~e,s+=[c,l,0,0,l,c][e],o+=[l,c,c,l,0,0][e],a+=[0,0,l,c,c,l][e],J(s,o,a,n)},i.hsl2rgb=function(e,t,i,n){r(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var s,o,a,l,c;return e=e%360/60,c=2*t*(.5>i?i:1-i),l=c*(1-I(e%2-1)),s=o=a=i-c/2,e=~~e,s+=[c,l,0,0,l,c][e],o+=[l,c,c,l,0,0][e],a+=[0,0,l,c,c,l][e],J(s,o,a,n)},i.rgb2hsb=function(e,t,i){i=Z(e,t,i),e=i[0],t=i[1],i=i[2];var n,r,s,o;return s=D(e,t,i),o=s-M(e,t,i),n=0==o?null:s==e?(t-i)/o:s==t?(i-e)/o+2:(e-t)/o+4,n=(n+360)%6*60/360,r=0==o?0:o/s,{h:n,s:r,b:s,toString:K}},i.rgb2hsl=function(e,t,i){i=Z(e,t,i),e=i[0],t=i[1],i=i[2];var n,r,s,o,a,l;return o=D(e,t,i),a=M(e,t,i),l=o-a,n=0==l?null:o==e?(t-i)/l:o==t?(i-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,s=(o+a)/2,r=0==l?0:.5>s?l/(2*s):l/(2-2*s),{h:n,s:r,l:s,toString:V}},i.parsePathString=function(e){if(!e)return null;var t=i.path(e);if(t.arr)return i.path.clone(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];return r(e,"array")&&r(e[0],"array")&&(s=i.path.clone(e)),s.length||j(e).replace(R,function(e,t,i){var r=[],o=t.toLowerCase();if(i.replace(B,function(e,t){t&&r.push(+t)}),"m"==o&&r.length>2&&(s.push([t].concat(r.splice(0,2))),o="l",t="m"==t?"l":"L"),"o"==o&&1==r.length&&s.push([t,r[0]]),"r"==o)s.push([t].concat(r));else for(;r.length>=n[o]&&(s.push([t].concat(r.splice(0,n[o]))),n[o]););}),s.toString=i.path.toString,t.arr=i.path.clone(s),s};var et=i.parseTransformString=function(e){if(!e)return null;var t=[];return r(e,"array")&&r(e[0],"array")&&(t=i.path.clone(e)),t.length||j(e).replace(W,function(e,i,n){{var r=[];i.toLowerCase()}n.replace(B,function(e,t){t&&r.push(+t)}),t.push([i].concat(r))}),t.toString=i.path.toString,t};i._.svgTransform2string=h,i._.rgTransform=/^[a-z][\s]*-?\.?\d/i,i._.transform2matrix=u,i._unit2px=m;C.doc.contains||C.doc.compareDocumentPosition?function(e,t){var i=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};i._.getSomeDefs=p,i._.getSomeSVG=f,i.select=function(e){return e=j(e).replace(/([^\\]):/g,"$1\\:"),w(C.doc.querySelector(e))},i.selectAll=function(e){for(var t=C.doc.querySelectorAll(e),n=(i.set||Array)(),r=0;r<t.length;r++)n.push(w(t[r]));return n},setInterval(function(){for(var e in q)if(q[S](e)){var t=q[e],i=t.node;("svg"!=t.type&&!i.ownerSVGElement||"svg"==t.type&&(!i.parentNode||"ownerSVGElement"in i.parentNode&&!i.ownerSVGElement))&&delete q[e]}},1e4),_.prototype.attr=function(e,i){var n=this,s=n.node;if(!e){if(1!=s.nodeType)return{text:s.nodeValue};for(var o=s.attributes,a={},l=0,c=o.length;c>l;l++)a[o[l].nodeName]=o[l].nodeValue;return a}if(r(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,n).firstDefined();var d={};d[e]=i,e=d}for(var h in e)e[S](h)&&t("snap.util.attr."+h,n,e[h]);return n},i.parse=function(e){var t=C.doc.createDocumentFragment(),i=!0,n=C.doc.createElement("div");if(e=j(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",i=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(i)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new b(t)},i.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=C.doc.createDocumentFragment(),n=0,r=e.length;r>n;n++){var s=e[n];s.node&&s.node.nodeType&&t.appendChild(s.node),s.nodeType&&t.appendChild(s),"string"==typeof s&&t.appendChild(i.parse(s).node)}return new b(t)},i._.make=y,i._.wrap=w,x.prototype.el=function(e,t){var i=y(e,this.node);return t&&i.attr(t),i},_.prototype.children=function(){for(var e=[],t=this.node.childNodes,n=0,r=t.length;r>n;n++)e[n]=i(t[n]);return e},_.prototype.toJSON=function(){var e=[];return k([this],e),e[0]},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var i=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return tt[S](i)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):n(this.node,e)});var tt={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var i=t.nt(),r={};i=i.substring(i.lastIndexOf(".")+1),r[i]=e;var s=i.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o=i.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});tt[S](o)?this.node.style[s]=null==e?O:e:n(this.node,r)}),function(){}(x.prototype),i.ajax=function(e,i,n,s){var o=new XMLHttpRequest,a=$();if(o){if(r(i,"function"))s=n,n=i,i=null;else if(r(i,"object")){var l=[];for(var c in i)i.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]));i=l.join("&")}return o.open(i?"POST":"GET",e,!0),i&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(t.once("snap.ajax."+a+".0",n),t.once("snap.ajax."+a+".200",n),t.once("snap.ajax."+a+".304",n)),o.onreadystatechange=function(){4==o.readyState&&t("snap.ajax."+a+"."+o.status,s,o)},4==o.readyState?o:(o.send(i),o)}},i.load=function(e,t,n){i.ajax(e,function(e){var r=i.parse(e.responseText);n?t.call(n,r):t(r)})};var it=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,r=i.documentElement,s=r.clientTop||n.clientTop||0,o=r.clientLeft||n.clientLeft||0,a=t.top+(g.win.pageYOffset||r.scrollTop||n.scrollTop)-s,l=t.left+(g.win.pageXOffset||r.scrollLeft||n.scrollLeft)-o;return{y:a,x:l}};return i.getElementByPoint=function(e,t){var i=this,n=(i.canvas,C.doc.elementFromPoint(e,t));if(C.win.opera&&"svg"==n.tagName){var r=it(n),s=n.createSVGRect();s.x=e-r.x,s.y=t-r.y,s.width=s.height=1;var o=n.getIntersectionList(s,null);o.length&&(n=o[o.length-1])}return n?w(n):null},i.plugin=function(e){e(i,_,x,C,b)},C.win.Snap=i,i}(e||this);return n.plugin(function(n,r,s,o,a){function l(e,t){if(null==t){var i=!0;if(t=e.node.getAttribute("linearGradient"==e.type||"radialGradient"==e.type?"gradientTransform":"pattern"==e.type?"patternTransform":"transform"),!t)return new n.Matrix;t=n._.svgTransform2string(t)}else t=n._.rgTransform.test(t)?f(t).replace(/\.{3}|\u2026/g,e._.transform||""):n._.svgTransform2string(t),p(t,"array")&&(t=n.path?n.path.toString.call(t):f(t)),e._.transform=t;var r=n._.transform2matrix(t,e.getBBox(1));return i?r:void(e.matrix=r)}function c(e){function t(e,t){var i=m(e.node,t);i=i&&i.match(s),i=i&&i[2],i&&"#"==i.charAt()&&(i=i.substring(1),i&&(a[i]=(a[i]||[]).concat(function(i){var n={};n[t]=URL(i),m(e.node,n)})))}function i(e){var t=m(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(a[t]=(a[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,r=e.selectAll("*"),s=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],a={},l=0,c=r.length;c>l;l++){n=r[l],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),i(n);var d=m(n.node,"id");d&&(m(n.node,{id:n.id}),o.push({old:d,id:n.id}))}for(l=0,c=o.length;c>l;l++){var h=a[o[l].old];if(h)for(var u=0,p=h.length;p>u;u++)h[u](o[l].id)}}function d(e,t,i){return function(n){var r=n.slice(e,t);return 1==r.length&&(r=r[0]),i?i(r):r}}function h(e){return function(){var t=e?"<"+this.type:"",i=this.node.attributes,n=this.node.childNodes;if(e)for(var r=0,s=i.length;s>r;r++)t+=" "+i[r].name+'="'+i[r].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),r=0,s=n.length;s>r;r++)3==n[r].nodeType?t+=n[r].nodeValue:1==n[r].nodeType&&(t+=y(n[r]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}var u=r.prototype,p=n.is,f=String,g=n._unit2px,m=n._.$,v=n._.make,_=n._.getSomeDefs,b="hasOwnProperty",y=n._.wrap;u.getBBox=function(e){if(!n.Matrix||!n.path)return this.node.getBBox();var t=this,i=new n.Matrix;if(t.removed)return n._.box();for(;"use"==t.type;)if(e||(i=i.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original)t=t.original;else{var r=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var s=t._,o=n.path.get[t.type]||n.path.get.deflt;try{return e?(s.bboxwt=o?n.path.getBBox(t.realPath=o(t)):n._.box(t.node.getBBox()),n._.box(s.bboxwt)):(t.realPath=o(t),t.matrix=t.transform().localMatrix,s.bbox=n.path.getBBox(n.path.map(t.realPath,i.add(t.matrix))),n._.box(s.bbox))}catch(a){return n._.box()}};var x=function(){return this.string};u.transform=function(e){var t=this._;if(null==e){for(var i,r=this,s=new n.Matrix(this.node.getCTM()),o=l(this),a=[o],c=new n.Matrix,d=o.toTransformString(),h=f(o)==f(this.matrix)?f(t.transform):d;"svg"!=r.type&&(r=r.parent());)a.push(l(r));for(i=a.length;i--;)c.add(a[i]);return{string:h,globalMatrix:s,totalMatrix:c,localMatrix:o,diffMatrix:s.clone().add(o.invert()),global:s.toTransformString(),total:c.toTransformString(),local:d,toString:x}}return e instanceof n.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):l(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?m(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?m(this.node,{patternTransform:this.matrix}):m(this.node,{transform:this.matrix})),this},u.parent=function(){return y(this.node.parentNode)},u.append=u.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=y(e),this.node.appendChild(e.node),e.paper=this.paper}return this},u.appendTo=function(e){return e&&(e=y(e),e.append(this)),this},u.prepend=function(e){if(e){if("set"==e.type){var t,i=this;return e.forEach(function(e){t?t.after(e):i.prepend(e),t=e}),this}e=y(e);var n=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},u.prependTo=function(e){return e=y(e),e.prepend(this),this},u.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var i=e.parent();t.node.parentNode.insertBefore(e.node,t.node),i&&i.add()}),this.parent().add(),this}e=y(e);var i=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),e.paper=this.paper,this},u.after=function(e){e=y(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},u.insertBefore=function(e){e=y(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},u.insertAfter=function(e){e=y(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},u.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},u.select=function(e){return y(this.node.querySelector(e))},u.selectAll=function(e){for(var t=this.node.querySelectorAll(e),i=(n.set||Array)(),r=0;r<t.length;r++)i.push(y(t[r]));return i},u.asPX=function(e,t){return null==t&&(t=this.attr(e)),+g(this,e,t)},u.use=function(){var e,t=this.node.id;return t||(t=this.id,m(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?v(this.type,this.node.parentNode):v("use",this.node.parentNode),m(e.node,{"xlink:href":"#"+t}),e.original=this,e},u.clone=function(){var e=y(this.node.cloneNode(!0));return m(e.node,"id")&&m(e.node,{id:e.id}),c(e),e.insertAfter(this),e},u.toDefs=function(){var e=_(this);return e.appendChild(this.node),this},u.pattern=u.toPattern=function(e,t,i,n){var r=v("pattern",_(this));return null==e&&(e=this.getBBox()),p(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,e=e.x),m(r.node,{x:e,y:t,width:i,height:n,patternUnits:"userSpaceOnUse",id:r.id,viewBox:[e,t,i,n].join(" ")}),r.node.appendChild(this.node),r},u.marker=function(e,t,i,n,r,s){var o=v("marker",_(this));return null==e&&(e=this.getBBox()),p(e,"object")&&"x"in e&&(t=e.y,i=e.width,n=e.height,r=e.refX||e.cx,s=e.refY||e.cy,e=e.x),m(o.node,{viewBox:[e,t,i,n].join(" "),markerWidth:i,markerHeight:n,orient:"auto",refX:r||0,refY:s||0,id:o.id}),o.node.appendChild(this.node),o};var w=function(e,t,n,r){"function"!=typeof n||n.length||(r=n,n=i.linear),this.attr=e,this.dur=t,n&&(this.easing=n),r&&(this.callback=r)};n._.Animation=w,n.animation=function(e,t,i,n){return new w(e,t,i,n)},u.inAnim=function(){var e=this,t=[];for(var i in e.anims)e.anims[b](i)&&!function(e){t.push({anim:new w(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[i]);return t},n.animate=function(e,n,r,s,o,a){"function"!=typeof o||o.length||(a=o,o=i.linear);var l=i.time(),c=i(e,n,l,l+s,i.time,r,o);return a&&t.once("mina.finish."+c.id,a),c},u.stop=function(){for(var e=this.inAnim(),t=0,i=e.length;i>t;t++)e[t].stop();
return this},u.animate=function(e,n,r,s){"function"!=typeof r||r.length||(s=r,r=i.linear),e instanceof w&&(s=e.callback,r=e.easing,n=e.dur,e=e.attr);var o,a,l,c,h=[],u=[],g={},m=this;for(var v in e)if(e[b](v)){m.equal?(c=m.equal(v,f(e[v])),o=c.from,a=c.to,l=c.f):(o=+m.attr(v),a=+e[v]);var _=p(o,"array")?o.length:1;g[v]=d(h.length,h.length+_,l),h=h.concat(o),u=u.concat(a)}var y=i.time(),x=i(h,u,y,y+n,i.time,function(e){var t={};for(var i in g)g[b](i)&&(t[i]=g[i](e));m.attr(t)},r);return m.anims[x.id]=x,x._attrs=e,x._callback=s,t("snap.animcreated."+m.id,x),t.once("mina.finish."+x.id,function(){delete m.anims[x.id],s&&s.call(m)}),t.once("mina.stop."+x.id,function(){delete m.anims[x.id]}),m};var k={};u.data=function(e,i){var r=k[this.id]=k[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(n.is(e,"object")){for(var s in e)e[b](s)&&this.data(s,e[s]);return this}return t("snap.data.get."+this.id,this,r[e],e),r[e]}return r[e]=i,t("snap.data.set."+this.id,this,i,e),this},u.removeData=function(e){return null==e?k[this.id]={}:k[this.id]&&delete k[this.id][e],this},u.outerSVG=u.toString=h(1),u.innerSVG=h(),u.toDataURL=function(){if(e&&e.btoa){var t=this.getBBox(),i=n.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))}},a.prototype.select=u.select,a.prototype.selectAll=u.selectAll}),n.plugin(function(e){function t(e,t,n,r,s,o){return null==t&&"[object SVGMatrix]"==i.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+s,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var i=Object.prototype.toString,n=String,r=Math,s="";!function(i){function o(e){return e[0]*e[0]+e[1]*e[1]}function a(e){var t=r.sqrt(o(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}i.add=function(e,i,n,r,s,o){var a,l,c,d,h=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[e,n,s],[i,r,o],[0,0,1]];for(e&&e instanceof t&&(p=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;3>a;a++)for(l=0;3>l;l++){for(d=0,c=0;3>c;c++)d+=u[a][c]*p[c][l];h[a][l]=d}return this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2],this},i.invert=function(){var e=this,i=e.a*e.d-e.b*e.c;return new t(e.d/i,-e.b/i,-e.c/i,e.a/i,(e.c*e.f-e.d*e.e)/i,(e.b*e.e-e.a*e.f)/i)},i.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},i.translate=function(e,t){return this.add(1,0,0,1,e,t)},i.scale=function(e,t,i,n){return null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n),this},i.rotate=function(t,i,n){t=e.rad(t),i=i||0,n=n||0;var s=+r.cos(t).toFixed(9),o=+r.sin(t).toFixed(9);return this.add(s,o,-o,s,i,n),this.add(1,0,0,1,-i,-n)},i.x=function(e,t){return e*this.a+t*this.c+this.e},i.y=function(e,t){return e*this.b+t*this.d+this.f},i.get=function(e){return+this[n.fromCharCode(97+e)].toFixed(4)},i.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},i.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},i.determinant=function(){return this.a*this.d-this.b*this.c},i.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=r.sqrt(o(i[0])),a(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=r.sqrt(o(i[1])),a(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var n=-i[0][1],s=i[1][1];return 0>s?(t.rotate=e.deg(r.acos(s)),0>n&&(t.rotate=360-t.rotate)):t.rotate=e.deg(r.asin(n)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},i.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:s)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:s)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:s))}}(t.prototype),e.Matrix=t,e.matrix=function(e,i,n,r,s,o){return new t(e,i,n,r,s,o)}}),n.plugin(function(e,i,n,r,s){function o(n){return function(r){if(t.stop(),r instanceof s&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,p(this).appendChild(r),r=h(r)),r instanceof i)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||g(r.node,{id:r.id});var o=m(r.node.id)}else o=r.attr(n);else if(o=e.color(r),o.error){var a=e(p(this).ownerSVGElement).gradient(r);a?(a.node.id||g(a.node,{id:a.id}),o=m(a.node.id)):o=r}else o=v(o);var l={};l[n]=o,g(this.node,l),this.node.style[n]=b}}function a(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function l(e){for(var t=[],i=e.childNodes,n=0,r=i.length;r>n;n++){var s=i[n];3==s.nodeType&&t.push(s.nodeValue),"tspan"==s.tagName&&t.push(1==s.childNodes.length&&3==s.firstChild.nodeType?s.firstChild.nodeValue:l(s))}return t}function c(){return t.stop(),this.node.style.fontSize}var d=e._.make,h=e._.wrap,u=e.is,p=e._.getSomeDefs,f=/^url\(#?([^)]+)\)$/,g=e._.$,m=e.url,v=String,_=e._.separator,b="";t.on("snap.util.attr.mask",function(e){if(e instanceof i||e instanceof s){if(t.stop(),e instanceof s&&1==e.node.childNodes.length&&(e=e.node.firstChild,p(this).appendChild(e),e=h(e)),"mask"==e.type)var n=e;else n=d("mask",p(this)),n.node.appendChild(e.node);!n.node.id&&g(n.node,{id:n.id}),g(this.node,{mask:m(n.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof i||e instanceof s){if(t.stop(),"clipPath"==e.type)var n=e;else n=d("clipPath",p(this)),n.node.appendChild(e.node),!n.node.id&&g(n.node,{id:n.id});g(this.node,{"clip-path":m(n.node.id||n.id)})}}),t.on("snap.util.attr.fill",o("fill")),t.on("snap.util.attr.stroke",o("stroke"));var y=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=v(e);var t=e.match(y);if(!t)return null;var i=t[1],n=t[2],r=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),r=r.split("-"),r=r.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:i,params:n,stops:r}}),t.on("snap.util.attr.d",function(i){t.stop(),u(i,"array")&&u(i[0],"array")&&(i=e.path.toString.call(i)),i=v(i),i.match(/[ruo]/i)&&(i=e.path.toAbsolute(i)),g(this.node,{d:i})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=v(e);for(var i=r.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var i;i=u(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):u(e,"array")?e.join(" "):e,g(this.node,{viewBox:i}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),g(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var n,r,s;if(!e&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(u(e,"string")){var o=p(this),a=h(o.parentNode).path(e);o.appendChild(a.node),n=a.id,a.attr({id:n})}else e=h(e),e instanceof i&&(n=e.attr("id"),n||(n=e.id,e.attr({id:n})));if(n)if(r=this.textPath,s=this.node,r)r.attr({"xlink:href":"#"+n});else{for(r=g("textPath",{"xlink:href":"#"+n});s.firstChild;)r.appendChild(s.firstChild);s.appendChild(r),this.textPath=h(r)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var i=this.node,n=function(e){var t=g("tspan");if(u(e,"array"))for(var i=0;i<e.length;i++)t.appendChild(n(e[i]));else t.appendChild(r.doc.createTextNode(e));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(var s=n(e);s.firstChild;)i.appendChild(s.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",a)(-1),t.on("snap.util.attr.font-size",a)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function i(i){return function(){t.stop();var n=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+i);return"none"==n?n:e(r.doc.getElementById(n.match(f)[1]))}}function n(e){return function(i){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==i||!i)return void(this.node.style[n]="none");if("marker"==i.type){var r=i.node.id;return r||g(i.node,{id:i.id}),void(this.node.style[n]=m(r))}}}t.on("snap.util.getattr.marker-end",i("end"))(-1),t.on("snap.util.getattr.markerEnd",i("end"))(-1),t.on("snap.util.getattr.marker-start",i("start"))(-1),t.on("snap.util.getattr.markerStart",i("start"))(-1),t.on("snap.util.getattr.marker-mid",i("mid"))(-1),t.on("snap.util.getattr.markerMid",i("mid"))(-1),t.on("snap.util.attr.marker-end",n("end"))(-1),t.on("snap.util.attr.markerEnd",n("end"))(-1),t.on("snap.util.attr.marker-start",n("start"))(-1),t.on("snap.util.attr.markerStart",n("start"))(-1),t.on("snap.util.attr.marker-mid",n("mid"))(-1),t.on("snap.util.attr.markerMid",n("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&g(this.node,"rx")==g(this.node,"ry")?(t.stop(),g(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=l(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var i=g(this.node,"viewBox");return i?(i=i.split(_),e._.box(+i[0],+i[1],+i[2],+i[3])):void 0})(-1),t.on("snap.util.getattr.points",function(){var e=g(this.node,"points");return t.stop(),e?e.split(_):void 0})(-1),t.on("snap.util.getattr.path",function(){var e=g(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",c)(-1),t.on("snap.util.getattr.font-size",c)(-1)}),n.plugin(function(e,t){var i=/\S+/g,n=String,r=t.prototype;r.addClass=function(e){var t,r,s,o,a=n(e||"").match(i)||[],l=this.node,c=l.className.baseVal,d=c.match(i)||[];if(a.length){for(t=0;s=a[t++];)r=d.indexOf(s),~r||d.push(s);o=d.join(" "),c!=o&&(l.className.baseVal=o)}return this},r.removeClass=function(e){var t,r,s,o,a=n(e||"").match(i)||[],l=this.node,c=l.className.baseVal,d=c.match(i)||[];if(d.length){for(t=0;s=a[t++];)r=d.indexOf(s),~r&&d.splice(r,1);o=d.join(" "),c!=o&&(l.className.baseVal=o)}return this},r.hasClass=function(e){var t=this.node,n=t.className.baseVal,r=n.match(i)||[];return!!~r.indexOf(e)},r.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);var n,r,s,o,a=(e||"").match(i)||[],l=this.node,c=l.className.baseVal,d=c.match(i)||[];for(n=0;s=a[n++];)r=d.indexOf(s),~r?d.splice(r,1):d.push(s);return o=d.join(" "),c!=o&&(l.className.baseVal=o),this}}),n.plugin(function(){function e(e){return e}function i(e){return function(t){return+t.toFixed(3)+e}}var n={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},r=String,s=/[a-z]+$/i,o=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(e){var i=r(e).match(o);if(i){var a=t.nt(),l=a.substring(a.lastIndexOf(".")+1),c=this.attr(l),d={};t.stop();var h=i[3]||"",u=c.match(s),p=n[i[1]];if(u&&u==h?e=p(parseFloat(c),+i[2]):(c=this.asPX(l),e=p(this.asPX(l),this.asPX(l,i[2]+h))),isNaN(c)||isNaN(e))return;d[l]=e,this.attr(d)}})(-10),t.on("snap.util.equal",function(a,l){var c=r(this.attr(a)||""),d=r(l).match(o);if(d){t.stop();var h=d[3]||"",u=c.match(s),p=n[d[1]];return u&&u==h?{from:parseFloat(c),to:p(parseFloat(c),+d[2]),f:i(u)}:(c=this.asPX(a),{from:c,to:p(c,this.asPX(a,d[2]+h)),f:e})}})(-10)}),n.plugin(function(i,n,r,s){var o=r.prototype,a=i.is;o.rect=function(e,t,i,n,r,s){var o;return null==s&&(s=r),a(e,"object")&&"[object Object]"==e?o=e:null!=e&&(o={x:e,y:t,width:i,height:n},null!=r&&(o.rx=r,o.ry=s)),this.el("rect",o)},o.circle=function(e,t,i){var n;return a(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:i}),this.el("circle",n)};var l=function(){function e(){this.parentNode.removeChild(this)}return function(t,i){var n=s.doc.createElement("img"),r=s.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){i.call(n),n.onload=n.onerror=null,r.removeChild(n)},n.onerror=e,r.appendChild(n),n.src=t}}();o.image=function(e,t,n,r,s){var o=this.el("image");if(a(e,"object")&&"src"in e)o.attr(e);else if(null!=e){var c={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=n&&(c.x=t,c.y=n),null!=r&&null!=s?(c.width=r,c.height=s):l(e,function(){i._.$(o.node,{width:this.offsetWidth,height:this.offsetHeight})}),i._.$(o.node,c)}return o},o.ellipse=function(e,t,i,n){var r;return a(e,"object")&&"[object Object]"==e?r=e:null!=e&&(r={cx:e,cy:t,rx:i,ry:n}),this.el("ellipse",r)},o.path=function(e){var t;return a(e,"object")&&!a(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},o.group=o.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},o.svg=function(e,t,i,n,r,s,o,l){var c={};return a(e,"object")&&null==t?c=e:(null!=e&&(c.x=e),null!=t&&(c.y=t),null!=i&&(c.width=i),null!=n&&(c.height=n),null!=r&&null!=s&&null!=o&&null!=l&&(c.viewBox=[r,s,o,l])),this.el("svg",c)},o.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},o.ptrn=function(e,t,i,n,r,s,o,l){if(a(e,"object"))var c=e;else c={patternUnits:"userSpaceOnUse"},e&&(c.x=e),t&&(c.y=t),null!=i&&(c.width=i),null!=n&&(c.height=n),c.viewBox=null!=r&&null!=s&&null!=o&&null!=l?[r,s,o,l]:[e||0,t||0,i||0,n||0];return this.el("pattern",c)},o.use=function(e){return null!=e?(e instanceof n&&(e.attr("id")||e.attr({id:i._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):n.prototype.use.call(this)},o.symbol=function(e,t,i,n){var r={};return null!=e&&null!=t&&null!=i&&null!=n&&(r.viewBox=[e,t,i,n]),this.el("symbol",r)},o.text=function(e,t,i){var n={};return a(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:i||""}),this.el("text",n)},o.line=function(e,t,i,n){var r={};return a(e,"object")?r=e:null!=e&&(r={x1:e,x2:i,y1:t,y2:n}),this.el("line",r)},o.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},o.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return a(e,"object")&&!a(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},function(){function n(){return this.selectAll("stop")}function r(e,t){var n=d("stop"),r={offset:+t+"%"};return e=i.color(e),r["stop-color"]=e.hex,e.opacity<1&&(r["stop-opacity"]=e.opacity),d(n,r),this.node.appendChild(n),this}function s(){if("linearGradient"==this.type){var e=d(this.node,"x1")||0,t=d(this.node,"x2")||1,n=d(this.node,"y1")||0,r=d(this.node,"y2")||0;return i._.box(e,n,math.abs(t-e),math.abs(r-n))}var s=this.node.cx||.5,o=this.node.cy||.5,a=this.node.r||0;return i._.box(s-a,o-a,2*a,2*a)}function a(e,i){function n(e,t){for(var i=(t-h)/(e-u),n=u;e>n;n++)o[n].offset=+(+h+i*(n-u)).toFixed(2);u=e,h=t}var r,s=t("snap.util.grad.parse",null,i).firstDefined();if(!s)return null;s.params.unshift(e),r="l"==s.type.toLowerCase()?l.apply(0,s.params):c.apply(0,s.params),s.type!=s.type.toLowerCase()&&d(r.node,{gradientUnits:"userSpaceOnUse"});var o=s.stops,a=o.length,h=0,u=0;a--;for(var p=0;a>p;p++)"offset"in o[p]&&n(p,o[p].offset);for(o[a].offset=o[a].offset||100,n(a,o[a].offset),p=0;a>=p;p++){var f=o[p];r.addStop(f.color,f.offset)}return r}function l(e,t,o,a,l){var c=i._.make("linearGradient",e);return c.stops=n,c.addStop=r,c.getBBox=s,null!=t&&d(c.node,{x1:t,y1:o,x2:a,y2:l}),c}function c(e,t,o,a,l,c){var h=i._.make("radialGradient",e);return h.stops=n,h.addStop=r,h.getBBox=s,null!=t&&d(h.node,{cx:t,cy:o,r:a}),null!=l&&null!=c&&d(h.node,{fx:l,fy:c}),h}var d=i._.$;o.gradient=function(e){return a(this.defs,e)},o.gradientLinear=function(e,t,i,n){return l(this.defs,e,t,i,n)},o.gradientRadial=function(e,t,i,n,r){return c(this.defs,e,t,i,n,r)},o.toString=function(){var e,t=this.node.ownerDocument,n=t.createDocumentFragment(),r=t.createElement("div"),s=this.node.cloneNode(!0);return n.appendChild(r),r.appendChild(s),i._.$(s,{xmlns:"http://www.w3.org/2000/svg"}),e=r.innerHTML,n.removeChild(n.firstChild),e},o.toDataURL=function(){return e&&e.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},o.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):o.clear.call({node:t}),t=e}}()}),n.plugin(function(e,t){function i(e){var t=i.ps=i.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[L](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]}function n(e,t,i,n){return null==e&&(e=t=i=n=0),null==t&&(t=e.y,i=e.width,n=e.height,e=e.x),{x:e,y:t,width:i,w:i,height:n,h:n,x2:e+i,y2:t+n,cx:e+i/2,cy:t+n/2,r1:R.min(i,n)/2,r2:R.max(i,n)/2,r0:R.sqrt(i*i+n*n)/2,path:w(e,t,i,n),vb:[e,t,i,n].join(" ")}}function r(){return this.join(",").replace(H,"$1")}function s(e){var t=N(e);return t.toString=r,t}function o(e,t,i,n,r,s,o,a,c){return null==c?p(e,t,i,n,r,s,o,a):l(e,t,i,n,r,s,o,a,f(e,t,i,n,r,s,o,a,c))}function a(i,n){function r(e){return+(+e).toFixed(3)}return e._.cacher(function(e,s,a){e instanceof t&&(e=e.attr("d")),e=D(e);for(var c,d,h,u,p,f="",g={},m=0,v=0,_=e.length;_>v;v++){if(h=e[v],"M"==h[0])c=+h[1],d=+h[2];else{if(u=o(c,d,h[1],h[2],h[3],h[4],h[5],h[6]),m+u>s){if(n&&!g.start){if(p=o(c,d,h[1],h[2],h[3],h[4],h[5],h[6],s-m),f+=["C"+r(p.start.x),r(p.start.y),r(p.m.x),r(p.m.y),r(p.x),r(p.y)],a)return f;g.start=f,f=["M"+r(p.x),r(p.y)+"C"+r(p.n.x),r(p.n.y),r(p.end.x),r(p.end.y),r(h[5]),r(h[6])].join(),m+=u,c=+h[5],d=+h[6];continue}if(!i&&!n)return p=o(c,d,h[1],h[2],h[3],h[4],h[5],h[6],s-m)}m+=u,c=+h[5],d=+h[6]}f+=h.shift()+h}return g.end=f,p=i?m:n?g:l(c,d,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,e._.clone)}function l(e,t,i,n,r,s,o,a,l){var c=1-l,d=F(c,3),h=F(c,2),u=l*l,p=u*l,f=d*e+3*h*l*i+3*c*l*l*r+p*o,g=d*t+3*h*l*n+3*c*l*l*s+p*a,m=e+2*l*(i-e)+u*(r-2*i+e),v=t+2*l*(n-t)+u*(s-2*n+t),_=i+2*l*(r-i)+u*(o-2*r+i),b=n+2*l*(s-n)+u*(a-2*s+n),y=c*e+l*i,x=c*t+l*n,w=c*r+l*o,k=c*s+l*a,C=90-180*R.atan2(m-_,v-b)/W;return{x:f,y:g,m:{x:m,y:v},n:{x:_,y:b},start:{x:y,y:x},end:{x:w,y:k},alpha:C}}function c(t,i,r,s,o,a,l,c){e.is(t,"array")||(t=[t,i,r,s,o,a,l,c]);var d=A.apply(null,t);return n(d.min.x,d.min.y,d.max.x-d.min.x,d.max.y-d.min.y)}function d(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function h(e,t){return e=n(e),t=n(t),d(t,e.x,e.y)||d(t,e.x2,e.y)||d(t,e.x,e.y2)||d(t,e.x2,e.y2)||d(e,t.x,t.y)||d(e,t.x2,t.y)||d(e,t.x,t.y2)||d(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function u(e,t,i,n,r){var s=-3*t+9*i-9*n+3*r,o=e*s+6*t-12*i+6*n;return e*o-3*t+3*i}function p(e,t,i,n,r,s,o,a,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,d=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,g=0;d>g;g++){var m=c*h[g]+c,v=u(m,e,i,r,o),_=u(m,t,n,s,a),b=v*v+_*_;f+=p[g]*R.sqrt(b)}return c*f}function f(e,t,i,n,r,s,o,a,l){if(!(0>l||p(e,t,i,n,r,s,o,a)<l)){var c,d=1,h=d/2,u=d-h,f=.01;for(c=p(e,t,i,n,r,s,o,a,u);$(c-l)>f;)h/=2,u+=(l>c?1:-1)*h,c=p(e,t,i,n,r,s,o,a,u);return u}}function g(e,t,i,n,r,s,o,a){if(!(z(e,i)<B(r,o)||B(e,i)>z(r,o)||z(t,n)<B(s,a)||B(t,n)>z(s,a))){var l=(e*n-t*i)*(r-o)-(e-i)*(r*a-s*o),c=(e*n-t*i)*(s-a)-(t-n)*(r*a-s*o),d=(e-i)*(s-a)-(t-n)*(r-o);if(d){var h=l/d,u=c/d,p=+h.toFixed(2),f=+u.toFixed(2);if(!(p<+B(e,i).toFixed(2)||p>+z(e,i).toFixed(2)||p<+B(r,o).toFixed(2)||p>+z(r,o).toFixed(2)||f<+B(t,n).toFixed(2)||f>+z(t,n).toFixed(2)||f<+B(s,a).toFixed(2)||f>+z(s,a).toFixed(2)))return{x:h,y:u}}}}function m(e,t,i){var n=c(e),r=c(t);if(!h(n,r))return i?0:[];for(var s=p.apply(0,e),o=p.apply(0,t),a=~~(s/8),d=~~(o/8),u=[],f=[],m={},v=i?0:[],_=0;a+1>_;_++){var b=l.apply(0,e.concat(_/a));u.push({x:b.x,y:b.y,t:_/a})}for(_=0;d+1>_;_++)b=l.apply(0,t.concat(_/d)),f.push({x:b.x,y:b.y,t:_/d});for(_=0;a>_;_++)for(var y=0;d>y;y++){var x=u[_],w=u[_+1],k=f[y],C=f[y+1],S=$(w.x-x.x)<.001?"y":"x",j=$(C.x-k.x)<.001?"y":"x",T=g(x.x,x.y,w.x,w.y,k.x,k.y,C.x,C.y);if(T){if(m[T.x.toFixed(4)]==T.y.toFixed(4))continue;m[T.x.toFixed(4)]=T.y.toFixed(4);var P=x.t+$((T[S]-x[S])/(w[S]-x[S]))*(w.t-x.t),A=k.t+$((T[j]-k[j])/(C[j]-k[j]))*(C.t-k.t);P>=0&&1>=P&&A>=0&&1>=A&&(i?v++:v.push({x:T.x,y:T.y,t1:P,t2:A}))}}return v}function v(e,t){return b(e,t)}function _(e,t){return b(e,t,1)}function b(e,t,i){e=D(e),t=D(t);for(var n,r,s,o,a,l,c,d,h,u,p=i?0:[],f=0,g=e.length;g>f;f++){var v=e[f];if("M"==v[0])n=a=v[1],r=l=v[2];else{"C"==v[0]?(h=[n,r].concat(v.slice(1)),n=h[6],r=h[7]):(h=[n,r,n,r,a,l,a,l],n=a,r=l);for(var _=0,b=t.length;b>_;_++){var y=t[_];if("M"==y[0])s=c=y[1],o=d=y[2];else{"C"==y[0]?(u=[s,o].concat(y.slice(1)),s=u[6],o=u[7]):(u=[s,o,s,o,c,d,c,d],s=c,o=d);var x=m(h,u,i);if(i)p+=x;else{for(var w=0,k=x.length;k>w;w++)x[w].segment1=f,x[w].segment2=_,x[w].bez1=h,x[w].bez2=u;p=p.concat(x)}}}}}return p}function y(e,t,i){var n=x(e);return d(n,t,i)&&b(e,[["M",t,i],["H",n.x2+10]],1)%2==1}function x(e){var t=i(e);if(t.bbox)return N(t.bbox);if(!e)return n();e=D(e);for(var r,s=0,o=0,a=[],l=[],c=0,d=e.length;d>c;c++)if(r=e[c],"M"==r[0])s=r[1],o=r[2],a.push(s),l.push(o);else{var h=A(s,o,r[1],r[2],r[3],r[4],r[5],r[6]);a=a.concat(h.min.x,h.max.x),l=l.concat(h.min.y,h.max.y),s=r[5],o=r[6]}var u=B.apply(0,a),p=B.apply(0,l),f=z.apply(0,a),g=z.apply(0,l),m=n(u,p,f-u,g-p);return t.bbox=N(m),m}function w(e,t,i,n,s){if(s)return[["M",+e+ +s,t],["l",i-2*s,0],["a",s,s,0,0,1,s,s],["l",0,n-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-i,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-n],["a",s,s,0,0,1,s,-s],["z"]];var o=[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]];return o.toString=r,o}function k(e,t,i,n,s){if(null==s&&null==n&&(n=i),e=+e,t=+t,i=+i,n=+n,null!=s)var o=Math.PI/180,a=e+i*Math.cos(-n*o),l=e+i*Math.cos(-s*o),c=t+i*Math.sin(-n*o),d=t+i*Math.sin(-s*o),h=[["M",a,c],["A",i,i,0,+(s-n>180),0,l,d]];else h=[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]];return h.toString=r,h}function C(t){var n=i(t),o=String.prototype.toLowerCase;if(n.rel)return s(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var a=[],l=0,c=0,d=0,h=0,u=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],d=l,h=c,u++,a.push(["M",l,c]));for(var p=u,f=t.length;f>p;p++){var g=a[p]=[],m=t[p];if(m[0]!=o.call(m[0]))switch(g[0]=o.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":d=m[1],h=m[2];default:for(var v=1,_=m.length;_>v;v++)g[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{g=a[p]=[],"m"==m[0]&&(d=m[1]+l,h=m[2]+c);for(var b=0,y=m.length;y>b;b++)a[p][b]=m[b]}var x=a[p].length;switch(a[p][0]){case"z":l=d,c=h;break;case"h":l+=+a[p][x-1];break;case"v":c+=+a[p][x-1];break;default:l+=+a[p][x-2],c+=+a[p][x-1]}}return a.toString=r,n.rel=s(a),a}function S(t){var n=i(t);if(n.abs)return s(n.abs);if(O(t,"array")&&O(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var o,a=[],l=0,c=0,d=0,h=0,u=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],d=l,h=c,u++,a[0]=["M",l,c]);for(var p,f,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=u,v=t.length;v>m;m++){if(a.push(p=[]),f=t[m],o=f[0],o!=o.toUpperCase())switch(p[0]=o.toUpperCase(),p[0]){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+f[6]+l,p[7]=+f[7]+c;break;case"V":p[1]=+f[1]+c;break;case"H":p[1]=+f[1]+l;break;case"R":for(var _=[l,c].concat(f.slice(1)),b=2,y=_.length;y>b;b++)_[b]=+_[b]+l,_[++b]=+_[b]+c;a.pop(),a=a.concat(I(_,g));break;case"O":a.pop(),_=k(l,c,f[1],f[2]),_.push(_[0]),a=a.concat(_);break;case"U":a.pop(),a=a.concat(k(l,c,f[1],f[2],f[3])),p=["U"].concat(a[a.length-1].slice(-2));break;case"M":d=+f[1]+l,h=+f[2]+c;default:for(b=1,y=f.length;y>b;b++)p[b]=+f[b]+(b%2?l:c)}else if("R"==o)_=[l,c].concat(f.slice(1)),a.pop(),a=a.concat(I(_,g)),p=["R"].concat(f.slice(-2));else if("O"==o)a.pop(),_=k(l,c,f[1],f[2]),_.push(_[0]),a=a.concat(_);else if("U"==o)a.pop(),a=a.concat(k(l,c,f[1],f[2],f[3])),p=["U"].concat(a[a.length-1].slice(-2));else for(var x=0,w=f.length;w>x;x++)p[x]=f[x];if(o=o.toUpperCase(),"O"!=o)switch(p[0]){case"Z":l=+d,c=+h;break;case"H":l=p[1];break;case"V":c=p[1];break;case"M":d=p[p.length-2],h=p[p.length-1];default:l=p[p.length-2],c=p[p.length-1]}}return a.toString=r,n.abs=s(a),a}function j(e,t,i,n){return[e,t,i,n,i,n]}function T(e,t,i,n,r,s){var o=1/3,a=2/3;return[o*e+a*i,o*t+a*n,o*r+a*i,o*s+a*n,r,s]}function P(t,i,n,r,s,o,a,l,c,d){var h,u=120*W/180,p=W/180*(+s||0),f=[],g=e._.cacher(function(e,t,i){var n=e*R.cos(i)-t*R.sin(i),r=e*R.sin(i)+t*R.cos(i);return{x:n,y:r}});if(d)C=d[0],S=d[1],w=d[2],k=d[3];else{h=g(t,i,-p),t=h.x,i=h.y,h=g(l,c,-p),l=h.x,c=h.y;var m=(R.cos(W/180*s),R.sin(W/180*s),(t-l)/2),v=(i-c)/2,_=m*m/(n*n)+v*v/(r*r);_>1&&(_=R.sqrt(_),n=_*n,r=_*r);var b=n*n,y=r*r,x=(o==a?-1:1)*R.sqrt($((b*y-b*v*v-y*m*m)/(b*v*v+y*m*m))),w=x*n*v/r+(t+l)/2,k=x*-r*m/n+(i+c)/2,C=R.asin(((i-k)/r).toFixed(9)),S=R.asin(((c-k)/r).toFixed(9));C=w>t?W-C:C,S=w>l?W-S:S,0>C&&(C=2*W+C),0>S&&(S=2*W+S),a&&C>S&&(C-=2*W),!a&&S>C&&(S-=2*W)}var j=S-C;if($(j)>u){var T=S,A=l,D=c;S=C+u*(a&&S>C?1:-1),l=w+n*R.cos(S),c=k+r*R.sin(S),f=P(l,c,n,r,s,0,a,A,D,[S,T,w,k])}j=S-C;var M=R.cos(C),I=R.sin(C),E=R.cos(S),O=R.sin(S),N=R.tan(j/4),L=4/3*n*N,H=4/3*r*N,Y=[t,i],B=[t+L*I,i-H*M],z=[l+L*O,c-H*E],F=[l,c];if(B[0]=2*Y[0]-B[0],B[1]=2*Y[1]-B[1],d)return[B,z,F].concat(f);f=[B,z,F].concat(f).join().split(",");for(var X=[],U=0,q=f.length;q>U;U++)X[U]=U%2?g(f[U-1],f[U],p).y:g(f[U],f[U+1],p).x;return X}function A(e,t,i,n,r,s,o,a){for(var l,c,d,h,u,p,f,g,m=[],v=[[],[]],_=0;2>_;++_)if(0==_?(c=6*e-12*i+6*r,l=-3*e+9*i-9*r+3*o,d=3*i-3*e):(c=6*t-12*n+6*s,l=-3*t+9*n-9*s+3*a,d=3*n-3*t),$(l)<1e-12){if($(c)<1e-12)continue;h=-d/c,h>0&&1>h&&m.push(h)}else f=c*c-4*d*l,g=R.sqrt(f),0>f||(u=(-c+g)/(2*l),u>0&&1>u&&m.push(u),p=(-c-g)/(2*l),p>0&&1>p&&m.push(p));for(var b,y=m.length,x=y;y--;)h=m[y],b=1-h,v[0][y]=b*b*b*e+3*b*b*h*i+3*b*h*h*r+h*h*h*o,v[1][y]=b*b*b*t+3*b*b*h*n+3*b*h*h*s+h*h*h*a;return v[0][x]=e,v[1][x]=t,v[0][x+1]=o,v[1][x+1]=a,v[0].length=v[1].length=x+2,{min:{x:B.apply(0,v[0]),y:B.apply(0,v[1])},max:{x:z.apply(0,v[0]),y:z.apply(0,v[1])}}}function D(e,t){var n=!t&&i(e);if(!t&&n.curve)return s(n.curve);for(var r=S(e),o=t&&S(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t,i){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(P.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*t.x-t.bx,r=2*t.y-t.by):(n=t.x,r=t.y),e=["C",n,r].concat(e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(T(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(T(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(j(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(j(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(j(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(j(t.x,t.y,t.X,t.Y))}return e}),d=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)u[t]="A",o&&(p[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),v=z(r.length,o&&o.length||0)}},h=function(e,t,i,n,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],v=z(r.length,o&&o.length||0))},u=[],p=[],f="",g="",m=0,v=z(r.length,o&&o.length||0);v>m;m++){r[m]&&(f=r[m][0]),"C"!=f&&(u[m]=f,m&&(g=u[m-1])),r[m]=c(r[m],a,g),"A"!=u[m]&&"C"==f&&(u[m]="C"),d(r,m),o&&(o[m]&&(f=o[m][0]),"C"!=f&&(p[m]=f,m&&(g=p[m-1])),o[m]=c(o[m],l,g),"A"!=p[m]&&"C"==f&&(p[m]="C"),d(o,m)),h(r,o,a,l,m),h(o,r,l,a,m);var _=r[m],b=o&&o[m],y=_.length,x=o&&b.length;a.x=_[y-2],a.y=_[y-1],a.bx=Y(_[y-4])||a.x,a.by=Y(_[y-3])||a.y,l.bx=o&&(Y(b[x-4])||l.x),l.by=o&&(Y(b[x-3])||l.y),l.x=o&&b[x-2],l.y=o&&b[x-1]}return o||(n.curve=s(r)),o?[r,o]:r}function M(e,t){if(!t)return e;var i,n,r,s,o,a,l;for(e=D(e),r=0,o=e.length;o>r;r++)for(l=e[r],s=1,a=l.length;a>s;s+=2)i=t.x(l[s],l[s+1]),n=t.y(l[s],l[s+1]),l[s]=i,l[s+1]=n;return e}function I(e,t){for(var i=[],n=0,r=e.length;r-2*!t>n;n+=2){var s=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?r-4==n?s[3]={x:+e[0],y:+e[1]}:r-2==n&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[r-2],y:+e[r-1]}:r-4==n?s[3]=s[2]:n||(s[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return i}var E=t.prototype,O=e.is,N=e._.clone,L="hasOwnProperty",H=/,?([a-z]),?/gi,Y=parseFloat,R=Math,W=R.PI,B=R.min,z=R.max,F=R.pow,$=R.abs,X=a(1),U=a(),q=a(0,1),G=e._unit2px,K={path:function(e){return e.attr("path")},circle:function(e){var t=G(e);return k(t.cx,t.cy,t.r)},ellipse:function(e){var t=G(e);return k(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=G(e);return w(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=G(e);return w(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)}};e.path=i,e.path.getTotalLength=X,e.path.getPointAtLength=U,e.path.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return q(e,t).end;var n=q(e,i,1);return t?q(n,t).end:n},E.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},E.getPointAtLength=function(e){return U(this.attr("d"),e)},E.getSubpath=function(t,i){return e.path.getSubpath(this.attr("d"),t,i)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=d,e.closest=function(t,i,r,s){for(var o=100,a=n(t-o/2,i-o/2,o,o),l=[],c=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:s[e]}},h=0;1e6>=o&&!h;){for(var u=0,p=r.length;p>u;u++){var f=c(u);if(d(a,f.x,f.y)){h++,l.push(f);break}}h||(o*=2,a=n(t-o/2,i-o/2,o,o))}if(1e6!=o){var g,m=1/0;for(u=0,p=l.length;p>u;u++){var v=e.len(t,i,l[u].x,l[u].y);m>v&&(m=v,l[u].len=v,g=l[u])}return g}},e.path.isBBoxIntersect=h,e.path.intersection=v,e.path.intersectionNumber=_,e.path.isPointInside=y,e.path.getBBox=x,e.path.get=K,e.path.toRelative=C,e.path.toAbsolute=S,e.path.toCubic=D,e.path.map=M,e.path.toString=r,e.path.clone=s}),n.plugin(function(e){var n=Math.max,r=Math.min,s=function(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,i=e.length;i>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)
},o=s.prototype;o.push=function(){for(var e,t,i=0,n=arguments.length;n>i;i++)e=arguments[i],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},o.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},o.forEach=function(e,t){for(var i=0,n=this.items.length;n>i;i++)if(e.call(t,this.items[i],i)===!1)return this;return this},o.animate=function(n,r,s,o){"function"!=typeof s||s.length||(o=s,s=i.linear),n instanceof e._.Animation&&(o=n.callback,s=n.easing,r=s.dur,n=n.attr);var a=arguments;if(e.is(n,"array")&&e.is(a[a.length-1],"array"))var l=!0;var c,d=function(){c?this.b=c:c=this.b},h=0,u=this,p=o&&function(){++h==u.length&&o.call(this)};return this.forEach(function(e,i){t.once("snap.animcreated."+e.id,d),l?a[i]&&e.animate.apply(e,a[i]):e.animate(n,r,s,p)})},o.remove=function(){for(;this.length;)this.pop().remove();return this},o.bind=function(e,t,i){var n={};if("function"==typeof t)this.bindings[e]=t;else{var r=i||e;this.bindings[e]=function(e){n[r]=e,t.attr(n)}}return this},o.attr=function(e){var t={};for(var i in e)this.bindings[i]?this.bindings[i](e[i]):t[i]=e[i];for(var n=0,r=this.items.length;r>n;n++)this.items[n].attr(t);return this},o.clear=function(){for(;this.length;)this.pop()},o.splice=function(e,t){e=0>e?n(this.length+e,0):e,t=n(0,r(this.length-e,t));var i,o=[],a=[],l=[];for(i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;t>i;i++)a.push(this[e+i]);for(;i<this.length-e;i++)o.push(this[e+i]);var c=l.length;for(i=0;i<c+o.length;i++)this.items[e+i]=this[e+i]=c>i?l[i]:o[i-c];for(i=this.items.length=this.length-=t-c;this[i];)delete this[i++];return new s(a)},o.exclude=function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},o.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},o.getBBox=function(){for(var e=[],t=[],i=[],s=[],o=this.items.length;o--;)if(!this.items[o].removed){var a=this.items[o].getBBox();e.push(a.x),t.push(a.y),i.push(a.x+a.width),s.push(a.y+a.height)}return e=r.apply(0,e),t=r.apply(0,t),i=n.apply(0,i),s=n.apply(0,s),{x:e,y:t,x2:i,y2:s,width:i-e,height:s-t,cx:e+(i-e)/2,cy:t+(s-t)/2}},o.clone=function(e){e=new s;for(var t=0,i=this.items.length;i>t;t++)e.push(this.items[t].clone());return e},o.toString=function(){return"Snaps set"},o.type="set",e.Set=s,e.set=function(){var e=new s;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,i){function n(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function r(t,i,r){i=g(i).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],i=e.parseTransformString(i)||[];for(var s,o,a,l,h=Math.max(t.length,i.length),u=[],p=[],f=0;h>f;f++){if(a=t[f]||n(i[f]),l=i[f]||n(a),a[0]!=l[0]||"r"==a[0].toLowerCase()&&(a[2]!=l[2]||a[3]!=l[3])||"s"==a[0].toLowerCase()&&(a[3]!=l[3]||a[4]!=l[4])){t=e._.transform2matrix(t,r()),i=e._.transform2matrix(i,r()),u=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],p=[["m",i.a,i.b,i.c,i.d,i.e,i.f]];break}for(u[f]=[],p[f]=[],s=0,o=Math.max(a.length,l.length);o>s;s++)s in a&&(u[f][s]=a[s]),s in l&&(p[f][s]=l[s])}return{from:d(u),to:d(p),f:c(u)}}function s(e){return e}function o(e){return function(t){return+t.toFixed(3)+e}}function a(e){return e.join(" ")}function l(t){return e.rgb(t[0],t[1],t[2])}function c(e){var t,i,n,r,s,o,a=0,l=[];for(t=0,i=e.length;i>t;t++){for(s="[",o=['"'+e[t][0]+'"'],n=1,r=e[t].length;r>n;n++)o[n]="val["+a++ +"]";s+=o+"]",l[t]=s}return Function("val","return Snap.path.toString.call(["+l+"])")}function d(e){for(var t=[],i=0,n=e.length;n>i;i++)for(var r=1,s=e[i].length;s>r;r++)t.push(e[i][r]);return t}function h(e){return isFinite(parseFloat(e))}function u(t,i){return e.is(t,"array")&&e.is(i,"array")?t.toString()==i.toString():!1}var p={},f=/[a-z]+$/i,g=String;p.stroke=p.fill="colour",i.prototype.equal=function(e,i){return t("snap.util.equal",this,e,i).firstDefined()},t.on("snap.util.equal",function(t,i){var n,m,v=g(this.attr(t)||""),_=this;if(h(v)&&h(i))return{from:parseFloat(v),to:parseFloat(i),f:s};if("colour"==p[t])return n=e.color(v),m=e.color(i),{from:[n.r,n.g,n.b,n.opacity],to:[m.r,m.g,m.b,m.opacity],f:l};if("viewBox"==t)return n=this.attr(t).vb.split(" ").map(Number),m=i.split(" ").map(Number),{from:n,to:m,f:a};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return i instanceof e.Matrix&&(i=i.toTransformString()),e._.rgTransform.test(i)||(i=e._.svgTransform2string(i)),r(v,i,function(){return _.getBBox(1)});if("d"==t||"path"==t)return n=e.path.toCubic(v,i),{from:d(n[0]),to:d(n[1]),f:c(n[0])};if("points"==t)return n=g(v).split(e._.separator),m=g(i).split(e._.separator),{from:n,to:m,f:function(e){return e}};var b=v.match(f),y=g(i).match(f);return b&&u(b,y)?{from:parseFloat(v),to:parseFloat(i),f:o(b)}:{from:this.asPX(t),to:this.asPX(t,i),f:s}})}),n.plugin(function(e,i,n,r){for(var s=i.prototype,o="hasOwnProperty",a=("createTouch"in r.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=(function(e,t){var i="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:r.doc;return n[i in n.documentElement?"documentElement":"body"][i]}),h=function(){return this.originalEvent.preventDefault()},u=function(){return this.originalEvent.stopPropagation()},p=function(e,t,i,n){var r=a&&c[t]?c[t]:t,s=function(r){var s=d("y",n),l=d("x",n);if(a&&c[o](t))for(var p=0,f=r.targetTouches&&r.targetTouches.length;f>p;p++)if(r.targetTouches[p].target==e||e.contains(r.targetTouches[p].target)){var g=r;r=r.targetTouches[p],r.originalEvent=g,r.preventDefault=h,r.stopPropagation=u;break}var m=r.clientX+l,v=r.clientY+s;return i.call(n,r,m,v)};return t!==r&&e.addEventListener(t,s,!1),e.addEventListener(r,s,!1),function(){return t!==r&&e.removeEventListener(t,s,!1),e.removeEventListener(r,s,!1),!0}},f=[],g=function(e){for(var i,n=e.clientX,r=e.clientY,s=d("y"),o=d("x"),l=f.length;l--;){if(i=f[l],a){for(var c,h=e.touches&&e.touches.length;h--;)if(c=e.touches[h],c.identifier==i.el._drag.id||i.el.node.contains(c.target)){n=c.clientX,r=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();{var u=i.el.node;u.nextSibling,u.parentNode,u.style.display}n+=o,r+=s,t("snap.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,r-i.el._drag.y,n,r,e)}},m=function(i){e.unmousemove(g).unmouseup(m);for(var n,r=f.length;r--;)n=f[r],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,i),t.off("snap.drag.*."+n.el.id);f=[]},v=l.length;v--;)!function(t){e[t]=s[t]=function(i,n){if(e.is(i,"function"))this.events=this.events||[],this.events.push({name:t,f:i,unbind:p(this.node||document,t,i,n||this)});else for(var r=0,s=this.events.length;s>r;r++)if(this.events[r].name==t)try{this.events[r].f.call(this)}catch(o){}return this},e["un"+t]=s["un"+t]=function(e){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==t&&(i[n].f==e||!e))return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}}(l[v]);s.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)},s.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var _=[];s.drag=function(i,n,r,s,o,a){function l(l,c,h){(l.originalEvent||l).preventDefault(),d._drag.x=c,d._drag.y=h,d._drag.id=l.identifier,!f.length&&e.mousemove(g).mouseup(m),f.push({el:d,move_scope:s,start_scope:o,end_scope:a}),n&&t.on("snap.drag.start."+d.id,n),i&&t.on("snap.drag.move."+d.id,i),r&&t.on("snap.drag.end."+d.id,r),t("snap.drag.start."+d.id,o||s||d,c,h,l)}function c(e,i,n){t("snap.draginit."+d.id,d,e,i,n)}var d=this;if(!arguments.length){var h;return d.drag(function(e,t){this.attr({transform:h+(h?"T":"t")+[e,t]})},function(){h=this.transform().local})}return t.on("snap.draginit."+d.id,l),d._drag={},_.push({el:d,start:l,init:c}),d.mousedown(c),d},s.undrag=function(){for(var i=_.length;i--;)_[i].el==this&&(this.unmousedown(_[i].init),_.splice(i,1),t.unbind("snap.drag.*."+this.id),t.unbind("snap.draginit."+this.id));return!_.length&&e.unmousemove(g).unmouseup(m),this}}),n.plugin(function(e,i,n){var r=(i.prototype,n.prototype),s=/^\s*url\((.+)\)/,o=String,a=e._.$;e.filter={},r.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var r=e.parse(o(t)),s=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,a("filter"));return a(l,{id:s,filterUnits:"userSpaceOnUse"}),l.appendChild(r.node),n.defs.appendChild(l),new i(l)},t.on("snap.util.getattr.filter",function(){t.stop();var i=a(this.node,"filter");if(i){var n=o(i).match(s);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof i&&"filter"==n.type){t.stop();var r=n.node.id;r||(a(n.node,{id:n.id}),r=n.id),a(this.node,{filter:e.url(r)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,i){null==t&&(t=2);var n=null==i?t:[t,i];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,i,n,r,s){return"string"==typeof n&&(r=n,s=r,n=4),"string"!=typeof r&&(s=r,r="#000"),r=r||"#000",null==n&&(n=4),null==s&&(s=1),null==t&&(t=0,i=2),null==i&&(i=t),r=e.color(r),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:t,dy:i,blur:n,opacity:s})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n.plugin(function(e,t){var i=e._.box,n=e.is,r=/^[^a-z]*([tbmlrc])/i,s=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(e,t){null==t&&n(e,"string")&&(t=e,e=null),e=e||this.paper;var o=e.getBBox?e.getBBox():i(e),a=this.getBBox(),l={};switch(t=t&&t.match(r),t=t?t[1].toLowerCase():"c"){case"t":l.dx=0,l.dy=o.y-a.y;break;case"b":l.dx=0,l.dy=o.y2-a.y2;break;case"m":l.dx=0,l.dy=o.cy-a.cy;break;case"l":l.dx=o.x-a.x,l.dy=0;break;case"r":l.dx=o.x2-a.x2,l.dy=0;break;default:l.dx=o.cx-a.cx,l.dy=0}return l.toString=s,l},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),n}),function(e){var t=!1;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var i=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=i,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(i){function n(t,r,s){var o;if("undefined"!=typeof document){if(arguments.length>1){if(s=e({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(l){}return r=i.write?i.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var u=c[h].split("="),p=u.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var f=u[0].replace(d,decodeURIComponent);if(p=i.read?i.read(p,f):i(p,f)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(l){}if(t===f){o=p;break}t||(o[f]=p)}catch(l){}}return o}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}return t(function(){})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";if(!e.jstree){var i=0,n=!1,r=!1,s=!1,o=[],a=e("script:last").attr("src"),l=window.document;e.jstree={version:"3.3.3",defaults:{plugins:[]},plugins:{},path:a&&-1!==a.indexOf("/")?a.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,n){var r=new e.jstree.core(++i),s=n;return n=e.extend(!0,{},e.jstree.defaults,n),s&&s.plugins&&(n.plugins=s.plugins),e.each(n.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,n[t]))}),e(t).data("jstree",r),r.init(t,n),r},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(l).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,n=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!n||!n.length)try{n=e(t)}catch(r){}if(!n||!n.length)try{n=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(r){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:e(".jstree").each(function(){var n=e(this).data("jstree");return n&&n._model.data[t]?(i=n,!1):void 0}),i},e.fn.jstree=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),s=null;return i!==!0||this.length?(this.each(function(){var o=e.jstree.reference(this),a=n&&o?o[i]:null;return s=n&&a?a.apply(o,r):null,o||n||i!==t&&!e.isPlainObject(i)||e.jstree.create(this,i),(o&&!n||i===!0)&&(s=o||!1),null!==s&&s!==t?!1:void 0}),null!==s&&s!==t?s:this):!1},e.expr.pseudos.jstree=e.expr.createPseudo(function(){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var n=e.jstree.plugins[t];return n?(this._data[t]={},n.prototype=this,new n(i,this)):this},init:function(t,i){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=l.createElement("LI");return i.setAttribute("role","treeitem"),e=l.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),e=l.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=l.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,n=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(l.selection&&l.selection.empty)l.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(i){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return e.target.tagName&&"input"===e.target.tagName.toLowerCase()?!0:void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==l.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&i.id!==e.jstree.root&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&(i.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,n=[];for(t=0,i=this._data.core.selected.length;i>t;t++)n=n.concat(this._model.data[this._data.core.selected[t]].parents);for(n=e.vakata.array_unique(n),t=0,i=n.length;i>t;t++)this.open_node(n[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(n){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var r=String.fromCharCode(n.which).toLowerCase(),s=this.element.find(".jstree-anchor").filter(":visible"),o=s.index(l.activeElement)||0,a=!1;if(t+=r,t.length>1){if(s.slice(o).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return;if(s.slice(0,o).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),a=!0,!1):void 0},this)),a)return}if(new RegExp("^"+r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(s.slice(o+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===r?(e(i).focus(),a=!0,!1):void 0},this)),a)return;if(s.slice(0,o+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===r?(e(i).focus(),a=!0,!1):void 0},this)),a)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-n>500&&!this._data.core.focused){n=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(l).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var n;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(n=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=e(t,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=e(t,this.element)).length||!n.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return i&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(r){return!1}},get_path:function(t,i,n){if(t=t.parents?t:this.get_node(t),!t||t.id===e.jstree.root||!t.parents)return!1;var r,s,o=[];for(o.push(n?t.id:t.text),r=0,s=t.parents.length;s>r;r++)o.push(n?t.parents[r]:this.get_text(t.parents[r]));return o=o.reverse().slice(1),i?o.join(i):o},get_next_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}if(t.hasClass("jstree-open")){for(n=this._firstChild(t.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return e(n)}n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?e(n):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(t=e(n);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return n=t[0].parentNode.parentNode,n&&n.className&&-1!==n.className.indexOf("jstree-node")?e(n):!1},get_parent:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.parent:!1},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):e&&e.length?e.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var n,r,s,o,a;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,s=0,o=t.parents.length;o>s;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(i){return-1===e.inArray(i,t.children_d)});for(n=0,r=t.children_d.length;r>n;n++)this._model.data[t.children_d[n]].state.selected&&(a=!0),delete this._model.data[t.children_d[n]];a&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(i){return-1===e.inArray(i,t.children_d)})),t.children=[],t.children_d=[],a&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var n=this.get_node(t,!0),r=0,s=0,o=this._model.data,a=!1;for(r=0,s=t.children.length;s>r;r++)if(o[t.children[r]]&&!o[t.children[r]].state.hidden){a=!0;break}t.state.loaded&&n&&n.length&&(n.removeClass("jstree-closed jstree-open jstree-leaf"),a?"#"!==t.id&&n.addClass(t.state.opened?"jstree-open":"jstree-closed"):n.addClass("jstree-leaf")),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i,n){var r,s,o=!0,a=function(){this._load_nodes(e,t,!0)},l=this._model.data,c=[];for(r=0,s=e.length;s>r;r++)l[e[r]]&&(!l[e[r]].state.loaded&&!l[e[r]].state.failed||!i&&n)&&(this.is_loading(e[r])||this.load_node(e[r],a),o=!1);if(o){for(r=0,s=e.length;s>r;r++)l[e[r]]&&l[e[r]].state.loaded&&c.push(e[r]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,r,s=[],o=this._model.data,a=o[t.id].children_d;for(t.state&&!t.state.loaded&&s.push(t.id),n=0,r=a.length;r>n;n++)o[a[n]]&&o[a[n]].state&&!o[a[n]].state.loaded&&s.push(a[n]);s.length?this._load_nodes(s,function(){this.load_all(t,i)}):(i&&i.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,i){var n,r=this.settings.core.data,s=function(){return 3!==this.nodeType&&8!==this.nodeType};return r?e.isFunction(r)?r.call(this,t,e.proxy(function(n){n===!1?i.call(this,!1):this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(e.parseHTML(n)).filter(s):n,function(e){i.call(this,e)})},this)):"object"==typeof r?r.url?(r=e.extend(!0,{},r),e.isFunction(r.url)&&(r.url=r.url.call(this,t)),e.isFunction(r.data)&&(r.data=r.data.call(this,t)),e.ajax(r).done(e.proxy(function(n,r,o){var a=o.getResponseHeader("Content-Type");return a&&-1!==a.indexOf("json")||"object"==typeof n?this._append_json_data(t,n,function(e){i.call(this,e)}):a&&-1!==a.indexOf("html")||"string"==typeof n?this._append_html_data(t,e(e.parseHTML(n)).filter(s),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:o})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)
},this))):(n=e.isArray(r)||e.isPlainObject(r)?JSON.parse(JSON.stringify(r)):r,t.id===e.jstree.root?this._append_json_data(t,n,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof r?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(r)).filter(s),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,n){t=this.get_node(t),t.children=[],t.children_d=[];var r,s,o,a=i.is("ul")?i.children():i,l=t.id,c=[],d=[],h=this._model.data,u=h[l],p=this._data.core.selected.length;for(a.each(e.proxy(function(t,i){r=this._parse_model_from_html(e(i),l,u.parents.concat()),r&&(c.push(r),d.push(r),h[r].children_d.length&&(d=d.concat(h[r].children_d)))},this)),u.children=c,u.children_d=d,s=0,o=u.parents.length;o>s;s++)h[u.parents[s]].children_d=h[u.parents[s]].children_d.concat(d);this.trigger("model",{nodes:d,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==p&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(t,i,n,r){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var s=null,o={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},a=function(e,t){e.data&&(e=e.data);var i,n,r,s,o=e.dat,a=e.par,l=[],c=[],d=[],h=e.df,u=e.t_id,p=e.t_cnt,f=e.m,g=f[a],m=e.sel,v=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l=e.id.toString(),c={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in h)h.hasOwnProperty(r)&&(c.state[r]=h[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),(c.icon===t||null===c.icon||""===c.icon)&&(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(c.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(c.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(c.li_attr[r]=e.li_attr[r]);if(c.li_attr.id||(c.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(c.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),f[c.id]=c,r=0,s=c.children.length;s>r;r++)o=v(f[c.children[r]],c.id,n),a=f[o],c.children_d.push(o),a.children_d.length&&(c.children_d=c.children_d.concat(a.children_d));return delete e.data,delete e.children,f[c.id].original=e,c.state.selected&&d.push(c.id),c.id},_=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l,c=!1;do c="j"+u+"_"+ ++p;while(f[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in h)h.hasOwnProperty(r)&&(l.state[r]=h[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,s=e.children.length;s>r;r++)o=_(e.children[r],l.id,n),a=f[o],l.children.push(o),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,f[l.id]=l,l.state.selected&&d.push(l.id),l.id};if(o.length&&o[0].id!==t&&o[0].parent!==t){for(n=0,r=o.length;r>n;n++)o[n].children||(o[n].children=[]),f[o[n].id.toString()]=o[n];for(n=0,r=o.length;r>n;n++)f[o[n].parent.toString()].children.push(o[n].id.toString()),g.children_d.push(o[n].id.toString());for(n=0,r=g.children.length;r>n;n++)i=v(f[g.children[n]],a,g.parents.concat()),c.push(i),f[i].children_d.length&&(c=c.concat(f[i].children_d));for(n=0,r=g.parents.length;r>n;n++)f[g.parents[n]].children_d=f[g.parents[n]].children_d.concat(c);s={cnt:p,mod:f,sel:m,par:a,dpc:c,add:d}}else{for(n=0,r=o.length;r>n;n++)i=_(o[n],a,g.parents.concat()),i&&(l.push(i),c.push(i),f[i].children_d.length&&(c=c.concat(f[i].children_d)));for(g.children=l,g.children_d=c,n=0,r=g.parents.length;r>n;n++)f[g.parents[n]].children_d=f[g.parents[n]].children_d.concat(c);s={cnt:p,mod:f,sel:m,par:a,dpc:c,add:d}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?s:void postMessage(s)},l=function(t,i){if(null!==this.element){this._cnt=t.cnt;var r,s=this._model.data;for(r in s)s.hasOwnProperty(r)&&s[r].state&&s[r].state.loading&&t.mod[r]&&(t.mod[r].state.loading=!0);if(this._model.data=t.mod,i){var o,a=t.add,l=t.sel,c=this._data.core.selected.slice();if(s=this._model.data,l.length!==c.length||e.vakata.array_unique(l.concat(c)).length!==l.length){for(r=0,o=l.length;o>r;r++)-1===e.inArray(l[r],a)&&-1===e.inArray(l[r],c)&&(s[l[r]].state.selected=!1);for(r=0,o=c.length;o>r;r++)-1===e.inArray(c[r],l)&&(s[c[r]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||r?(this._data.core.working=!0,s=new window.Worker(this._wrk),s.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{s.terminate(),s=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),o.par?s.postMessage(o):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,n,!0])}catch(c){l.call(this,a(o),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,a(o),!1)}},_parse_model_from_html:function(i,n,r){r=r?[].concat(r):[],n&&r.unshift(n);var s,o,a,l,c,d=this._model.data,h={id:!1,text:!1,icon:!0,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in this._model.default_state)this._model.default_state.hasOwnProperty(a)&&(h.state[a]=this._model.default_state[a]);if(l=e.vakata.attributes(i,!0),e.each(l,function(t,i){return i=e.trim(i),i.length?(h.li_attr[t]=i,void("id"===t&&(h.id=i.toString()))):!0}),l=i.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,i){i=e.trim(i),i.length&&(h.a_attr[t]=i)})),l=i.children("a").first().length?i.children("a").first().clone():i.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),h.text=this.settings.core.force_text?l.text():l.html(),l=i.data(),h.data=l?e.extend(!0,{},l):null,h.state.opened=i.hasClass("jstree-open"),h.state.selected=i.children("a").hasClass("jstree-clicked"),h.state.disabled=i.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(a in h.data.jstree)h.data.jstree.hasOwnProperty(a)&&(h.state[a]=h.data.jstree[a]);l=i.children("a").children(".jstree-themeicon"),l.length&&(h.icon=l.hasClass("jstree-themeicon-hidden")?!1:l.attr("rel")),h.state.icon!==t&&(h.icon=h.state.icon),(h.icon===t||null===h.icon||""===h.icon)&&(h.icon=!0),l=i.children("ul").children("li");do c="j"+this._id+"_"+ ++this._cnt;while(d[c]);return h.id=h.li_attr.id?h.li_attr.id.toString():c,l.length?(l.each(e.proxy(function(t,i){s=this._parse_model_from_html(e(i),h.id,r),o=this._model.data[s],h.children.push(s),o.children_d.length&&(h.children_d=h.children_d.concat(o.children_d))},this)),h.children_d=h.children_d.concat(h.children)):i.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr["class"]&&(h.li_attr["class"]=h.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),h.a_attr["class"]&&(h.a_attr["class"]=h.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),d[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l=e.id.toString(),c=this._model.data,d=this._model.default_state,h={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in d)d.hasOwnProperty(r)&&(h.state[r]=d[r]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),(h.icon===t||null===h.icon||""===h.icon)&&(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(h.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(h.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(h.li_attr[r]=e.li_attr[r]);if(h.li_attr.id||(h.li_attr.id=l),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(h.a_attr[r]=e.a_attr[r]);for(e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),c[h.id]=h,r=0,s=h.children.length;s>r;r++)o=this._parse_model_from_flat_json(c[h.children[r]],h.id,n),a=c[o],h.children_d.push(o),a.children_d.length&&(h.children_d=h.children_d.concat(a.children_d));return delete e.data,delete e.children,c[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var r,s,o,a,l,c=!1,d=this._model.data,h=this._model.default_state;do c="j"+this._id+"_"+ ++this._cnt;while(d[c]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in h)h.hasOwnProperty(r)&&(l.state[r]=h[r]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(r in e.data.jstree)e.data.jstree.hasOwnProperty(r)&&(l.state[r]=e.data.jstree[r]);if(e&&"object"==typeof e.state)for(r in e.state)e.state.hasOwnProperty(r)&&(l.state[r]=e.state[r]);if(e&&"object"==typeof e.li_attr)for(r in e.li_attr)e.li_attr.hasOwnProperty(r)&&(l.li_attr[r]=e.li_attr[r]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=c),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(r in e.a_attr)e.a_attr.hasOwnProperty(r)&&(l.a_attr[r]=e.a_attr[r]);if(e&&e.children&&e.children.length){for(r=0,s=e.children.length;s>r;r++)o=this._parse_model_from_json(e.children[r],l.id,n),a=d[o],l.children.push(o),a.children_d.length&&(l.children_d=l.children_d.concat(a.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,d[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,i,n,r=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),s=l.createElement("UL"),o=this._data.core.focused;for(i=0,n=r.length;n>i;i++)t=this.redraw_node(r[i],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&s.appendChild(t);this._model.force_full_redraw&&(s.className=this.get_container_ul()[0].className,s.setAttribute("role","group"),this.element.empty().append(s)),null!==o&&(t=this.get_node(o,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==l.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:r})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var i=this.get_node(t),n=!1,r=!1,s=!1,o=l;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],i.children.length&&i.state.loaded){for(s=o.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",n=0,r=i.children.length;r>n;n++)s.appendChild(this.redraw_node(i.children[n],!0,!0));t.appendChild(s)}},redraw_node:function(t,i,n,r){var s=this.get_node(t),o=!1,a=!1,c=!1,d=!1,h=!1,u=!1,p="",f=l,g=this._model.data,m=!1,v=null,_=0,b=0,y=!1,x=!1;if(!s)return!1;if(s.id===e.jstree.root)return this.redraw(!0);if(i=i||0===s.children.length,t=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(e.jstree.idregex,"\\$&"):s.id.replace(e.jstree.idregex,"\\$&"))):l.getElementById(s.id))t=e(t),n||(o=t.parent().parent()[0],o===this.element[0]&&(o=null),a=t.index()),i||!s.children.length||t.children(".jstree-children").length||(i=!0),i||(c=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===l.activeElement,t.remove();else if(i=!0,!n){if(o=s.parent!==e.jstree.root?e("#"+s.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===o||o&&g[s.parent].state.opened))return!1;a=e.inArray(s.id,null===o?g[e.jstree.root].children:g[s.parent].children)}t=this._data.core.node.cloneNode(!0),p="jstree-node ";for(d in s.li_attr)if(s.li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"!==d?t.setAttribute(d,s.li_attr[d]):p+=s.li_attr[d]}for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),t.setAttribute("aria-selected",!!s.state.selected),t.setAttribute("aria-level",s.parents.length),t.setAttribute("aria-labelledby",s.a_attr.id),s.state.disabled&&t.setAttribute("aria-disabled",!0),d=0,h=s.children.length;h>d;d++)if(!g[s.children[d]].state.hidden){y=!0;break}if(null!==s.parent&&g[s.parent]&&!s.state.hidden&&(d=e.inArray(s.id,g[s.parent].children),x=s.id,-1!==d))for(d++,h=g[s.parent].children.length;h>d&&(g[g[s.parent].children[d]].state.hidden||(x=g[s.parent].children[d]),x===s.id);d++);s.state.hidden&&(p+=" jstree-hidden"),s.state.loaded&&!y?p+=" jstree-leaf":(p+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),x===s.id&&(p+=" jstree-last"),t.id=s.id,t.className=p,p=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":"");for(h in s.a_attr)if(s.a_attr.hasOwnProperty(h)){if("href"===h&&"#"===s.a_attr[h])continue;"class"!==h?t.childNodes[1].setAttribute(h,s.a_attr[h]):p+=" "+s.a_attr[h]}if(p.length&&(t.childNodes[1].className="jstree-anchor "+p),(s.icon&&s.icon!==!0||s.icon===!1)&&(s.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(f.createTextNode(s.text)):t.childNodes[1].innerHTML+=s.text,i&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for(u=f.createElement("UL"),u.setAttribute("role","group"),u.className="jstree-children",d=0,h=s.children.length;h>d;d++)u.appendChild(this.redraw_node(s.children[d],i,!0));t.appendChild(u)}if(c&&t.appendChild(c),!n){for(o||(o=this.element[0]),d=0,h=o.childNodes.length;h>d;d++)if(o.childNodes[d]&&o.childNodes[d].className&&-1!==o.childNodes[d].className.indexOf("jstree-children")){v=o.childNodes[d];break}v||(v=f.createElement("UL"),v.setAttribute("role","group"),v.className="jstree-children",o.appendChild(v)),o=v,a<o.childNodes.length?o.insertBefore(t,o.childNodes[a]):o.appendChild(t),m&&(_=this.element[0].scrollTop,b=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=_,this.element[0].scrollLeft=b)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(s.id,!1,0)},this),0)),t},open_node:function(i,n,r){var s,o,a,l;if(e.isArray(i)){for(i=i.slice(),s=0,o=i.length;o>s;s++)this.open_node(i[s],n,r);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(r=r===t?this.settings.core.animation:r,this.is_closed(i)?this.is_loaded(i)?(a=this.get_node(i,!0),l=this,a.length&&(r&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(i),r?(this.trigger("before_open",{node:i}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",l.element&&l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),a.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),r&&a.length||this.trigger("after_open",{node:i}),!0):this.is_loading(i)?setTimeout(e.proxy(function(){this.open_node(i,n,r)},this),500):void this.load_node(i,function(e,t){return t?this.open_node(e,n,r):n?n.call(this,e,!1):!1}):(n&&n.call(this,i,!1),!1)):!1},_open_to:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i,n,r=t.parents;for(i=0,n=r.length;n>i;i+=1)i!==e.jstree.root&&this.open_node(r[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var r,s,o,a;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.close_node(i[r],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?this.is_closed(i)?!1:(n=n===t?this.settings.core.animation:n,o=this,a=this.get_node(i,!0),i.state.opened=!1,this.trigger("close_node",{node:i}),void(a.length?n?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",a.children(".jstree-children").remove(),o.element&&o.trigger("after_close",{node:i})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:i})):this.trigger("after_close",{node:i}))):!1},toggle_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,i,n){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var r,s,o,a=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!a.length){for(r=0,s=t.children_d.length;s>r;r++)this.is_closed(this._model.data[t.children_d[r]])&&(this._model.data[t.children_d[r]].state.opened=!0);return this.trigger("open_all",{node:t})}n=n||a,o=this,a=this.is_closed(t)?a.find(".jstree-closed").addBack():a.find(".jstree-closed"),a.each(function(){o.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,n)},i||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,r,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),o=this;for(s.length&&(s=this.is_open(t)?s.find(".jstree-open").addBack():s.find(".jstree-open"),e(s.get().reverse()).each(function(){o.close_node(this,i||0)})),n=0,r=t.children_d.length;r>n;n++)this._model.data[t.children_d[n]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t})):!1},disable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t})):!1},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),i||this.redraw(),this.trigger("hide_node",{node:t}))):!1},show_node:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),i||this.redraw(),this.trigger("show_node",{node:t}))):!1},hide_all:function(t){var i,n=this._model.data,r=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&!n[i].state.hidden&&(n[i].state.hidden=!0,r.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(t){var i,n=this._model.data,r=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&n[i].state.hidden&&(n[i].state.hidden=!1,r.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(i&&"object"==typeof i||(i={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,r,s=this.get_node(e).id,o=this._data.core.last_clicked.id,a=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,r=a.length;r>n;n+=1)a[n]===s&&(l=!l),a[n]===o&&(l=!l),this.is_disabled(a[n])||!l&&a[n]!==s&&a[n]!==o?this.deselect_node(a[n],!0,i):this.is_hidden(a[n])||this.select_node(a[n],!0,!1,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:i})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),e&&e.length&&e.children(".jstree-hovered").length?(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)})):!1},select_node:function(t,i,n,r){var s,o,a;if(e.isArray(t)){for(t=t.slice(),o=0,a=t.length;a>o;o++)this.select_node(t[o],i,n,r);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),n||(s=this._open_to(t)),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:r}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:r})))):!1},deselect_node:function(t,i,n){var r,s,o;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;s>r;r++)this.deselect_node(t[r],i,n);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(o=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:n})))):!1},select_all:function(t){var i,n,r=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),i=0,n=this._data.core.selected.length;n>i;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:r})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.selected:!1},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,n,r,s,o=this.get_selected(!0),a={};for(i=0,n=o.length;n>i;i++)a[o[i].id]=o[i];for(i=0,n=o.length;n>i;i++)for(r=0,s=o[i].children_d.length;s>r;r++)a[o[i].children_d[r]]&&delete a[o[i].children_d[r]];o=[];for(i in a)a.hasOwnProperty(i)&&o.push(i);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},get_bottom_selected:function(t){var i,n,r=this.get_selected(!0),s=[];for(i=0,n=r.length;n>i;i++)r[i].children.length||s.push(r[i].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},get_state:function(){var t,i={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&i.core.open.push(t),this._model.data[t].state.selected&&i.core.selected.push(t));return i},set_state:function(i,n){if(i){if(i.core){var r,s;if(i.core.open)return e.isArray(i.core.open)&&i.core.open.length?this._load_nodes(i.core.open,function(e){this.open_node(e,!1,0),delete i.core.open,this.set_state(i,n)}):(delete i.core.open,this.set_state(i,n)),!1;if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;if(i.core.selected)return r=this,this.deselect_all(),e.each(i.core.selected,function(e,t){r.select_node(t,!1,!0)}),delete i.core.selected,this.set_state(i,n),!1;for(s in i)i.hasOwnProperty(s)&&"core"!==s&&-1===e.inArray(s,this.settings.plugins)&&delete i[s];if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return e.isEmptyObject(i)?(i=null,n&&n.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var n=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i=[],n=[],r=this._data.core.selected.concat([]);n.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){n.push(this.id),i.push(this.id)}),this._load_nodes(n,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,i){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var n,r,s=this._model.data,o=t.id;for(i=i.toString(),s[t.parent].children[e.inArray(t.id,s[t.parent].children)]=i,n=0,r=t.parents.length;r>n;n++)s[t.parents[n]].children_d[e.inArray(t.id,s[t.parents[n]].children_d)]=i;for(n=0,r=t.children.length;r>n;n++)s[t.children[n]].parent=i;for(n=0,r=t.children_d.length;r>n;n++)s[t.children_d[n]].parents[e.inArray(t.id,s[t.children_d[n]].parents)]=i;
return n=e.inArray(t.id,this._data.core.selected),-1!==n&&(this._data.core.selected[n]=i),n=this.get_node(t.id,!0),n&&(n.attr("id",i),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",i)),delete s[t.id],t.id=i,t.li_attr.id=i,s[i]=t,this.trigger("set_id",{node:t,"new":t.id,old:o}),!0},get_text:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.text:!1},set_text:function(t,i){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.set_text(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0):!1},get_json:function(t,i,n){if(t=this.get_node(t||e.jstree.root),!t)return!1;i&&i.flat&&!n&&(n=[]);var r,s,o={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:e.extend(!0,{},t.data)};if(i&&i.flat?o.parent=t.parent:o.children=[],i&&i.no_state)delete o.state;else for(r in t.state)t.state.hasOwnProperty(r)&&(o.state[r]=t.state[r]);if(i&&i.no_li_attr&&delete o.li_attr,i&&i.no_a_attr&&delete o.a_attr,i&&i.no_id&&(delete o.id,o.li_attr&&o.li_attr.id&&delete o.li_attr.id,o.a_attr&&o.a_attr.id&&delete o.a_attr.id),i&&i.flat&&t.id!==e.jstree.root&&n.push(o),!i||!i.no_children)for(r=0,s=t.children.length;s>r;r++)i&&i.flat?this.get_json(t.children[r],i,n):o.children.push(this.get_json(t.children[r],i));return i&&i.flat?n:t.id===e.jstree.root?o.children:o},create_node:function(i,n,r,s,o){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return!1;if(r=r===t?"last":r,!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,r,s,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===t&&(n.text=this.get_string("New node"));var a,l,c,d;switch(i.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":a=this.get_node(i.parent),r=e.inArray(i.id,a.children),i=a;break;case"after":a=this.get_node(i.parent),r=e.inArray(i.id,a.children)+1,i=a;break;case"inside":case"first":r=0;break;case"last":r=i.children.length;break;default:r||(r=0)}if(r>i.children.length&&(r=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(a=this.get_node(n),l=[],l.push(n),l=l.concat(a.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),c=0,d=i.parents.length;d>c;c++)this._model.data[i.parents[c]].children_d=this._model.data[i.parents[c]].children_d.concat(l);for(n=a,a=[],c=0,d=i.children.length;d>c;c++)a[c>=r?c+1:c]=i.children[c];return a[r]=n.id,i.children=a,this.redraw_node(i,!0),s&&s.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:r}),n.id},rename_node:function(t,i){var n,r,s;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.rename_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(t){var i,n,r,s,o,a,l,c,d,h,u,p;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;if(r=this.get_node(t.parent),s=e.inArray(t.id,r.children),h=!1,!this.check("delete_node",t,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=e.vakata.array_remove(r.children,s)),o=t.children_d.concat([]),o.push(t.id),a=0,l=t.parents.length;l>a;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_filter(this._model.data[t.parents[a]].children_d,function(t){return-1===e.inArray(t,o)});for(c=0,d=o.length;d>c;c++)if(this._model.data[o[c]].state.selected){h=!0;break}for(h&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,o)})),this.trigger("delete_node",{node:t,parent:r.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:r.id}),c=0,d=o.length;d>c;c++)delete this._model.data[o[c]];return-1!==e.inArray(this._data.core.focused,o)&&(this._data.core.focused=null,u=this.element[0].scrollTop,p=this.element[0].scrollLeft,r.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(r,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=u,this.element[0].scrollLeft=p),this.redraw_node(r,!0),!0},check:function(t,i,n,r,s){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var o=t.match(/^move_node|copy_node|create_node$/i)?n:i,a=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||s&&s.is_multi||i.id!==n.id&&("move_node"!==t||e.inArray(i.id,n.children)!==r)&&-1===e.inArray(n.id,i.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(o.functions[t]===!1||o.functions[t]===!0)?(o.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})}),o.functions[t]):a===!1||e.isFunction(a)&&a.call(this,t,i,n,r,s)===!1||a&&a[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,r,s,o,a,l){var c,d,h,u,p,f,g,m,v,_,b,y,x,w;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,r,s,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(c=0,d=i.length;d>c;c++)(v=this.move_node(i[c],n,r,s,o,!1,l))&&(n=v,r="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;if(h=(i.parent||e.jstree.root).toString(),p=r.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,f=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),g=!f||!f._id||this._id!==f._id,u=f&&f._id&&h&&f._model.data[h]&&f._model.data[h].children?e.inArray(i.id,f._model.data[h].children):-1,f&&f._id&&(i=f._model.data[i.id]),g)return(v=this.copy_node(i,n,r,s,o,!1,l))?(f&&f.delete_node(i),v):!1;switch(n.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,p.children);break;case"after":r=e.inArray(n.id,p.children)+1;break;case"inside":case"first":r=0;break;case"last":r=p.children.length;break;default:r||(r=0)}if(r>p.children.length&&(r=p.children.length),!this.check("move_node",i,p,r,{core:!0,origin:l,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===p.id){for(m=p.children.concat(),v=e.inArray(i.id,m),-1!==v&&(m=e.vakata.array_remove(m,v),r>v&&r--),v=[],_=0,b=m.length;b>_;_++)v[_>=r?_+1:_]=m[_];v[r]=i.id,p.children=v,this._node_changed(p.id),this.redraw(p.id===e.jstree.root)}else{for(v=i.children_d.concat(),v.push(i.id),_=0,b=i.parents.length;b>_;_++){for(m=[],w=f._model.data[i.parents[_]].children_d,y=0,x=w.length;x>y;y++)-1===e.inArray(w[y],v)&&m.push(w[y]);f._model.data[i.parents[_]].children_d=m}for(f._model.data[h].children=e.vakata.array_remove_item(f._model.data[h].children,i.id),_=0,b=p.parents.length;b>_;_++)this._model.data[p.parents[_]].children_d=this._model.data[p.parents[_]].children_d.concat(v);for(m=[],_=0,b=p.children.length;b>_;_++)m[_>=r?_+1:_]=p.children[_];for(m[r]=i.id,p.children=m,p.children_d.push(i.id),p.children_d=p.children_d.concat(i.children_d),i.parent=p.id,v=p.parents.concat(),v.unshift(p.id),w=i.parents.length,i.parents=v,v=v.concat(),_=0,b=i.children_d.length;b>_;_++)this._model.data[i.children_d[_]].parents=this._model.data[i.children_d[_]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[i.children_d[_]].parents,v);(h===e.jstree.root||p.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(p.id)),a||this.redraw()}return s&&s.call(this,i,p,r),this.trigger("move_node",{node:i,parent:p.id,position:r,old_parent:h,old_position:u,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),i.id},copy_node:function(i,n,r,s,o,a,l){var c,d,h,u,p,f,g,m,v,_,b;if(n=this.get_node(n),r=r===t?0:r,!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,r,s,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(c=0,d=i.length;d>c;c++)(u=this.copy_node(i[c],n,r,s,o,!0,l))&&(n=u,r="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;switch(m=(i.parent||e.jstree.root).toString(),v=r.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,_=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),b=!_||!_._id||this._id!==_._id,_&&_._id&&(i=_._model.data[i.id]),n.id===e.jstree.root&&("before"===r&&(r="first"),"after"===r&&(r="last")),r){case"before":r=e.inArray(n.id,v.children);break;case"after":r=e.inArray(n.id,v.children)+1;break;case"inside":case"first":r=0;break;case"last":r=v.children.length;break;default:r||(r=0)}if(r>v.children.length&&(r=v.children.length),!this.check("copy_node",i,v,r,{core:!0,origin:l,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(g=_?_.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!g)return!1;if(g.id===!0&&delete g.id,g=this._parse_model_from_json(g,v.id,v.parents.concat()),!g)return!1;for(u=this.get_node(g),i&&i.state&&i.state.loaded===!1&&(u.state.loaded=!1),h=[],h.push(g),h=h.concat(u.children_d),this.trigger("model",{nodes:h,parent:v.id}),p=0,f=v.parents.length;f>p;p++)this._model.data[v.parents[p]].children_d=this._model.data[v.parents[p]].children_d.concat(h);for(h=[],p=0,f=v.children.length;f>p;p++)h[p>=r?p+1:p]=v.children[p];return h[r]=u.id,v.children=h,v.children_d.push(u.id),v.children_d=v.children_d.concat(u.children_d),v.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(v.id),a||this.redraw(v.id===e.jstree.root),s&&s.call(this,u,v,r),this.trigger("copy_node",{node:u,original:i,parent:v.id,position:r,old_parent:m,old_position:_&&_._id&&m&&_._model.data[m]&&_._model.data[m].children?e.inArray(i.id,_._model.data[m].children):-1,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),u.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,o,a,l=[];for(o=0,a=t.length;a>o;o++)i=this.get_node(t[o]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(n=l,s=this,r="move_node",void this.trigger("cut",{node:t})):!1},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,o,a,l=[];for(o=0,a=t.length;a>o;o++)i=this.get_node(t[o]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(n=l,s=this,r="copy_node",void this.trigger("copy",{node:t})):!1},get_buffer:function(){return{mode:r,node:n,inst:s}},can_paste:function(){return r!==!1&&n!==!1},paste:function(e,t){return e=this.get_node(e),e&&r&&r.match(/^(copy_node|move_node)$/)&&n?(this[r](n,e,t,!1,!1,!1,s)&&this.trigger("paste",{parent:e.id,node:n,mode:r}),n=!1,r=!1,void(s=!1)):!1},clear_buffer:function(){n=!1,r=!1,s=!1,this.trigger("clear_buffer")},edit:function(t,i,n){var r,s,o,a,c,d,h,u,p,f=!1;return(t=this.get_node(t))?this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(p=t,i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t),p.text=i,r=this._data.core.rtl,s=this.element.width(),this._data.core.focused=p.id,o=t.children(".jstree-anchor").focus(),a=e("<span>"),c=i,d=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=e("<input />",{value:c,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(i){i.stopImmediatePropagation(),i.preventDefault();var r,s=a.children(".jstree-rename-input"),l=s.val(),u=this.settings.core.force_text;""===l&&(l=c),d.remove(),a.replaceWith(o),a.remove(),c=u?c:e("<div></div>").append(e.parseHTML(c)).html(),this.set_text(t,c),r=!!this.rename_node(t,u?e("<div></div>").text(l).text():e("<div></div>").append(e.parseHTML(l)).html()),r||this.set_text(t,c),this._data.core.focused=p.id,setTimeout(e.proxy(function(){var e=this.get_node(p.id,!0);e.length&&(this._data.core.focused=p.id,e.children(".jstree-anchor").focus())},this),0),n&&n.call(this,p,r,f),h=null},this),keydown:function(e){var t=e.which;27===t&&(f=!0,this.value=c),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(){h.width(Math.min(d.text("pW"+this.value).width(),s))},keypress:function(e){return 13===e.which?!1:void 0}}),u={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""},a.attr("class",o.attr("class")).append(o.contents().clone()).append(h),o.replaceWith(a),d.css(u),h.css(u).width(Math.min(d.text("pW"+h[0].value).width(),s))[0].select(),void e(l).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){h&&t.target!==h&&e(h).blur()})):!1},set_theme:function(t,i){if(!t)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=e.jstree.path+"/themes"),i=n+"/"+t+"/style.css"}i&&-1===e.inArray(i,o)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),o.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(i,n){var r,s,o,a;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.set_icon(i[r],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(a=i.icon,i.icon=n===!0||null===n||n===t||""===n?!0:n,o=this.get_node(i,!0).children(".jstree-anchor").children(".jstree-themeicon"),n===!1?this.hide_icon(i):n===!0||null===n||n===t||""===n?(o.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),a===!1&&this.show_icon(i)):-1===n.indexOf("/")&&-1===n.indexOf(".")?(o.removeClass(a).css("background",""),o.addClass(n+" jstree-themeicon-custom").attr("rel",n),a===!1&&this.show_icon(i)):(o.removeClass(a).css("background",""),o.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n),a===!1&&this.show_icon(i)),!0):!1},get_icon:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.icon:!1},hide_icon:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(r=this.get_node(t,!0),t.icon=r.length?r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var n=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,r){-1===e.inArray(r.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==r.value&&""!==e.trim(r.value)&&(i?n[r.name]=r.value:n.push(r.name))}),n},e.vakata.array_unique=function(e){var i,n,r=[],s={};for(i=0,n=e.length;n>i;i++)s[e[i]]===t&&(r.push(e[i]),s[e[i]]=!0);return r},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,i){var n=e.inArray(i,t);return-1!==n?e.vakata.array_remove(t,n):t},e.vakata.array_filter=function(e,t,i,n,r){if(e.filter)return e.filter(t,i);n=[];for(r in e)~~r+""==r+""&&r>=0&&t.call(i,e[r],+r,e)&&n.push(e[r]);return n},e.jstree.plugins.changed=function(e,t){var i=[];this.trigger=function(e,n){var r,s;if(n||(n={}),"changed"===e.replace(".jstree","")){n.changed={selected:[],deselected:[]};var o={};for(r=0,s=i.length;s>r;r++)o[i[r]]=1;for(r=0,s=n.selected.length;s>r;r++)o[n.selected[r]]?o[n.selected[r]]=2:n.changed.selected.push(n.selected[r]);for(r=0,s=i.length;s>r;r++)1===o[i[r]]&&n.changed.deselected.push(i[r]);i=n.selected.slice()}t.trigger.call(this,e,n)},this.refresh=function(){return i=[],t.refresh.apply(this,arguments)}};var c=l.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(i,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var i,n,r=this._model.data,s=(r[t.parent],t.nodes);for(i=0,n=s.length;n>i;i++)r[s[i]].state.checked=r[s[i]].state.checked||r[s[i]].original&&r[s[i]].original.state&&r[s[i]].original.state.checked,r[s[i]].state.checked&&this._data.checkbox.selected.push(s[i])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,i){var n,r,s,o,a,l,c=this._model.data,d=c[i.parent],h=i.nodes,u=[],p=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;if(-1!==p.indexOf("down"))if(d.state[f?"selected":"checked"]){for(r=0,s=h.length;s>r;r++)c[h[r]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(h)}else for(r=0,s=h.length;s>r;r++)if(c[h[r]].state[f?"selected":"checked"]){for(o=0,a=c[h[r]].children_d.length;a>o;o++)c[c[h[r]].children_d[o]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(c[h[r]].children_d)}if(-1!==p.indexOf("up")){for(r=0,s=d.children_d.length;s>r;r++)c[d.children_d[r]].children.length||u.push(c[d.children_d[r]].parent);for(u=e.vakata.array_unique(u),o=0,a=u.length;a>o;o++)for(d=c[u[o]];d&&d.id!==e.jstree.root;){for(n=0,r=0,s=d.children.length;s>r;r++)n+=c[d.children[r]].state[f?"selected":"checked"];if(n!==s)break;d.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(d.id),l=this.get_node(d,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}}this._data[f?"core":"checkbox"].selected=e.vakata.array_unique(this._data[f?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,i){var n,r,s,o,a=i.node,l=this._model.data,c=this.get_node(a.parent),d=this.get_node(a,!0),h=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection,p={},f=this._data[u?"core":"checkbox"].selected;for(n=0,r=f.length;r>n;n++)p[f[n]]=!0;if(-1!==h.indexOf("down"))for(n=0,r=a.children_d.length;r>n;n++)p[a.children_d[n]]=!0,o=l[a.children_d[n]],o.state[u?"selected":"checked"]=!0,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1);if(-1!==h.indexOf("up"))for(;c&&c.id!==e.jstree.root;){for(s=0,n=0,r=c.children.length;r>n;n++)s+=l[c.children[n]].state[u?"selected":"checked"];if(s!==r)break;c.state[u?"selected":"checked"]=!0,p[c.id]=!0,o=this.get_node(c,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}f=[];for(n in p)p.hasOwnProperty(n)&&f.push(n);this._data[u?"core":"checkbox"].selected=f,-1!==h.indexOf("down")&&d.length&&d.find(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(){var t,i,n,r=this.get_node(e.jstree.root),s=this._model.data;for(t=0,i=r.children_d.length;i>t;t++)n=s[r.children_d[t]],n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,i){var n,r,s,o=i.node,a=this.get_node(o,!0),l=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection,d=this._data[c?"core":"checkbox"].selected,h={};if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),-1!==l.indexOf("down"))for(n=0,r=o.children_d.length;r>n;n++)s=this._model.data[o.children_d[n]],s.state[c?"selected":"checked"]=!1,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(n=0,r=o.parents.length;r>n;n++)s=this._model.data[o.parents[n]],s.state[c?"selected":"checked"]=!1,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1),s=this.get_node(o.parents[n],!0),s&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked");for(h={},n=0,r=d.length;r>n;n++)-1!==l.indexOf("down")&&-1!==e.inArray(d[n],o.children_d)||-1!==l.indexOf("up")&&-1!==e.inArray(d[n],o.parents)||(h[d[n]]=!0);d=[];for(n in h)h.hasOwnProperty(n)&&d.push(n);this._data[c?"core":"checkbox"].selected=d,-1!==l.indexOf("down")&&a.length&&a.find(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,i){for(var n,r,s,o,a=this.get_node(i.parent),l=this._model.data,c=this.settings.checkbox.tie_selection;a&&a.id!==e.jstree.root&&!a.state[c?"selected":"checked"];){for(s=0,n=0,r=a.children.length;r>n;n++)s+=l[a.children[n]].state[c?"selected":"checked"];if(!(r>0&&s===r))break;a.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(a.id),o=this.get_node(a,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var n,r,s,o,a,l=i.is_multi,c=i.old_parent,d=this.get_node(i.parent),h=this._model.data,u=this.settings.checkbox.tie_selection;if(!l)for(n=this.get_node(c);n&&n.id!==e.jstree.root&&!n.state[u?"selected":"checked"];){for(r=0,s=0,o=n.children.length;o>s;s++)r+=h[n.children[s]].state[u?"selected":"checked"];if(!(o>0&&r===o))break;n.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}for(n=d;n&&n.id!==e.jstree.root;){for(r=0,s=0,o=n.children.length;o>s;s++)r+=h[n.children[s]].state[u?"selected":"checked"];if(r===o)n.state[u?"selected":"checked"]||(n.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else{if(!n.state[u?"selected":"checked"])break;n.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,n.id),a=this.get_node(n,!0),a&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,n,r,s,o={},a=this._model.data,l=this.settings.checkbox.tie_selection,c=this._data[l?"core":"checkbox"].selected,d=[],h=this;for(i=0,n=c.length;n>i;i++)if(a[c[i]]&&a[c[i]].parents)for(r=0,s=a[c[i]].parents.length;s>r&&o[a[c[i]].parents[r]]===t;r++)a[c[i]].parents[r]!==e.jstree.root&&(o[a[c[i]].parents[r]]=!0,d.push(a[c[i]].parents[r]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,c=h.get_node(this);if(c.state.loaded){for(i=0,n=c.children_d.length;n>i;i++)if(l=a[c.children_d[i]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&l.original.state.undetermined===!0)for(o[l.id]===t&&l.id!==e.jstree.root&&(o[l.id]=!0,d.push(l.id)),r=0,s=l.parents.length;s>r;r++)o[l.parents[r]]===t&&l.parents[r]!==e.jstree.root&&(o[l.parents[r]]=!0,d.push(l.parents[r]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&c.original.state.undetermined===!0)for(o[c.id]===t&&c.id!==e.jstree.root&&(o[c.id]=!0,d.push(c.id)),r=0,s=c.parents.length;s>r;r++)o[c.parents[r]]===t&&c.parents[r]!==e.jstree.root&&(o[c.parents[r]]=!0,d.push(c.parents[r]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,n=d.length;n>i;i++)a[d[i]].state[l?"selected":"checked"]||(c=this.get_node(d[i],!0),c&&c.length&&c.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(t,i,r){if(t=n.redraw_node.apply(this,arguments)){var s,o,a=null,l=null;for(s=0,o=t.childNodes.length;o>s;s++)if(t.childNodes[s]&&t.childNodes[s].className&&-1!==t.childNodes[s].className.indexOf("jstree-anchor")){a=t.childNodes[s];break}a&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(a.className+=" jstree-checked"),l=c.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(l.className+=" jstree-checkbox-disabled"),a.insertBefore(l,a.childNodes[0]))}return r||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var i,n,r=this.settings.checkbox.cascade,s=this.settings.checkbox.tie_selection,o=this._data[s?"core":"checkbox"].selected,a=this._model.data;if(!t||t.state[s?"selected":"checked"]===!0||-1===r.indexOf("undetermined")||-1===r.indexOf("down")&&-1===r.indexOf("up"))return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(i=0,n=t.children_d.length;n>i;i++)if(-1!==e.inArray(t.children_d[i],o)||!a[t.children_d[i]].state.loaded&&a[t.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t})))):!1},this.enable_checkbox=function(t){var i,n,r;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t})))):!1
},this.activate_node=function(t,i){return e(i.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox")?n.activate_node.call(this,t,i):this.is_disabled(t)?!1:(this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),void this.trigger("activate_node",{node:this.get_node(t)})))},this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var n,r,s;if(e.isArray(t)){for(t=t.slice(),r=0,s=t.length;s>r;r++)this.check_node(t[r],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(n=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),n&&n.length&&n.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var n,r,s;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.uncheck_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();{var t,i;this._data.checkbox.selected.concat([])}for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;i>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):(t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.checked:!1)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var i,n,r,s,o=this.get_checked(!0),a={};for(i=0,n=o.length;n>i;i++)a[o[i].id]=o[i];for(i=0,n=o.length;n>i;i++)for(r=0,s=o[i].children_d.length;s>r;r++)a[o[i].children_d[r]]&&delete a[o[i].children_d[r]];o=[];for(i in a)a.hasOwnProperty(i)&&o.push(i);return t?e.map(o,e.proxy(function(e){return this.get_node(e)},this)):o},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var i,n,r=this.get_checked(!0),s=[];for(i=0,n=r.length;n>i;i++)r[i].children.length||s.push(r[i].id);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},this.load_node=function(t){var i,r,s,o;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(t),o&&o.state.loaded))for(i=0,r=o.children_d.length;r>i;i++)this._model.data[o.children_d[i]].state.checked&&(s=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[i]));return n.load_node.apply(this,arguments)},this.get_state=function(){var e=n.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,i){var r=n.set_state.apply(this,arguments);if(r&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var s=this;e.each(t.checkbox,function(e,t){s.check_node(t)})}return delete t.checkbox,this.set_state(t,i),!1}return r},this.refresh=function(){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),n.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,i){this.settings.conditionalselect.call(this,this.get_node(e),i)&&t.activate_node.call(this,e,i)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.create_node(n,{},"last",function(e){setTimeout(function(){i.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.edit(n)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.delete_node(i.is_selected(n)?i.get_selected():n)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.cut(i.is_selected(n)?i.get_top_selected():n)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.copy(i.is_selected(n)?i.get_top_selected():n)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.paste(n)}}}}}}},e.jstree.plugins.contextmenu=function(i,n){this.bind=function(){n.bind.call(this);var t,i,r=0,s=null;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),r=e.ctrlKey?+new Date:0,(t||s)&&(r=+new Date+1e4),s&&clearTimeout(s),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(){this._data.contextmenu.visible&&(!r||+new Date-r>250)&&e.vakata.context.hide(),r=0},this)).on("touchstart.jstree",".jstree-anchor",function(n){n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(t=n.originalEvent.changedTouches[0].clientX,i=n.originalEvent.changedTouches[0].clientY,s=setTimeout(function(){e(n.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){s&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(i-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(s)}).on("touchend.vakata.jstree",function(){s&&clearTimeout(s)}),e(l).on("context_hide.vakata.jstree",e.proxy(function(t,i){this._data.contextmenu.visible=!1,e(i.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),n.teardown.call(this)},this.show_contextmenu=function(i,n,r,s){if(i=this.get_node(i),!i||i.id===e.jstree.root)return!1;var o=this.settings.contextmenu,a=this.get_node(i,!0),l=a.children(".jstree-anchor"),c=!1,d=!1;(o.show_at_node||n===t||r===t)&&(c=l.offset(),n=c.left,r=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(i)&&this.activate_node(i,s),d=o.items,e.isFunction(d)&&(d=d.call(this,i,e.proxy(function(e){this._show_contextmenu(i,n,r,e)},this))),e.isPlainObject(d)&&this._show_contextmenu(i,n,r,d)},this._show_contextmenu=function(t,i,n,r){var s=this.get_node(t,!0),o=s.children(".jstree-anchor");e(l).one("context_show.vakata.jstree",e.proxy(function(t,i){var n="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(i.element).addClass(n),o.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(o,{x:i,y:n},r),this.trigger("show_contextmenu",{node:t,x:i,y:n})}},function(e){var t=!1,i={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(l).triggerHandler("context_"+t+".vakata",{reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}})},_execute:function(t){return t=i.items[t],t&&(!t._disabled||e.isFunction(t._disabled)&&!t._disabled({item:t,reference:i.reference,element:i.element}))&&t.action?t.action.call(null,{item:t,reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}}):!1},_parse:function(t,n){if(!t)return!1;n||(i.html="",i.items=[]);var r,s="",o=!1;return n&&(s+="<ul>"),e.each(t,function(t,n){return n?(i.items.push(n),!o&&n.separator_before&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),o=!1,s+="<li class='"+(n._class||"")+(n._disabled===!0||e.isFunction(n._disabled)&&n._disabled({item:n,reference:i.reference,element:i.element})?" vakata-contextmenu-disabled ":"")+"' "+(n.shortcut?" data-shortcut='"+n.shortcut+"' ":"")+">",s+="<a href='#' rel='"+(i.items.length-1)+"' "+(n.title?"title='"+n.title+"'":"")+">",e.vakata.context.settings.icons&&(s+="<i ",n.icon&&(s+=-1!==n.icon.indexOf("/")||-1!==n.icon.indexOf(".")?" style='background:url(\""+n.icon+"\") center center no-repeat' ":" class='"+n.icon+"' "),s+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),s+=(e.isFunction(n.label)?n.label({item:t,reference:i.reference,element:i.element}):n.label)+(n.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+n.shortcut+'">'+(n.shortcut_label||"")+"</span>":"")+"</a>",n.submenu&&(r=e.vakata.context._parse(n.submenu,!0),r&&(s+=r)),s+="</li>",void(n.separator_after&&(s+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",o=!0))):!0}),s=s.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),n&&(s+="</ul>"),n||(i.html=s,e.vakata.context._trigger("parse")),s.length>10?s:!1},_show_submenu:function(i){if(i=e(i),i.length&&i.children("ul").length){var n=i.children("ul"),r=i.offset().left,s=r+i.outerWidth(),o=i.offset().top,a=n.width(),l=n.height(),c=e(window).width()+e(window).scrollLeft(),d=e(window).height()+e(window).scrollTop();t?i[s-(a+10+i.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):i[s+a>c&&r>c-s?"addClass":"removeClass"]("vakata-context-right"),o+l+10>d&&n.css("bottom","-1px"),i.hasClass("vakata-context-right")?a>r&&n.css("margin-right",r-a):a>c-s&&n.css("margin-left",c-s-a),n.show()}},show:function(n,r,s){var o,a,l,c,d,h,u,p,f=!0;switch(i.element&&i.element.length&&i.element.width(""),f){case!r&&!n:return!1;case!!r&&!!n:i.reference=n,i.position_x=r.x,i.position_y=r.y;break;case!r&&!!n:i.reference=n,o=n.offset(),i.position_x=o.left+n.outerHeight(),i.position_y=o.top;break;case!!r&&!n:i.position_x=r.x,i.position_y=r.y}n&&!s&&e(n).data("vakata_contextmenu")&&(s=e(n).data("vakata_contextmenu")),e.vakata.context._parse(s)&&i.element.html(i.html),i.items.length&&(i.element.appendTo("body"),a=i.element,l=i.position_x,c=i.position_y,d=a.width(),h=a.height(),u=e(window).width()+e(window).scrollLeft(),p=e(window).height()+e(window).scrollTop(),t&&(l-=a.outerWidth()-e(n).outerWidth(),l<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20)),l+d+20>u&&(l=u-(d+20)),c+h+20>p&&(c=p-(h+20)),i.element.css({left:l,top:c}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),i.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){i.is_visible&&(i.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),i.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var n=!1;i.element=e("<ul class='vakata-context'></ul>"),i.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(n&&clearTimeout(n),i.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(n=setTimeout(function(){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var n=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:i.is_visible&&(i.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:i.is_visible&&(i.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=i.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(l).on("mousedown.vakata.jstree",function(t){i.is_visible&&!e.contains(i.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(){i.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&i.element.addClass("vakata-context-rtl").css("direction","rtl"),i.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var d,h;e.jstree.plugins.dnd=function(t,i){this.init=function(e,t){i.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in l.createElement("span")},this.bind=function(){i.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var i=this.get_node(t.target),n=this.is_selected(i)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=n>1?n+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(r=e.vakata.html.escape(r)),i&&i.id&&i.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,n>1?this.get_top_selected(!0):[i],t))){if(d={jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:n>1?this.get_top_selected():[i.id]},h=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,d,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:h,data:d})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:h,data:d}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:h,data:d}),!1},this))},this.redraw_node=function(e){if(e=i.redraw_node.apply(this,arguments),e&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var t,n,r=null;for(t=0,n=e.childNodes.length;n>t;t++)if(e.childNodes[t]&&e.childNodes[t].className&&-1!==e.childNodes[t].className.indexOf("jstree-anchor")){r=e.childNodes[t];break}r&&r.setAttribute("draggable",!0)}return e}},e(function(){var i=!1,n=!1,r=!1,s=!1,o=e('<div id="jstree-marker">&#160;</div>').hide();e(l).on("dnd_start.vakata.jstree",function(e,t){i=!1,r=!1,t&&t.data&&t.data.jstree&&o.appendTo("body")}).on("dnd_move.vakata.jstree",function(a,l){if(s&&(l.event&&"dragover"===l.event.type&&l.event.target===r.target||clearTimeout(s)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){r=l.event;var c,d,h,u,p,f,g,m,v,_,b,y,x,w,k,C,S=e.jstree.reference(l.event.target),j=!1,T=!1,P=!1;if(S&&S._data&&S._data.dnd)if(o.attr("class","jstree-"+S.get_theme()+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")),k=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+S.get_theme()+" jstree-"+S.get_theme()+"-"+S.get_theme_variant()+" "+(S.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[k?"show":"hide"](),l.event.target!==S.element[0]&&l.event.target!==S.get_container_ul()[0]||0!==S.get_container_ul().children().length){if(j=S.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"),j&&j.length&&j.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(T=j.offset(),P=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-T.top,h=j.outerHeight(),f=h/3>P?["b","i","a"]:P>h-h/3?["a","i","b"]:P>h/2?["i","a","b"]:["i","b","a"],e.each(f,function(t,r){switch(r){case"b":c=T.left-6,d=T.top,u=S.get_parent(j),p=j.parent().index();break;case"i":x=S.settings.dnd.inside_pos,w=S.get_node(j.parent()),c=T.left-2,d=T.top+h/2+1,u=w.id,p="first"===x?0:"last"===x?w.children.length:Math.min(x,w.children.length);break;case"a":c=T.left-6,d=T.top+h,u=S.get_parent(j),p=j.parent().index()+1}for(g=!0,m=0,v=l.data.nodes.length;v>m;m++)if(_=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",b=p,"move_node"===_&&"a"===r&&l.data.origin&&l.data.origin===S&&u===S.get_parent(l.data.nodes[m])&&(y=S.get_node(u),b>e.inArray(l.data.nodes[m],y.children)&&(b-=1)),g=g&&(S&&S.settings&&S.settings.dnd&&S.settings.dnd.check_while_dragging===!1||S.check(_,l.data.origin&&l.data.origin!==S?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],u,b,{dnd:!0,ref:S.get_node(j.parent()),pos:r,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==S,is_foreign:!l.data.origin})),!g){S&&S.last_error&&(n=S.last_error());break}return"i"===r&&j.parent().is(".jstree-closed")&&S.settings.dnd.open_timeout&&(s=setTimeout(function(e,t){return function(){e.open_node(t)}}(S,j),S.settings.dnd.open_timeout)),g?(C=S.get_node(u,!0),C.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),i={ins:S,par:u,pos:"i"!==r||"last"!==x||0!==p||S.is_loaded(w)?p:"last"},o.css({left:c+"px",top:d+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"),n={},f=!0,!1):void 0}),f===!0))return}else{for(g=!0,m=0,v=l.data.nodes.length;v>m&&(g=g&&S.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==S?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],e.jstree.root,"last",{dnd:!0,ref:S.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==S,is_foreign:!l.data.origin}),g);m++);if(g)return i={ins:S,par:e.jstree.root,pos:"last"},o.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),o.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(o.hide(),i=!1,r=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,a){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),s&&clearTimeout(s),a&&a.data&&a.data.jstree){o.hide().detach();var l,c,d=[];if(i){for(l=0,c=a.data.nodes.length;c>l;l++)d[l]=a.data.origin?a.data.origin.get_node(a.data.nodes[l]):a.data.nodes[l];i.ins[a.data.origin&&(a.data.origin.settings.dnd.always_copy||a.data.origin.settings.dnd.copy&&(a.event.metaKey||a.event.ctrlKey))?"copy_node":"move_node"](d,i.par,i.pos,!1,!1,!1,a.data.origin)}else l=e(a.event.target).closest(".jstree"),l.length&&n&&n.error&&"check"===n.error&&(l=l.jstree(!0),l&&l.settings.core.error.call(this,n));r=!1,i=!1}}).on("keyup.jstree keydown.jstree",function(t,a){a=e.vakata.dnd._get(),a&&a.data&&a.data.jstree&&("keyup"===t.type&&27===t.which?(s&&clearTimeout(s),i=!1,n=!1,r=!1,s=!1,o.hide().detach(),e.vakata.dnd._clean()):(a.helper.find(".jstree-copy").first()[a.data.origin&&(a.data.origin.settings.dnd.always_copy||a.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),r&&(r.metaKey=t.metaKey,r.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",r))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(i,n,r){r===t&&(r=e.vakata.dnd._get()),r.event=n,e(l).triggerHandler("dnd_"+i+".vakata",r)},_get:function(){return{data:i.data,element:i.element,helper:i.helper}},_clean:function(){i.helper&&i.helper.remove(),i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!i.scroll_e||!i.scroll_l&&!i.scroll_t)return i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),!1;if(!i.scroll_i)return i.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var n=i.scroll_e.scrollTop(),r=i.scroll_e.scrollLeft();i.scroll_e.scrollTop(n+i.scroll_t*e.vakata.dnd.settings.scroll_speed),i.scroll_e.scrollLeft(r+i.scroll_l*e.vakata.dnd.settings.scroll_speed),(n!==i.scroll_e.scrollTop()||r!==i.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",i.scroll_e)},start:function(t,n,r){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(s){}return i.init_x=t.pageX,i.init_y=t.pageY,i.data=n,i.is_down=!0,i.element=t.currentTarget,i.target=t.target,i.is_touch="touchstart"===t.type,r!==!1&&(i.helper=e("<div id='vakata-dnd'></div>").html(r).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_down){if(!i.is_drag){if(!(Math.abs(t.pageX-i.init_x)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-i.init_y)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;i.helper&&(i.helper.appendTo("body"),i.helper_w=i.helper.outerWidth()),i.is_drag=!0,e(i.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var n=!1,r=!1,s=!1,o=!1,a=!1,c=!1,d=!1,h=!1,u=!1,p=!1;return i.scroll_t=0,i.scroll_l=0,i.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var n=e(this),r=n.offset();return this.scrollHeight>this.offsetHeight&&(r.top+n.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),t.pageY-r.top<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(r.left+n.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),t.pageX-r.left<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1)),i.scroll_t||i.scroll_l?(i.scroll_e=e(this),!1):void 0}),i.scroll_e||(n=e(l),r=e(window),s=n.height(),o=r.height(),a=n.width(),c=r.width(),d=n.scrollTop(),h=n.scrollLeft(),s>o&&t.pageY-d<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1),s>o&&o-(t.pageY-d)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),a>c&&t.pageX-h<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1),a>c&&c-(t.pageX-h)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),(i.scroll_t||i.scroll_l)&&(i.scroll_e=n)),i.scroll_e&&e.vakata.dnd._scroll(!0),i.helper&&(u=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),p=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),s&&u+25>s&&(u=s-50),a&&p+i.helper_w>a&&(p=a-(i.helper_w+2)),i.helper.css({left:p+"px",top:u+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag)t.target!==i.target&&e(i.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===i.target){var n=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){n&&clearTimeout(n)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,i){this.init=function(e,t){this._data.massload={},i.init.call(this,e,t)},this._load_nodes=function(t,n,r,s){var o,a,l,c=this.settings.massload,d=(JSON.stringify(t),[]),h=this._model.data;if(!r){for(o=0,a=t.length;a>o;o++)(!h[t[o]]||!h[t[o]].state.loaded&&!h[t[o]].state.failed||s)&&(d.push(t[o]),l=this.get_node(t[o],!0),l&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},d.length){if(e.isFunction(c))return c.call(this,d,e.proxy(function(e){var o,a;if(e)for(o in e)e.hasOwnProperty(o)&&(this._data.massload[o]=e[o]);for(o=0,a=t.length;a>o;o++)l=this.get_node(t[o],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,r,s)},this));if("object"==typeof c&&c&&c.url)return c=e.extend(!0,{},c),e.isFunction(c.url)&&(c.url=c.url.call(this,d)),e.isFunction(c.data)&&(c.data=c.data.call(this,d)),e.ajax(c).done(e.proxy(function(e){var o,a;if(e)for(o in e)e.hasOwnProperty(o)&&(this._data.massload[o]=e[o]);for(o=0,a=t.length;a>o;o++)l=this.get_node(t[o],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,r,s)},this)).fail(e.proxy(function(){i._load_nodes.call(this,t,n,r,s)},this))}}return i._load_nodes.call(this,t,n,r,s)},this._load_node=function(t,n){var r,s=this._data.massload[t.id],o=null;return s?(o=this["string"==typeof s?"_append_html_data":"_append_json_data"](t,"string"==typeof s?e(e.parseHTML(s)).filter(function(){return 3!==this.nodeType}):s,function(e){n.call(this,e)}),r=this.get_node(t.id,!0),r&&r.length&&r.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],o):i._load_node.call(this,t,n)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(i,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,i){if(this._data.search.som&&i.res.length){var n,r,s,o,a=this._model.data,l=[];for(n=0,r=i.res.length;r>n;n++)if(a[i.res[n]]&&!a[i.res[n]].state.hidden&&(l.push(i.res[n]),l=l.concat(a[i.res[n]].parents),this._data.search.smc))for(s=0,o=a[i.res[n]].children_d.length;o>s;s++)a[a[i.res[n]].children_d[s]]&&!a[a[i.res[n]].children_d[s]].state.hidden&&l.push(a[i.res[n]].children_d[s]);
l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(i,n,r,s,o,a){if(i===!1||""===e.trim(i.toString()))return this.clear_search();s=this.get_node(s),s=s&&s.id?s.id:null,i=i.toString();var l,c,d=this.settings.search,h=d.ajax?d.ajax:!1,u=this._model.data,p=null,f=[],g=[];if(this._data.search.res.length&&!o&&this.clear_search(),r===t&&(r=d.show_only_matches),a===t&&(a=d.show_only_matches_children),!n&&h!==!1)return e.isFunction(h)?h.call(this,i,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,r,s,o,a)})},this),s):(h=e.extend({},h),h.data||(h.data={}),h.data.str=i,s&&(h.data.inside=s),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(h).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(h)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,r,s,o,a)})},this)),this._data.search.lastRequest);if(o||(this._data.search.str=i,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=r,this._data.search.smc=a),p=new e.vakata.search(i,!0,{caseSensitive:d.case_sensitive,fuzzy:d.fuzzy}),e.each(u[s?s:e.jstree.root].children_d,function(e,t){var n=u[t];n.text&&!n.state.hidden&&(!d.search_leaves_only||n.state.loaded&&0===n.children.length)&&(d.search_callback&&d.search_callback.call(this,i,n)||!d.search_callback&&p.search(n.text).isMatch)&&(f.push(t),g=g.concat(n.parents))}),f.length){for(g=e.vakata.array_unique(g),l=0,c=g.length;c>l;l++)g[l]!==e.jstree.root&&u[g[l]]&&this.open_node(g[l],null,0)===!0&&this._data.search.opn.push(g[l]);o?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(f))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=f),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:i,res:this._data.search.res,show_only_matches:r})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t){if(t=n.redraw_node.apply(this,arguments),t&&-1!==e.inArray(t.id,this._data.search.res)){var i,r,s=null;for(i=0,r=t.childNodes.length;r>i;i++)if(t.childNodes[i]&&t.childNodes[i].className&&-1!==t.childNodes[i].className.indexOf("jstree-anchor")){s=t.childNodes[i];break}s&&(s.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,i,n){n=n||{},n=e.extend({},e.vakata.search.defaults,n),n.fuzzy!==!1&&(n.fuzzy=!0),t=n.caseSensitive?t:t.toLowerCase();var r,s,o,a,l=n.location,c=n.distance,d=n.threshold,h=t.length;return h>32&&(n.fuzzy=!1),n.fuzzy&&(r=1<<h-1,s=function(){var e={},i=0;for(i=0;h>i;i++)e[t.charAt(i)]=0;for(i=0;h>i;i++)e[t.charAt(i)]|=1<<h-i-1;return e}(),o=function(e,t){var i=e/h,n=Math.abs(l-t);return c?i+n/c:n?1:i}),a=function(e){if(e=n.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var i,a,c,u,p,f,g,m,v,_=e.length,b=d,y=e.indexOf(t,l),x=h+_,w=1,k=[];for(-1!==y&&(b=Math.min(o(0,y),b),y=e.lastIndexOf(t,l+h),-1!==y&&(b=Math.min(o(0,y),b))),y=-1,i=0;h>i;i++){for(c=0,u=x;u>c;)o(i,l+u)<=b?c=u:x=u,u=Math.floor((x-c)/2+c);for(x=u,f=Math.max(1,l-u+1),g=Math.min(l+u,_)+h,m=new Array(g+2),m[g+1]=(1<<i)-1,a=g;a>=f;a--)if(v=s[e.charAt(a-1)],m[a]=0===i?(m[a+1]<<1|1)&v:(m[a+1]<<1|1)&v|((p[a+1]|p[a])<<1|1)|p[a+1],m[a]&r&&(w=o(i,a-1),b>=w)){if(b=w,y=a-1,k.push(y),!(y>l))break;f=Math.max(1,2*l-y)}if(o(i+1,l)>b)break;p=m}return{isMatch:y>=0,score:w}},i===!0?{search:a}:a(i)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,i){var n,r;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),i))for(n=0,r=t.children_d.length;r>n;n++)this.sort(t.children_d[n],!1)}};var u=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){u&&clearTimeout(u),u=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(i){return!1}return t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl?!1:(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),t?(this.element.one("set_state.jstree",function(i,n){n.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0):!1)},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"default":{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(i,n){this.init=function(i,r){var s,o;if(r&&r.types&&r.types["default"])for(s in r.types)if("default"!==s&&s!==e.jstree.root&&r.types.hasOwnProperty(s))for(o in r.types["default"])r.types["default"].hasOwnProperty(o)&&r.types[s][o]===t&&(r.types[s][o]=r.types["default"][o]);n.init.call(this,i,r),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,i){n.refresh.call(this,t,i),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(i,n){var r,s,o,a=this._model.data,l=n.nodes,c=this.settings.types,d="default";for(r=0,s=l.length;s>r;r++){if(d="default",a[l[r]].original&&a[l[r]].original.type&&c[a[l[r]].original.type]&&(d=a[l[r]].original.type),a[l[r]].data&&a[l[r]].data.jstree&&a[l[r]].data.jstree.type&&c[a[l[r]].data.jstree.type]&&(d=a[l[r]].data.jstree.type),a[l[r]].type=d,a[l[r]].icon===!0&&c[d].icon!==t&&(a[l[r]].icon=c[d].icon),c[d].li_attr!==t&&"object"==typeof c[d].li_attr)for(o in c[d].li_attr)if(c[d].li_attr.hasOwnProperty(o)){if("id"===o)continue;a[l[r]].li_attr[o]===t?a[l[r]].li_attr[o]=c[d].li_attr[o]:"class"===o&&(a[l[r]].li_attr["class"]=c[d].li_attr["class"]+" "+a[l[r]].li_attr["class"])}if(c[d].a_attr!==t&&"object"==typeof c[d].a_attr)for(o in c[d].a_attr)if(c[d].a_attr.hasOwnProperty(o)){if("id"===o)continue;a[l[r]].a_attr[o]===t?a[l[r]].a_attr[o]=c[d].a_attr[o]:"href"===o&&"#"===a[l[r]].a_attr[o]?a[l[r]].a_attr.href=c[d].a_attr.href:"class"===o&&(a[l[r]].a_attr["class"]=c[d].a_attr["class"]+" "+a[l[r]].a_attr["class"])}}a[e.jstree.root].type=e.jstree.root},this)),n.bind.call(this)},this.get_json=function(t,i,r){var s,o,a=this._model.data,l=i?e.extend(!0,{},i,{no_id:!1}):{},c=n.get_json.call(this,t,l,r);if(c===!1)return!1;if(e.isArray(c))for(s=0,o=c.length;o>s;s++)c[s].type=c[s].id&&a[c[s].id]&&a[c[s].id].type?a[c[s].id].type:"default",i&&i.no_id&&(delete c[s].id,c[s].li_attr&&c[s].li_attr.id&&delete c[s].li_attr.id,c[s].a_attr&&c[s].a_attr.id&&delete c[s].a_attr.id);else c.type=c.id&&a[c.id]&&a[c.id].type?a[c.id].type:"default",i&&i.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var i=0,n=t.length;n>i;i++)t[i]=this._delete_ids(t[i]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(i,r,s,o,a){if(n.check.call(this,i,r,s,o,a)===!1)return!1;r=r&&r.id?r:this.get_node(r),s=s&&s.id?s:this.get_node(s);var l,c,d,h,u=r&&r.id?a&&a.origin?a.origin:e.jstree.reference(r.id):null;switch(u=u&&u._model&&u._model.data?u._model.data:null,i){case"create_node":case"move_node":case"copy_node":if("move_node"!==i||-1===e.inArray(r.id,s.children)){if(l=this.get_rules(s),l.max_children!==t&&-1!==l.max_children&&l.max_children===s.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(r.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;if(u&&r.children_d&&r.parents){for(c=0,d=0,h=r.children_d.length;h>d;d++)c=Math.max(c,u[r.children_d[d]].parents.length);c=c-r.parents.length+1}(0>=c||c===t)&&(c=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+i,data:JSON.stringify({chk:i,pos:o,obj:r&&r.id?r.id:!1,par:s&&s.id?s.id:!1})},!1;s=this.get_node(s.parent),l=this.get_rules(s),c++}while(s)}}return!0},this.get_rules=function(e){if(e=this.get_node(e),!e)return!1;var i=this.get_type(e,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i},this.get_type=function(t,i){return t=this.get_node(t),t?i?e.extend({type:t.type},this.settings.types[t.type]):t.type:!1},this.set_type=function(i,n){var r,s,o,a,l,c,d,h,u=this._model.data;if(e.isArray(i)){for(i=i.slice(),s=0,o=i.length;o>s;s++)this.set_type(i[s],n);return!0}if(r=this.settings.types,i=this.get_node(i),!r[n]||!i)return!1;if(d=this.get_node(i,!0),d&&d.length&&(h=d.children(".jstree-anchor")),a=i.type,l=this.get_icon(i),i.type=n,(l===!0||!r[a]||r[a].icon!==t&&l===r[a].icon)&&this.set_icon(i,r[n].icon!==t?r[n].icon:!0),r[a]&&r[a].li_attr!==t&&"object"==typeof r[a].li_attr)for(c in r[a].li_attr)if(r[a].li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(u[i.id].li_attr["class"]=(u[i.id].li_attr["class"]||"").replace(r[a].li_attr[c],""),d&&d.removeClass(r[a].li_attr[c])):u[i.id].li_attr[c]===r[a].li_attr[c]&&(u[i.id].li_attr[c]=null,d&&d.removeAttr(c))}if(r[a]&&r[a].a_attr!==t&&"object"==typeof r[a].a_attr)for(c in r[a].a_attr)if(r[a].a_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(u[i.id].a_attr["class"]=(u[i.id].a_attr["class"]||"").replace(r[a].a_attr[c],""),h&&h.removeClass(r[a].a_attr[c])):u[i.id].a_attr[c]===r[a].a_attr[c]&&("href"===c?(u[i.id].a_attr[c]="#",h&&h.attr("href","#")):(delete u[i.id].a_attr[c],h&&h.removeAttr(c)))}if(r[n].li_attr!==t&&"object"==typeof r[n].li_attr)for(c in r[n].li_attr)if(r[n].li_attr.hasOwnProperty(c)){if("id"===c)continue;u[i.id].li_attr[c]===t?(u[i.id].li_attr[c]=r[n].li_attr[c],d&&("class"===c?d.addClass(r[n].li_attr[c]):d.attr(c,r[n].li_attr[c]))):"class"===c&&(u[i.id].li_attr["class"]=r[n].li_attr[c]+" "+u[i.id].li_attr["class"],d&&d.addClass(r[n].li_attr[c]))}if(r[n].a_attr!==t&&"object"==typeof r[n].a_attr)for(c in r[n].a_attr)if(r[n].a_attr.hasOwnProperty(c)){if("id"===c)continue;u[i.id].a_attr[c]===t?(u[i.id].a_attr[c]=r[n].a_attr[c],h&&("class"===c?h.addClass(r[n].a_attr[c]):h.attr(c,r[n].a_attr[c]))):"href"===c&&"#"===u[i.id].a_attr[c]?(u[i.id].a_attr.href=r[n].a_attr.href,h&&h.attr("href",r[n].a_attr.href)):"class"===c&&(u[i.id].a_attr["class"]=r[n].a_attr["class"]+" "+u[i.id].a_attr["class"],h&&h.addClass(r[n].a_attr[c]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(i,n){this.check=function(t,i,r,s,o){if(n.check.call(this,t,i,r,s,o)===!1)return!1;if(i=i&&i.id?i:this.get_node(i),r=r&&r.id?r:this.get_node(r),!r||!r.children)return!0;var a,l,c="rename_node"===t?s:i.text,d=[],h=this.settings.unique.case_sensitive,u=this._model.data;for(a=0,l=r.children.length;l>a;a++)d.push(h?u[r.children[a]].text:u[r.children[a]].text.toLowerCase());switch(h||(c=c.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return a=-1===e.inArray(c,d)||i.text&&i.text[h?"toString":"toLowerCase"]()===c,a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"create_node":return a=-1===e.inArray(c,d),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"copy_node":return a=-1===e.inArray(c,d),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a;case"move_node":return a=i.parent===r.id&&(!o||!o.is_multi)||-1===e.inArray(c,d),a||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+c+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:s,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),a}return!0},this.create_node=function(i,r,s,o,a){if(!r||r.text===t){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return n.create_node.call(this,i,r,s,o,a);if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return n.create_node.call(this,i,r,s,o,a);r||(r={});var l,c,d,h,u,p=this._model.data,f=this.settings.unique.case_sensitive,g=this.settings.unique.duplicate;for(c=l=this.get_string("New node"),d=[],h=0,u=i.children.length;u>h;h++)d.push(f?p[i.children[h]].text:p[i.children[h]].text.toLowerCase());for(h=1;-1!==e.inArray(f?c:c.toLowerCase(),d);)c=g.call(this,l,++h).toString();r.text=c}return n.create_node.call(this,i,r,s,o,a)}};var p=l.createElement("DIV");if(p.setAttribute("unselectable","on"),p.setAttribute("role","presentation"),p.className="jstree-wholerow",p.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,r=!1;for(i=0,n=t.selected.length;n>i;i++)r=this.get_node(t.selected[i],!0),r&&r.length&&r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),i.teardown.call(this)},this.redraw_node=function(t){if(t=i.redraw_node.apply(this,arguments)){var n=p.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(n.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(n.className+=" jstree-wholerow-hovered"),t.insertBefore(n,t.childNodes[0])}return t}},l.registerElement&&Object&&Object.create){var f=Object.create(HTMLElement.prototype);f.createdCallback=function(){var t,i={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(i)};try{l.registerElement("vakata-jstree",{prototype:f})}catch(g){}}}}),function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return r(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){"use strict";function i(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||"undefined"==typeof e){var t=e;r.get(this)||n.initialize(this,t)}else{var i=e;"update"===i?n.update(this):"destroy"===i&&n.destroy(this)}})}}var n=e("../main"),r=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],i);else{var s=window.jQuery?window.jQuery:window.$;"undefined"!=typeof s&&i(s)}t.exports=i},{"../main":7,"../plugin/instances":18}],2:[function(e,t,i){"use strict";function n(e,t){var i=e.className.split(" ");i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")}function r(e,t){var i=e.className.split(" "),n=i.indexOf(t);n>=0&&i.splice(n,1),e.className=i.join(" ")}i.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},i.remove=function(e,t){e.classList?e.classList.remove(t):r(e,t)},i.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t){"use strict";function i(e,t){return window.getComputedStyle(e)[t]}function n(e,t,i){return"number"==typeof i&&(i=i.toString()+"px"),e.style[t]=i,e}function r(e,t){for(var i in t){var n=t[i];"number"==typeof n&&(n=n.toString()+"px"),e.style[i]=n}return e}var s={};s.e=function(e,t){var i=document.createElement(e);return i.className=t,i},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,s){return"object"==typeof t?r(e,t):"undefined"==typeof s?i(e,t):n(e,t,s)},s.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},t.exports=s},{}],4:[function(e,t){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var i="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(n){return i&&n!==t?!0:(this.element.removeEventListener(e,n,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new i(e),this.eventElements.push(t)),t},n.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},n.prototype.unbind=function(e,t,i){this.eventElement(e).unbind(t,i)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,i){var n=this.eventElement(e),r=function(e){n.unbind(t,r),i(e)};n.bind(t,r)},t.exports=n},{}],5:[function(e,t){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,i){"use strict";var n=e("./class"),r=e("./dom"),s=i.toInt=function(e){return parseInt(e,10)||0},o=i.clone=function(e){if(e){if(e.constructor===Array)return e.map(o);if("object"==typeof e){var t={};for(var i in e)t[i]=o(e[i]);return t}return e}return null};i.extend=function(e,t){var i=o(e);for(var n in t)i[n]=o(t[n]);return i},i.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},i.removePsClasses=function(e){for(var t=n.list(e),i=0;i<t.length;i++){var r=t[i];0===r.indexOf("ps-")&&n.remove(e,r)}},i.outerWidth=function(e){return s(r.css(e,"width"))+s(r.css(e,"paddingLeft"))+s(r.css(e,"paddingRight"))+s(r.css(e,"borderLeftWidth"))+s(r.css(e,"borderRightWidth"))},i.startScrolling=function(e,t){n.add(e,"ps-in-scrolling"),"undefined"!=typeof t?n.add(e,"ps-"+t):(n.add(e,"ps-x"),n.add(e,"ps-y"))},i.stopScrolling=function(e,t){n.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?n.remove(e,"ps-"+t):(n.remove(e,"ps-x"),n.remove(e,"ps-y"))},i.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t){"use strict";var i=e("./plugin/destroy"),n=e("./plugin/initialize"),r=e("./plugin/update");t.exports={initialize:n,update:r,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/dom"),r=e("./instances");t.exports=function(e){var t=r.get(e);t&&(t.event.unbindAll(),n.remove(t.scrollbarX),n.remove(t.scrollbarY),n.remove(t.scrollbarXRail),n.remove(t.scrollbarYRail),i.removePsClasses(e),r.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t){"use strict";function i(e,t){function i(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var o=n.pageY-window.pageYOffset-i(t.scrollbarYRail).top,a=o>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+a*t.containerHeight),r(e),n.stopPropagation()}),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var o=n.pageX-window.pageXOffset-i(t.scrollbarXRail).left,a=o>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+a*t.containerWidth),r(e),n.stopPropagation()})}var n=e("../instances"),r=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t){"use strict";function i(e,t){function i(i){var s=n+i*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=0>s?0:s>o?o:s;var a=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;l(e,"left",a)}var n=null,o=null,c=function(t){i(t.pageX-o),a(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",function(i){o=i.pageX,n=r.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),i.stopPropagation(),i.preventDefault()})}function n(e,t){function i(i){var s=n+i*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=0>s?0:s>o?o:s;var a=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));l(e,"top",a)}var n=null,o=null,c=function(t){i(t.pageY-o),a(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",function(i){o=i.pageY,n=r.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),i.stopPropagation(),i.preventDefault()})}var r=e("../../lib/helper"),s=e("../../lib/dom"),o=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t),n(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t){"use strict";function i(e,t){function i(i,n){var r=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&0>i||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}var s=!1;t.event.bind(e,"mouseenter",function(){s=!0}),t.event.bind(e,"mouseleave",function(){s=!1});var l=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var d=r.matches(t.scrollbarX,":focus")||r.matches(t.scrollbarY,":focus");if(s||d){var h=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(h){if("IFRAME"===h.tagName)h=h.contentDocument.activeElement;else for(;h.shadowRoot;)h=h.shadowRoot.activeElement;if(n.isEditable(h))return}var u=0,p=0;switch(c.which){case 37:u=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:p=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:u=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:p=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:p=90;break;case 32:p=c.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:p=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}a(e,"top",e.scrollTop-p),a(e,"left",e.scrollLeft+u),o(e),l=i(u,p),l&&c.preventDefault()}}})}var n=e("../../lib/helper"),r=e("../../lib/dom"),s=e("../instances"),o=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t){"use strict";function i(e,t){function i(i,n){var r=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&0>i||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,i=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof i)&&(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=e.wheelDelta),e.shiftKey?[-i,-t]:[t,i]}function o(t,i){var n=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){if(!window.getComputedStyle(n).overflow.match(/(scroll|auto)/))return!1;var r=n.scrollHeight-n.clientHeight;if(r>0&&!(0===n.scrollTop&&i>0||n.scrollTop===r&&0>i))return!0;var s=n.scrollLeft-n.clientWidth;if(s>0&&!(0===n.scrollLeft&&0>t||n.scrollLeft===s&&t>0))return!0}return!1}function a(a){var c=n(a),d=c[0],h=c[1];o(d,h)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(h?s(e,"top",e.scrollTop-h*t.settings.wheelSpeed):s(e,"top",e.scrollTop+d*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(d?s(e,"left",e.scrollLeft+d*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-h*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-h*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+d*t.settings.wheelSpeed)),r(e),l=l||i(d,h),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)
}var n=e("../instances"),r=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t){"use strict";function i(e,t){t.event.bind(e,"scroll",function(){r(e)})}var n=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19}],15:[function(e,t){"use strict";function i(e,t){function i(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){return r.get(e)?(o(e,"top",e.scrollTop+d.top),o(e,"left",e.scrollLeft+d.left),void s(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),n.stopScrolling(e)}var c=null,d={top:0,left:0},h=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(i())?h=!0:(h=!1,l())}),t.event.bind(window,"mouseup",function(){h&&(h=!1,l())}),t.event.bind(window,"keyup",function(){h&&(h=!1,l())}),t.event.bind(window,"mousemove",function(t){if(h){var i={x:t.pageX,y:t.pageY},r={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};i.x<r.left+3?(d.left=-5,n.startScrolling(e,"x")):i.x>r.right-3?(d.left=5,n.startScrolling(e,"x")):d.left=0,i.y<r.top+3?(d.top=r.top+3-i.y<5?-5:-20,n.startScrolling(e,"y")):i.y>r.bottom-3?(d.top=i.y-r.bottom+3<5?5:20,n.startScrolling(e,"y")):d.top=0,0===d.top&&0===d.left?l():a()}})}var n=e("../../lib/helper"),r=e("../instances"),s=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){var t=r.get(e);i(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t){"use strict";function i(e,t,i,n){function a(i,n){var r=e.scrollTop,s=e.scrollLeft,o=Math.abs(i),a=Math.abs(n);if(a>o){if(0>n&&r===t.contentHeight-t.containerHeight||n>0&&0===r)return!t.settings.swipePropagation}else if(o>a&&(0>i&&s===t.contentWidth-t.containerWidth||i>0&&0===s))return!t.settings.swipePropagation;return!0}function l(t,i){o(e,"top",e.scrollTop-i),o(e,"left",e.scrollLeft-t),s(e)}function c(){y=!0}function d(){y=!1}function h(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function p(e){if(u(e)){x=!0;var t=h(e);m.pageX=t.pageX,m.pageY=t.pageY,v=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function f(e){if(!x&&t.settings.swipePropagation&&p(e),!y&&x&&u(e)){var i=h(e),n={pageX:i.pageX,pageY:i.pageY},r=n.pageX-m.pageX,s=n.pageY-m.pageY;l(r,s),m=n;var o=(new Date).getTime(),c=o-v;c>0&&(_.x=r/c,_.y=s/c,v=o),a(r,s)&&(e.stopPropagation(),e.preventDefault())}}function g(){!y&&x&&(x=!1,clearInterval(b),b=setInterval(function(){return r.get(e)&&(_.x||_.y)?Math.abs(_.x)<.01&&Math.abs(_.y)<.01?void clearInterval(b):(l(30*_.x,30*_.y),_.x*=.8,void(_.y*=.8)):void clearInterval(b)},10))}var m={},v=0,_={},b=null,y=!1,x=!1;i&&(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",d),t.event.bind(e,"touchstart",p),t.event.bind(e,"touchmove",f),t.event.bind(e,"touchend",g)),n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",d),t.event.bind(e,"pointerdown",p),t.event.bind(e,"pointermove",f),t.event.bind(e,"pointerup",g)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",d),t.event.bind(e,"MSPointerDown",p),t.event.bind(e,"MSPointerMove",f),t.event.bind(e,"MSPointerUp",g)))}var n=e("../../lib/helper"),r=e("../instances"),s=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){if(n.env.supportsTouch||n.env.supportsIePointer){var t=r.get(e);i(e,t,n.env.supportsTouch,n.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/class"),r=e("./instances"),s=e("./update-geometry"),o={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},a=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},n.add(e,"ps-container");var l=r.add(e);l.settings=i.extend(l.settings,t),n.add(e,"ps-theme-"+l.settings.theme),l.settings.handlers.forEach(function(t){o[t](e)}),a(e),s(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,i){"use strict";function n(e){function t(){l.add(e,"ps-focus")}function i(){l.remove(e,"ps-focus")}var n=this;n.settings=a.clone(c),n.containerWidth=null,n.containerHeight=null,n.contentWidth=null,n.contentHeight=null,n.isRtl="rtl"===d.css(e,"direction"),n.isNegativeScroll=function(){var t=e.scrollLeft,i=null;return e.scrollLeft=-1,i=e.scrollLeft<0,e.scrollLeft=t,i}(),n.negativeScrollAdjustment=n.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.event=new h,n.ownerDocument=e.ownerDocument||document,n.scrollbarXRail=d.appendTo(d.e("div","ps-scrollbar-x-rail"),e),n.scrollbarX=d.appendTo(d.e("div","ps-scrollbar-x"),n.scrollbarXRail),n.scrollbarX.setAttribute("tabindex",0),n.event.bind(n.scrollbarX,"focus",t),n.event.bind(n.scrollbarX,"blur",i),n.scrollbarXActive=null,n.scrollbarXWidth=null,n.scrollbarXLeft=null,n.scrollbarXBottom=a.toInt(d.css(n.scrollbarXRail,"bottom")),n.isScrollbarXUsingBottom=n.scrollbarXBottom===n.scrollbarXBottom,n.scrollbarXTop=n.isScrollbarXUsingBottom?null:a.toInt(d.css(n.scrollbarXRail,"top")),n.railBorderXWidth=a.toInt(d.css(n.scrollbarXRail,"borderLeftWidth"))+a.toInt(d.css(n.scrollbarXRail,"borderRightWidth")),d.css(n.scrollbarXRail,"display","block"),n.railXMarginWidth=a.toInt(d.css(n.scrollbarXRail,"marginLeft"))+a.toInt(d.css(n.scrollbarXRail,"marginRight")),d.css(n.scrollbarXRail,"display",""),n.railXWidth=null,n.railXRatio=null,n.scrollbarYRail=d.appendTo(d.e("div","ps-scrollbar-y-rail"),e),n.scrollbarY=d.appendTo(d.e("div","ps-scrollbar-y"),n.scrollbarYRail),n.scrollbarY.setAttribute("tabindex",0),n.event.bind(n.scrollbarY,"focus",t),n.event.bind(n.scrollbarY,"blur",i),n.scrollbarYActive=null,n.scrollbarYHeight=null,n.scrollbarYTop=null,n.scrollbarYRight=a.toInt(d.css(n.scrollbarYRail,"right")),n.isScrollbarYUsingRight=n.scrollbarYRight===n.scrollbarYRight,n.scrollbarYLeft=n.isScrollbarYUsingRight?null:a.toInt(d.css(n.scrollbarYRail,"left")),n.scrollbarYOuterWidth=n.isRtl?a.outerWidth(n.scrollbarY):null,n.railBorderYWidth=a.toInt(d.css(n.scrollbarYRail,"borderTopWidth"))+a.toInt(d.css(n.scrollbarYRail,"borderBottomWidth")),d.css(n.scrollbarYRail,"display","block"),n.railYMarginHeight=a.toInt(d.css(n.scrollbarYRail,"marginTop"))+a.toInt(d.css(n.scrollbarYRail,"marginBottom")),d.css(n.scrollbarYRail,"display",""),n.railYHeight=null,n.railYRatio=null}function r(e){return e.getAttribute("data-ps-id")}function s(e,t){e.setAttribute("data-ps-id",t)}function o(e){e.removeAttribute("data-ps-id")}var a=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),d=e("../lib/dom"),h=e("../lib/event-manager"),u=e("../lib/guid"),p={};i.add=function(e){var t=u();return s(e,t),p[t]=new n(e),p[t]},i.remove=function(e){delete p[r(e)],o(e)},i.get=function(e){return p[r(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t){"use strict";function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function n(e,t){var i={width:t.railXWidth};i.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:e.scrollLeft,t.isScrollbarXUsingBottom?i.bottom=t.scrollbarXBottom-e.scrollTop:i.top=t.scrollbarXTop+e.scrollTop,o.css(t.scrollbarXRail,i);var n={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?n.right=t.isRtl?t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:t.scrollbarYRight-e.scrollLeft:n.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:t.scrollbarYLeft+e.scrollLeft,o.css(t.scrollbarYRail,n),o.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),o.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var r=e("../lib/helper"),s=e("../lib/class"),o=e("../lib/dom"),a=e("./instances"),l=e("./update-scroll");t.exports=function(e){var t=a.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var c;e.contains(t.scrollbarXRail)||(c=o.queryChildren(e,".ps-scrollbar-x-rail"),c.length>0&&c.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(c=o.queryChildren(e,".ps-scrollbar-y-rail"),c.length>0&&c.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,r.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=r.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,r.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=r.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),n(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,l(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,l(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t){"use strict";var i,n,r=e("./instances"),s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,o){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof o)throw"You must provide a value to the update-scroll function";"top"===t&&0>=o&&(e.scrollTop=o=0,e.dispatchEvent(s("ps-y-reach-start"))),"left"===t&&0>=o&&(e.scrollLeft=o=0,e.dispatchEvent(s("ps-x-reach-start")));var a=r.get(e);"top"===t&&o>=a.contentHeight-a.containerHeight&&(o=a.contentHeight-a.containerHeight,o-e.scrollTop<=1?o=e.scrollTop:e.scrollTop=o,e.dispatchEvent(s("ps-y-reach-end"))),"left"===t&&o>=a.contentWidth-a.containerWidth&&(o=a.contentWidth-a.containerWidth,o-e.scrollLeft<=1?o=e.scrollLeft:e.scrollLeft=o,e.dispatchEvent(s("ps-x-reach-end"))),i||(i=e.scrollTop),n||(n=e.scrollLeft),"top"===t&&i>o&&e.dispatchEvent(s("ps-scroll-up")),"top"===t&&o>i&&e.dispatchEvent(s("ps-scroll-down")),"left"===t&&n>o&&e.dispatchEvent(s("ps-scroll-left")),"left"===t&&o>n&&e.dispatchEvent(s("ps-scroll-right")),"top"===t&&(e.scrollTop=i=o,e.dispatchEvent(s("ps-scroll-y"))),"left"===t&&(e.scrollLeft=n=o,e.dispatchEvent(s("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/dom"),r=e("./instances"),s=e("./update-geometry"),o=e("./update-scroll");t.exports=function(e){var t=r.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.css(t.scrollbarXRail,"display","block"),n.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=i.toInt(n.css(t.scrollbarXRail,"marginLeft"))+i.toInt(n.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=i.toInt(n.css(t.scrollbarYRail,"marginTop"))+i.toInt(n.css(t.scrollbarYRail,"marginBottom")),n.css(t.scrollbarXRail,"display","none"),n.css(t.scrollbarYRail,"display","none"),s(e),o(e,"top",e.scrollTop),o(e,"left",e.scrollLeft),n.css(t.scrollbarXRail,"display",""),n.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return r(i?i:t)},d,d.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e){"use strict";var t=e("../main");"function"==typeof define&&define.amd?define(t):(window.PerfectScrollbar=t,"undefined"==typeof window.Ps&&(window.Ps=t))},{"../main":7}],2:[function(e,t,i){"use strict";function n(e,t){var i=e.className.split(" ");i.indexOf(t)<0&&i.push(t),e.className=i.join(" ")}function r(e,t){var i=e.className.split(" "),n=i.indexOf(t);n>=0&&i.splice(n,1),e.className=i.join(" ")}i.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},i.remove=function(e,t){e.classList?e.classList.remove(t):r(e,t)},i.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t){"use strict";function i(e,t){return window.getComputedStyle(e)[t]}function n(e,t,i){return"number"==typeof i&&(i=i.toString()+"px"),e.style[t]=i,e}function r(e,t){for(var i in t){var n=t[i];"number"==typeof n&&(n=n.toString()+"px"),e.style[i]=n}return e}var s={};s.e=function(e,t){var i=document.createElement(e);return i.className=t,i},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,s){return"object"==typeof t?r(e,t):"undefined"==typeof s?i(e,t):n(e,t,s)},s.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},t.exports=s},{}],4:[function(e,t){"use strict";var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var i="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(n){return i&&n!==t?!0:(this.element.removeEventListener(e,n,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new i(e),this.eventElements.push(t)),t},n.prototype.bind=function(e,t,i){this.eventElement(e).bind(t,i)},n.prototype.unbind=function(e,t,i){this.eventElement(e).unbind(t,i)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,i){var n=this.eventElement(e),r=function(e){n.unbind(t,r),i(e)};n.bind(t,r)},t.exports=n},{}],5:[function(e,t){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,i){"use strict";var n=e("./class"),r=e("./dom"),s=i.toInt=function(e){return parseInt(e,10)||0},o=i.clone=function(e){if(e){if(e.constructor===Array)return e.map(o);if("object"==typeof e){var t={};for(var i in e)t[i]=o(e[i]);return t}return e}return null};i.extend=function(e,t){var i=o(e);for(var n in t)i[n]=o(t[n]);return i},i.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},i.removePsClasses=function(e){for(var t=n.list(e),i=0;i<t.length;i++){var r=t[i];0===r.indexOf("ps-")&&n.remove(e,r)}},i.outerWidth=function(e){return s(r.css(e,"width"))+s(r.css(e,"paddingLeft"))+s(r.css(e,"paddingRight"))+s(r.css(e,"borderLeftWidth"))+s(r.css(e,"borderRightWidth"))},i.startScrolling=function(e,t){n.add(e,"ps-in-scrolling"),"undefined"!=typeof t?n.add(e,"ps-"+t):(n.add(e,"ps-x"),n.add(e,"ps-y"))},i.stopScrolling=function(e,t){n.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?n.remove(e,"ps-"+t):(n.remove(e,"ps-x"),n.remove(e,"ps-y"))},i.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t){"use strict";var i=e("./plugin/destroy"),n=e("./plugin/initialize"),r=e("./plugin/update");t.exports={initialize:n,update:r,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/dom"),r=e("./instances");t.exports=function(e){var t=r.get(e);t&&(t.event.unbindAll(),n.remove(t.scrollbarX),n.remove(t.scrollbarY),n.remove(t.scrollbarXRail),n.remove(t.scrollbarYRail),i.removePsClasses(e),r.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t){"use strict";function i(e,t){function i(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var o=n.pageY-window.pageYOffset-i(t.scrollbarYRail).top,a=o>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+a*t.containerHeight),r(e),n.stopPropagation()}),t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var o=n.pageX-window.pageXOffset-i(t.scrollbarXRail).left,a=o>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+a*t.containerWidth),r(e),n.stopPropagation()})}var n=e("../instances"),r=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t){"use strict";function i(e,t){function i(i){var s=n+i*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=0>s?0:s>o?o:s;var a=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;l(e,"left",a)}var n=null,o=null,c=function(t){i(t.pageX-o),a(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",function(i){o=i.pageX,n=r.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),i.stopPropagation(),i.preventDefault()})}function n(e,t){function i(i){var s=n+i*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=0>s?0:s>o?o:s;var a=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));l(e,"top",a)}var n=null,o=null,c=function(t){i(t.pageY-o),a(e),t.stopPropagation(),t.preventDefault()},d=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",function(i){o=i.pageY,n=r.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",d),i.stopPropagation(),i.preventDefault()})}var r=e("../../lib/helper"),s=e("../../lib/dom"),o=e("../instances"),a=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t),n(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t){"use strict";function i(e,t){function i(i,n){var r=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&0>i||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}var s=!1;t.event.bind(e,"mouseenter",function(){s=!0}),t.event.bind(e,"mouseleave",function(){s=!1});var l=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var d=r.matches(t.scrollbarX,":focus")||r.matches(t.scrollbarY,":focus");if(s||d){var h=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(h){if("IFRAME"===h.tagName)h=h.contentDocument.activeElement;else for(;h.shadowRoot;)h=h.shadowRoot.activeElement;if(n.isEditable(h))return}var u=0,p=0;switch(c.which){case 37:u=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:p=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:u=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:p=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:p=90;break;case 32:p=c.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:p=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}a(e,"top",e.scrollTop-p),a(e,"left",e.scrollLeft+u),o(e),l=i(u,p),l&&c.preventDefault()}}})}var n=e("../../lib/helper"),r=e("../../lib/dom"),s=e("../instances"),o=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t){"use strict";function i(e,t){function i(i,n){var r=e.scrollTop;if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&0>n)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&0>i||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,i=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof i)&&(t=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=e.wheelDelta),e.shiftKey?[-i,-t]:[t,i]}function o(t,i){var n=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){if(!window.getComputedStyle(n).overflow.match(/(scroll|auto)/))return!1;var r=n.scrollHeight-n.clientHeight;if(r>0&&!(0===n.scrollTop&&i>0||n.scrollTop===r&&0>i))return!0;var s=n.scrollLeft-n.clientWidth;if(s>0&&!(0===n.scrollLeft&&0>t||n.scrollLeft===s&&t>0))return!0}return!1}function a(a){var c=n(a),d=c[0],h=c[1];o(d,h)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(h?s(e,"top",e.scrollTop-h*t.settings.wheelSpeed):s(e,"top",e.scrollTop+d*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(d?s(e,"left",e.scrollLeft+d*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-h*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-h*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+d*t.settings.wheelSpeed)),r(e),l=l||i(d,h),l&&(a.stopPropagation(),a.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",a):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var n=e("../instances"),r=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t){"use strict";function i(e,t){t.event.bind(e,"scroll",function(){r(e)})}var n=e("../instances"),r=e("../update-geometry");t.exports=function(e){var t=n.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19}],15:[function(e,t){"use strict";function i(e,t){function i(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function a(){c||(c=setInterval(function(){return r.get(e)?(o(e,"top",e.scrollTop+d.top),o(e,"left",e.scrollLeft+d.left),void s(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),n.stopScrolling(e)}var c=null,d={top:0,left:0},h=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(i())?h=!0:(h=!1,l())}),t.event.bind(window,"mouseup",function(){h&&(h=!1,l())}),t.event.bind(window,"keyup",function(){h&&(h=!1,l())}),t.event.bind(window,"mousemove",function(t){if(h){var i={x:t.pageX,y:t.pageY},r={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};i.x<r.left+3?(d.left=-5,n.startScrolling(e,"x")):i.x>r.right-3?(d.left=5,n.startScrolling(e,"x")):d.left=0,i.y<r.top+3?(d.top=r.top+3-i.y<5?-5:-20,n.startScrolling(e,"y")):i.y>r.bottom-3?(d.top=i.y-r.bottom+3<5?5:20,n.startScrolling(e,"y")):d.top=0,0===d.top&&0===d.left?l():a()}})}var n=e("../../lib/helper"),r=e("../instances"),s=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){var t=r.get(e);i(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t){"use strict";function i(e,t,i,n){function a(i,n){var r=e.scrollTop,s=e.scrollLeft,o=Math.abs(i),a=Math.abs(n);if(a>o){if(0>n&&r===t.contentHeight-t.containerHeight||n>0&&0===r)return!t.settings.swipePropagation}else if(o>a&&(0>i&&s===t.contentWidth-t.containerWidth||i>0&&0===s))return!t.settings.swipePropagation;return!0}function l(t,i){o(e,"top",e.scrollTop-i),o(e,"left",e.scrollLeft-t),s(e)}function c(){y=!0}function d(){y=!1}function h(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function p(e){if(u(e)){x=!0;var t=h(e);m.pageX=t.pageX,m.pageY=t.pageY,v=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function f(e){if(!x&&t.settings.swipePropagation&&p(e),!y&&x&&u(e)){var i=h(e),n={pageX:i.pageX,pageY:i.pageY},r=n.pageX-m.pageX,s=n.pageY-m.pageY;l(r,s),m=n;var o=(new Date).getTime(),c=o-v;c>0&&(_.x=r/c,_.y=s/c,v=o),a(r,s)&&(e.stopPropagation(),e.preventDefault())}}function g(){!y&&x&&(x=!1,clearInterval(b),b=setInterval(function(){return r.get(e)&&(_.x||_.y)?Math.abs(_.x)<.01&&Math.abs(_.y)<.01?void clearInterval(b):(l(30*_.x,30*_.y),_.x*=.8,void(_.y*=.8)):void clearInterval(b)},10))}var m={},v=0,_={},b=null,y=!1,x=!1;i&&(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",d),t.event.bind(e,"touchstart",p),t.event.bind(e,"touchmove",f),t.event.bind(e,"touchend",g)),n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",d),t.event.bind(e,"pointerdown",p),t.event.bind(e,"pointermove",f),t.event.bind(e,"pointerup",g)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",d),t.event.bind(e,"MSPointerDown",p),t.event.bind(e,"MSPointerMove",f),t.event.bind(e,"MSPointerUp",g)))}var n=e("../../lib/helper"),r=e("../instances"),s=e("../update-geometry"),o=e("../update-scroll");t.exports=function(e){if(n.env.supportsTouch||n.env.supportsIePointer){var t=r.get(e);i(e,t,n.env.supportsTouch,n.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/class"),r=e("./instances"),s=e("./update-geometry"),o={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},a=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},n.add(e,"ps-container");var l=r.add(e);l.settings=i.extend(l.settings,t),n.add(e,"ps-theme-"+l.settings.theme),l.settings.handlers.forEach(function(t){o[t](e)}),a(e),s(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,i){"use strict";function n(e){function t(){l.add(e,"ps-focus")}function i(){l.remove(e,"ps-focus")}var n=this;n.settings=a.clone(c),n.containerWidth=null,n.containerHeight=null,n.contentWidth=null,n.contentHeight=null,n.isRtl="rtl"===d.css(e,"direction"),n.isNegativeScroll=function(){var t=e.scrollLeft,i=null;return e.scrollLeft=-1,i=e.scrollLeft<0,e.scrollLeft=t,i}(),n.negativeScrollAdjustment=n.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.event=new h,n.ownerDocument=e.ownerDocument||document,n.scrollbarXRail=d.appendTo(d.e("div","ps-scrollbar-x-rail"),e),n.scrollbarX=d.appendTo(d.e("div","ps-scrollbar-x"),n.scrollbarXRail),n.scrollbarX.setAttribute("tabindex",0),n.event.bind(n.scrollbarX,"focus",t),n.event.bind(n.scrollbarX,"blur",i),n.scrollbarXActive=null,n.scrollbarXWidth=null,n.scrollbarXLeft=null,n.scrollbarXBottom=a.toInt(d.css(n.scrollbarXRail,"bottom")),n.isScrollbarXUsingBottom=n.scrollbarXBottom===n.scrollbarXBottom,n.scrollbarXTop=n.isScrollbarXUsingBottom?null:a.toInt(d.css(n.scrollbarXRail,"top")),n.railBorderXWidth=a.toInt(d.css(n.scrollbarXRail,"borderLeftWidth"))+a.toInt(d.css(n.scrollbarXRail,"borderRightWidth")),d.css(n.scrollbarXRail,"display","block"),n.railXMarginWidth=a.toInt(d.css(n.scrollbarXRail,"marginLeft"))+a.toInt(d.css(n.scrollbarXRail,"marginRight")),d.css(n.scrollbarXRail,"display",""),n.railXWidth=null,n.railXRatio=null,n.scrollbarYRail=d.appendTo(d.e("div","ps-scrollbar-y-rail"),e),n.scrollbarY=d.appendTo(d.e("div","ps-scrollbar-y"),n.scrollbarYRail),n.scrollbarY.setAttribute("tabindex",0),n.event.bind(n.scrollbarY,"focus",t),n.event.bind(n.scrollbarY,"blur",i),n.scrollbarYActive=null,n.scrollbarYHeight=null,n.scrollbarYTop=null,n.scrollbarYRight=a.toInt(d.css(n.scrollbarYRail,"right")),n.isScrollbarYUsingRight=n.scrollbarYRight===n.scrollbarYRight,n.scrollbarYLeft=n.isScrollbarYUsingRight?null:a.toInt(d.css(n.scrollbarYRail,"left")),n.scrollbarYOuterWidth=n.isRtl?a.outerWidth(n.scrollbarY):null,n.railBorderYWidth=a.toInt(d.css(n.scrollbarYRail,"borderTopWidth"))+a.toInt(d.css(n.scrollbarYRail,"borderBottomWidth")),d.css(n.scrollbarYRail,"display","block"),n.railYMarginHeight=a.toInt(d.css(n.scrollbarYRail,"marginTop"))+a.toInt(d.css(n.scrollbarYRail,"marginBottom")),d.css(n.scrollbarYRail,"display",""),n.railYHeight=null,n.railYRatio=null
}function r(e){return e.getAttribute("data-ps-id")}function s(e,t){e.setAttribute("data-ps-id",t)}function o(e){e.removeAttribute("data-ps-id")}var a=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),d=e("../lib/dom"),h=e("../lib/event-manager"),u=e("../lib/guid"),p={};i.add=function(e){var t=u();return s(e,t),p[t]=new n(e),p[t]},i.remove=function(e){delete p[r(e)],o(e)},i.get=function(e){return p[r(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t){"use strict";function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function n(e,t){var i={width:t.railXWidth};i.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:e.scrollLeft,t.isScrollbarXUsingBottom?i.bottom=t.scrollbarXBottom-e.scrollTop:i.top=t.scrollbarXTop+e.scrollTop,o.css(t.scrollbarXRail,i);var n={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?n.right=t.isRtl?t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:t.scrollbarYRight-e.scrollLeft:n.left=t.isRtl?t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:t.scrollbarYLeft+e.scrollLeft,o.css(t.scrollbarYRail,n),o.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),o.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var r=e("../lib/helper"),s=e("../lib/class"),o=e("../lib/dom"),a=e("./instances"),l=e("./update-scroll");t.exports=function(e){var t=a.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var c;e.contains(t.scrollbarXRail)||(c=o.queryChildren(e,".ps-scrollbar-x-rail"),c.length>0&&c.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(c=o.queryChildren(e,".ps-scrollbar-y-rail"),c.length>0&&c.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,r.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=r.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,r.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=r.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),n(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,l(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,l(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t){"use strict";var i,n,r=e("./instances"),s=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,o){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof o)throw"You must provide a value to the update-scroll function";"top"===t&&0>=o&&(e.scrollTop=o=0,e.dispatchEvent(s("ps-y-reach-start"))),"left"===t&&0>=o&&(e.scrollLeft=o=0,e.dispatchEvent(s("ps-x-reach-start")));var a=r.get(e);"top"===t&&o>=a.contentHeight-a.containerHeight&&(o=a.contentHeight-a.containerHeight,o-e.scrollTop<=1?o=e.scrollTop:e.scrollTop=o,e.dispatchEvent(s("ps-y-reach-end"))),"left"===t&&o>=a.contentWidth-a.containerWidth&&(o=a.contentWidth-a.containerWidth,o-e.scrollLeft<=1?o=e.scrollLeft:e.scrollLeft=o,e.dispatchEvent(s("ps-x-reach-end"))),i||(i=e.scrollTop),n||(n=e.scrollLeft),"top"===t&&i>o&&e.dispatchEvent(s("ps-scroll-up")),"top"===t&&o>i&&e.dispatchEvent(s("ps-scroll-down")),"left"===t&&n>o&&e.dispatchEvent(s("ps-scroll-left")),"left"===t&&o>n&&e.dispatchEvent(s("ps-scroll-right")),"top"===t&&(e.scrollTop=i=o,e.dispatchEvent(s("ps-scroll-y"))),"left"===t&&(e.scrollLeft=n=o,e.dispatchEvent(s("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t){"use strict";var i=e("../lib/helper"),n=e("../lib/dom"),r=e("./instances"),s=e("./update-geometry"),o=e("./update-scroll");t.exports=function(e){var t=r.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.css(t.scrollbarXRail,"display","block"),n.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=i.toInt(n.css(t.scrollbarXRail,"marginLeft"))+i.toInt(n.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=i.toInt(n.css(t.scrollbarYRail,"marginTop"))+i.toInt(n.css(t.scrollbarYRail,"marginBottom")),n.css(t.scrollbarXRail,"display","none"),n.css(t.scrollbarYRail,"display","none"),s(e),o(e,"top",e.scrollTop),o(e,"left",e.scrollLeft),n.css(t.scrollbarXRail,"display",""),n.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.elementResizeDetectorMaker=e()}}(function(){return function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return r(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){"use strict";var i=e("./utils");t.exports=function(e){function t(e,t){t||(t=e,e=0),e>f?f=e:g>e&&(g=e),u[e]||(u[e]=[]),h&&d&&0===p&&s(),u[e].push(t),p++}function n(e){void 0===e&&(e=d),m&&(a(m),m=null),e?s():r()}function r(){for(var e=g;f>=e;e++)for(var t=u[e],i=0;i<t.length;i++){var n=t[i];n()}o()}function s(){m=l(r)}function o(){u={},p=0,f=0,g=0}function a(e){var t=window.clearTimeout;return t(e)}function l(e){var t=function(e){return window.setTimeout(e,0)};return t(e)}e=e||{};var c=e.reporter,d=i.getOption(e,"async",!0),h=i.getOption(e,"auto",!0);h&&!d&&(c&&c.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),d=!0);var u,p,f,g;o();var m;return{add:t,force:n}}},{"./utils":2}],2:[function(e,t){"use strict";function i(e,t,i){var n=e[t];return void 0!==n&&null!==n||void 0===i?n:i}var n=t.exports={};n.getOption=i},{}],3:[function(e,t){"use strict";var i=t.exports={};i.isIE=function(e){function t(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/")}if(!t())return!1;if(!e)return!0;var i=function(){var e,t=3,i=document.createElement("div"),n=i.getElementsByTagName("i");do i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(n[0]);return t>4?t:e}();return e===i},i.isLegacyOpera=function(){return!!window.opera}},{}],4:[function(e,t){"use strict";var i=t.exports={};i.forEach=function(e,t){for(var i=0;i<e.length;i++){var n=t(e[i]);if(n)return n}}},{}],5:[function(e,t){"use strict";var i=e("../browser-detector");t.exports=function(e){function t(e,t){function n(){t(e)}if(!r(e))throw new Error("Element is not detectable by this strategy.");if(i.isIE(8))l(e).object={proxy:n},e.attachEvent("onresize",n);else{var s=r(e);s.contentDocument.defaultView.addEventListener("resize",n)}}function n(e,t,n){function r(e,t){function n(){function n(){if("static"===c.position){e.style.position="relative";var t=function(e,t,i,n){function r(e){return e.replace(/[^-\d\.]/g,"")}var s=i[n];"auto"!==s&&"0"!==r(s)&&(e.warn("An element that is positioned static has style."+n+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+n+" will be set to 0. Element: ",t),t.style[n]=0)};t(o,e,c,"top"),t(o,e,c,"right"),t(o,e,c,"bottom"),t(o,e,c,"left")}}function a(){function i(e,t){return e.contentDocument?void t(e.contentDocument):void setTimeout(function(){i(e,t)},100)}s||n();var r=this;i(r,function(){t(e)})}""!==c.position&&(n(c),s=!0);var d=document.createElement("object");d.style.cssText=r,d.type="text/html",d.onload=a,i.isIE()||(d.data="about:blank"),e.appendChild(d),l(e).object=d,i.isIE()&&(d.data="about:blank")}var r="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",s=!1,c=getComputedStyle(e);l(e).startSizeStyle={width:c.width,height:c.height},a?a.add(n):n()}n||(n=t,t=e,e=null),e=e||{};e.debug;i.isIE(8)?n(t):r(t,n)}function r(e){return l(e).object}function s(e){i.isIE(8)?e.detachEvent("onresize",l(e).object.proxy):e.removeChild(r(e)),delete l(e).object}e=e||{};var o=e.reporter,a=e.batchProcessor,l=e.stateHandler.getState;if(!o)throw new Error("Missing required dependency: reporter.");return{makeDetectable:n,addListener:t,uninstall:s}}},{"../browser-detector":3}],6:[function(e,t){"use strict";var i=e("../collection-utils").forEach;t.exports=function(e){function t(e,t){var i=k(e).listeners;if(!i.push)throw new Error("Cannot add listener to an element that is not detectable.");k(e).listeners.push(t)}function n(e,t,n){function r(){if(e.debug){var i=Array.prototype.slice.call(arguments);i.unshift(C.get(t),"Scroll: "),x.log.apply(null,i)}}function s(){function e(e){return-1!==e.indexOf("px")}var i=getComputedStyle(t);return i.position&&e(i.width)&&e(i.height)}function o(){function s(){var e={},i=getComputedStyle(t);return e.position=i.position,e.width=v(i.width),e.height=v(i.height),e.top=i.top,e.right=i.right,e.bottom=i.bottom,e.left=i.left,e.widthStyle=i.width,e.heightStyle=i.height,e}function o(){var e=s();k(t).startSizeStyle={width:e.widthStyle,height:e.heightStyle}}function a(){k(t).listeners=[]}function l(){r("storeStyle invoked.");var e=s();k(t).style=e}function c(){function n(){if("static"===a.position){t.style.position="relative";var e=function(e,t,i,n){function r(e){return e.replace(/[^-\d\.]/g,"")}var s=i[n];"auto"!==s&&"0"!==r(s)&&(e.warn("An element that is positioned static has style."+n+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+n+" will be set to 0. Element: ",t),t.style[n]=0)};e(x,t,a,"top"),e(x,t,a,"right"),e(x,t,a,"bottom"),e(x,t,a,"left")}}function s(e,t,i,n){return e=e?e+"px":"0",t=t?t+"px":"0",i=i?i+"px":"0",n=n?n+"px":"0","position: absolute; left: "+e+"; top: "+t+"; right: "+n+"; bottom: "+i+"; overflow: scroll; z-index: -1; visibility: hidden;"}function o(){function n(){var n=getComputedStyle(t),s=v(n.width),o=v(n.height);r("Storing current size",s,o),f(t,s,o),w.add(function(){if(e.debug){var i=getComputedStyle(t),n=v(i.width),r=v(i.height);(n!==s||r!==o)&&x.warn(C.get(t),"Scroll: Size changed before updating detector elements.")}p(t,s,o)}),w.add(1,function(){g(t,s,o),i(k(t).listeners,function(e){e(t)})})}r("Scroll detected.");var s=getComputedStyle(t),o=v(s.width),a=v(s.height);(o!==t.lastWidth||a!==t.lastHeight)&&(r("Element size changed."),n())}r("mutateDom invoked.");var a=k(t).style;n(a);var l=j.width,c=j.height,d=s(-(1+l),-(1+c),-c,-l),h=s(0,0,-c,-l),u="position: absolute; left: 0; top: 0;",_=document.createElement("div"),b=document.createElement("div"),y=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div");_.className=S,_.style.cssText=d,b.style.cssText=h,y.style.cssText=u,T.style.cssText=h,P.style.cssText=u+" width: 200%; height: 200%;",b.appendChild(y),T.appendChild(P),_.appendChild(b),_.appendChild(T),t.appendChild(_),k(t).element=_,m(b,"scroll",function(){o()}),m(T,"scroll",function(){o()}),p(t,a.width,a.height)}function d(){r("finalizeDomMutation invoked.");var e=k(t).style;f(t,e.width,e.height),g(t,e.width,e.height)}function h(){n(t)}r("Installing scroll elements..."),o(),a(),r("Element start size",k(t).startSizeStyle),w?(w.add(0,l),w.add(1,c),w.add(2,d),w.add(3,h)):(l(),c(),d(),h())}if(n||(n=t,t=e,e=null),e=e||{},r("Making detectable..."),s())r("Style resolved"),o();else{r("Style not resolved"),r("Polling for style resolution...");var a=setInterval(function(){s()?(r("Poll. Style resolved."),o(),clearTimeout(a)):r("Poll. Style not resolved.")},50)}}function r(e){return k(e).element.childNodes[0]}function s(e){return r(e).childNodes[0]}function o(e){return k(e).element.childNodes[1]}function a(){return 2*j.width+1}function l(){return 2*j.height+1}function c(e){return e+10+a()}function d(e){return e+10+l()}function h(e){return 2*e+a()}function u(e){return 2*e+l()}function p(e,t,i){var n=s(e),r=c(t),o=d(i);n.style.width=r+"px",n.style.height=o+"px"}function f(e,t,i){e.lastWidth=t,e.lastHeight=i}function g(e,t,i){var n=r(e),s=o(e),a=c(t),l=d(i),p=h(t),f=u(i);n.scrollLeft=a,n.scrollTop=l,s.scrollLeft=p,s.scrollTop=f}function m(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)}function v(e){return parseFloat(e.replace(/px/,""))}function _(){var e=500,t=500,i=document.createElement("div");i.style.cssText="position: absolute; width: "+2*e+"px; height: "+2*t+"px; visibility: hidden;";var n=document.createElement("div");n.style.cssText="position: absolute; width: "+e+"px; height: "+t+"px; overflow: scroll; visibility: none; top: "+3*-e+"px; left: "+3*-t+"px; visibility: hidden;",n.appendChild(i),document.body.insertBefore(n,document.body.firstChild);var r=e-n.clientWidth,s=t-n.clientHeight;return document.body.removeChild(n),{width:r,height:s}}function b(e,t){function i(t,i){i=i||function(e){document.head.appendChild(e)};var n=document.createElement("style");return n.innerHTML=t,n.id=e,i(n),n}if(!document.getElementById(e)){var n="/* Created by the element-resize-detector library. */\n";n+="."+t+" > div::-webkit-scrollbar { display: none; }",i(n)}}function y(e){var t=k(e);e.removeChild(t.element),delete t.element}e=e||{};var x=e.reporter,w=e.batchProcessor,k=e.stateHandler.getState,C=e.idHandler,S="erd_scroll_detection_container";if(!x)throw new Error("Missing required dependency: reporter.");var j=_(),T="erd_scroll_detection_scrollbar_style";return b(T,S),{makeDetectable:n,addListener:t,uninstall:y}}},{"../collection-utils":4}],7:[function(e,t){"use strict";function i(e,t,i){var n=e[t];return void 0!==n&&null!==n||void 0===i?n:i}var n=e("./collection-utils").forEach,r=e("./element-utils"),s=e("./listener-handler"),o=e("./id-generator"),a=e("./id-handler"),l=e("./reporter"),c=e("./browser-detector"),d=e("batch-processor"),h=e("./state-handler"),u=e("./detection-strategy/object.js"),p=e("./detection-strategy/scroll.js");t.exports=function(e){function t(e,t,r){function s(e){var t=k.get(e);n(t,function(t){t(e)})}function o(e,t,i){k.add(t,i),e&&i(t)}function a(e){return Array.isArray(e)||void 0!==e.length}function l(e){if(Array.isArray(e))return e;var i=[];return n(t,function(e){i.push(e)}),i}function c(e){return e&&1===e.nodeType}if(r||(r=t,t=e,e={}),!t)throw new Error("At least one element required.");if(!r)throw new Error("Listener required.");if(c(t))t=[t];else{if(!a(t))return _.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=l(t)}var d=0,u=i(e,"callOnAdd",x.callOnAdd),p=i(e,"onReady",function(){}),f=i(e,"debug",x.debug);n(t,function(e){var i=g.get(e);return f&&_.log("Attaching listener to element",i,e),C.isDetectable(e)?(f&&_.log(i,"Already detecable, adding listener."),o(u,e,r),void d++):(f&&_.log(i,"Not detectable."),C.isBusy(e)?(f&&_.log(i,"System busy making it detectable"),o(u,e,r),T[i]=T[i]||[],void T[i].push(function(){d++,d===t.length&&p()})):(f&&_.log(i,"Making detectable..."),C.markBusy(e,!0),w.makeDetectable({debug:f},e,function(e){f&&_.log(i,"onElementDetectable"),C.markAsDetectable(e),C.markBusy(e,!1),w.addListener(e,s),o(u,e,r);var a=getComputedStyle(e);(h.getState(e).startSizeStyle.width!==a.width||h.getState(e).startSizeStyle.height!==a.height)&&s(e),d++,d===t.length&&p(),T[i]&&(n(T[i],function(e){e()}),delete T[i])})))}),d===t.length&&p()}function f(e){k.removeAllListeners(e),w.uninstall(e),h.cleanState(e)}e=e||{};var g=e.idHandler;if(!g){var m=o(),v=a({idGenerator:m,stateHandler:h});g=v}var _=e.reporter;if(!_){var b=_===!1;_=l(b)}var y=i(e,"batchProcessor",d({reporter:_})),x={};x.callOnAdd=!!i(e,"callOnAdd",!0),x.debug=!!i(e,"debug",!1);var w,k=s(g),C=r({stateHandler:h}),S=i(e,"strategy","object"),j={reporter:_,batchProcessor:y,stateHandler:h,idHandler:g};if("scroll"===S&&c.isLegacyOpera()&&(_.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),S="object"),"scroll"===S)w=p(j);else{if("object"!==S)throw new Error("Invalid strategy name: "+S);w=u(j)}var T={};return{listenTo:t,removeListener:k.removeListener,removeAllListeners:k.removeAllListeners,uninstall:f}}},{"./browser-detector":3,"./collection-utils":4,"./detection-strategy/object.js":5,"./detection-strategy/scroll.js":6,"./element-utils":8,"./id-generator":9,"./id-handler":10,"./listener-handler":11,"./reporter":12,"./state-handler":13,"batch-processor":1}],8:[function(e,t){"use strict";t.exports=function(e){function t(e){return!!s(e).isDetectable}function i(e){s(e).isDetectable=!0}function n(e){return!!s(e).busy}function r(e,t){s(e).busy=!!t}var s=e.stateHandler.getState;return{isDetectable:t,markAsDetectable:i,isBusy:n,markBusy:r}}},{}],9:[function(e,t){"use strict";t.exports=function(){function e(){return t++}var t=1;return{generate:e}}},{}],10:[function(e,t){"use strict";t.exports=function(e){function t(e,t){return t||n(e)||i(e),o(e).id}function i(e){var t=s.generate();return o(e).id=t,t}function n(e){return void 0!==o(e).id}function r(e){delete o(e).id}var s=e.idGenerator,o=e.stateHandler.getState;return{get:t,remove:r}}},{}],11:[function(e,t){"use strict";t.exports=function(e){function t(t){return s[e.get(t)]||[]}function i(t,i){var n=e.get(t);s[n]||(s[n]=[]),s[n].push(i)}function n(e,i){for(var n=t(e),r=0,s=n.length;s>r;++r)if(n[r]===i){n.splice(r,1);break}}function r(t){var i=s[e.get(t)];i&&(i.length=0)}var s={};return{get:t,add:i,removeListener:n,removeAllListeners:r}}},{}],12:[function(e,t){"use strict";t.exports=function(e){function t(){}var i={log:t,warn:t,error:t};if(!e&&window.console){var n=function(e,t){e[t]=function(){console[t].apply(console,arguments)}};n(i,"log"),n(i,"warn"),n(i,"error")}return i}},{}],13:[function(e,t){"use strict";function i(e){return e[s]={},n(e)}function n(e){return e[s]||i(e)}function r(e){delete e[s]}var s="_erd";t.exports={initState:i,getState:n,cleanState:r}},{}]},{},[7])(7)}),function(e,t){function i(){var i=e(t).height(),n=e(".hpbx-404-image"),r=e(".hpbx-404-message"),s=r.height(),o=659,a=Math.min(i-s-30,o);n.height(a)}e(function(){e(t).on("resize",i),i()})}(window.jQuery,window,document),function(e,t,i){function n(){null!==u&&(u.volume(0),u.stop(),l())}function r(i){if(!e(this).closest(".hpbx-upload-audio-container").hasClass("hpbx-disabled")){if(i.target&&("checkbox"==i.target.type||"radio"==i.target.type))return u.volume(0),u.stop(),void l();var n=e(this),r=n.data("audio-url"),c=n.data("voicemail-id"),d=n.data("audio-id");null==p||p.data("voicemail-id")!=c||p.data("audio-id")!=d?(null!=f&&t.clearInterval(f),null!=u&&u.pause(),u=new Howl({urls:[r+".ogg",r+".mp3",r+".wav"],onplay:o,onpause:a,onend:l}).play(),m=!0,p=n,g=p.find(".hpbx-audio-progress-bar"),0==g.length&&(g=p.closest(".hpbx-tab-audio-container").find(".hpbx-audio-progress-bar")),0==g.length&&(g=e(".hpbx-audio-progress-bar")),e(".hpbx-table-audio-container").removeClass(_),p.addClass(_),f=t.setInterval(s,v)):m?(u.pause(),m=!1):(u.play(),m=!0)}}function s(){null!=u&&g.width(u.pos()/u._duration*100+"%")}function o(){null!=p&&p.removeClass(b)}function a(){null!=p&&p.addClass(b)}function l(){null!=f&&t.clearInterval(f),p.removeClass(_),p=null,g.width(0)}function c(t){var i=e(this),n=i.closest(".hpbx-upload-audio-container"),r=n.find(".hpbx-audio-is-replaced"),s=n.find("+ .hpbx-audio-selector-container"),o=n.data("default-audio-container-id"),a=e("#"+o);t.stopPropagation(),n.hide(),s.show(),a.removeClass(x),r.prop("checked",!0),setFormLabelsClass()}function d(){var t=e(this),i=t.closest(".hpbx-audio-selector-container"),n=i.data("connected-id"),r=e('.hpbx-audio-selector-container[data-connected-id="'+n+'"]');r.hide(),i.show(),i.toggleClass(y,""!=t.val())}function h(){var t=e(this),i=t.closest(".hpbx-audio-selector-container"),n=i.find('input[type="file"]'),r=i.find(".sg-btn-file-input-label"),s=i.find(".hpbx-tab-form-label"),o=i.data("connected-id"),a=e('.hpbx-audio-selector-container[data-connected-id="'+o+'"]');n.replaceWith(n=n.clone(!0)),r.html(""),s.hide(),s.not(".hpbx-selected").show(),i.removeClass(y),a.show()}var u,p,f,g,m=!1,v=30,_="hpbx-audio-is-active",b="hpbx-audio-is-paused",y="hpbx-audio-is-selected",x="hpbx-hidden";e(function(){e(".hpbx-table-audio-container").on("click",r),e(".hpbx-audio-container-singular").on("click",r),e(".hpbx-audio-container-singular .hpbx-delete").on("click",c),e('.hpbx-audio-selector-container input[type="file"]').on("change",d),e(".hpbx-audio-selector-container .hpbx-delete").on("click",h),e(i).on("hpbx-stop-current-audio-player",n)})}(window.jQuery,window,document),function(e){hpbxInitAutoCompletes(e(".hpbx-autocomplete"))}(window.jQuery,window,document);var hpbxBulkUploadData,hpbxBulkUploadCurrentRow,hpbxBulkUploadCurrentRowData,hpbxBulkUploadNumberOfRowsTotal,hpbxBulkUploadCounter,hpbxBulkUploadSuccessfulCounter,hpbxBulkUploadRemoveRowAnimationDuration=300;!function(e){function t(t){function n(){var t=e(s[o]);initDropdowns(t.find(".chzn-select").removeClass("chzn-done")),s.length>o?(o++,hpbxLoaderSetProgress(++hpbxBulkUploadCounter/hpbxBulkUploadNumberOfRowsTotal*100),setTimeout(n,200)):(o=0,r())}function r(){var n=e(s[o]);i(n),p(n),s.length>o?(o++,hpbxLoaderSetProgress(++hpbxBulkUploadCounter/hpbxBulkUploadNumberOfRowsTotal*100),setTimeout(r,20)):(m(t),v(t),hpbxHideLoader())}var s=t.find("tr"),o=0;hpbxBulkUploadCounter=0,hpbxBulkUploadNumberOfRowsTotal=2*s.length,hpbxShowLoader(),n()}function i(e){e.find('input[type="text"][data-field-name]').on("blur",n),e.find(".hpbx-autocomplete").on("hpbx-autocomplete-item-click",r),e.find("select").on("change",s),e.find(".hpbx-bulk-upload-remove-icon").on("click",x)}function n(t,i,n){var r=e(this);if(1==i){var s=r.closest("td").prev(),o=s.find('> input[type="text"]'),c=s.find("select"),u=c.find("+ .chzn-container");if(r.hasClass("hpbx-bulk-upload-field-device-name")&&a(r),1==o.length){var f=r.hasClass("hpbx-disabled")==o.hasClass("hpbx-disabled");r.toggleClass("hpbx-same-as-left-neighbour",f)}else if(1==c.length){var f=r.hasClass("hpbx-disabled")==u.hasClass("hpbx-disabled");r.toggleClass("hpbx-same-as-left-neighbour",f)}r.hasClass("hpbx-disabled")?h(r):(d(r),r.hasClass("hpbx-bulk-upload-field-email")&&l(r,".hpbx-bulk-upload-field-email",n),r.hasClass("hpbx-bulk-upload-field-number")&&l(r,".hpbx-bulk-upload-field-number",n),r.hasClass("hpbx-bulk-upload-field-device-mac-address")&&l(r,".hpbx-bulk-upload-field-device-mac-address",n))}else p(r.closest("tr"))}function r(){e(this).trigger("blur",[!0,!1])}function s(t,i){var n=e(this);if(1==i){var r=n.find("+ .chzn-container"),s=n.find("+ .chzn-container .chzn-single"),a=n.closest("td").prev(),l=a.find('> input[type="text"]'),c=a.find("select"),u=c.find("+ .chzn-container");if(n.hasClass("hpbx-bulk-upload-field-create-account")&&o(n),1==l.length){var f=r.hasClass("hpbx-disabled")==l.hasClass("hpbx-disabled");s.toggleClass("hpbx-same-as-left-neighbour",f)}else if(1==c.length){var f=r.hasClass("hpbx-disabled")==u.hasClass("hpbx-disabled");s.toggleClass("hpbx-same-as-left-neighbour",f)}n.hasClass("hpbx-disabled")?h(n):d(n)}else p(n.closest("tr"))}function o(e){var t=1==e.val(),i=e.closest("tr");c(i.find(".hpbx-bulk-upload-field-name"),!t),c(i.find(".hpbx-bulk-upload-field-first-name"),t),c(i.find(".hpbx-bulk-upload-field-last-name"),t),c(i.find(".hpbx-bulk-upload-field-email"),t),c(i.find(".hpbx-bulk-upload-field-administrative"),t)}function a(e){var t=0==e.val().length,i=e.closest("tr");c(i.find(".hpbx-bulk-upload-field-device-brand"),t),c(i.find(".hpbx-bulk-upload-field-device-type"),t),c(i.find(".hpbx-bulk-upload-field-device-mac-address"),t)}function l(t,i,n){var r=t.closest("table.hpbx-bulk-upload-table"),s=[];if(r.find(i).each(function(){var i=e(this);i.prop("disabled")||i.val()!=t.val()||s.push(i)}),s.length>1)for(var o=0;o<s.length;o++){var a=s[o],l=a.closest("td");l.addClass("hpbx-invalid"),l.attr("data-invalid-message",l.data("not-unique-message"))}else 1!=n&&r.find(i).trigger("blur",[!0,!0])}function c(e,t){e.prop("disabled")!=t&&(e.toggleClass("hpbx-disabled",t),e.prop("disabled",t).trigger("liszt:updated"),e.closest("td").toggleClass("hpbx-disabled",t),e.find("+.chzn-container").toggleClass("hpbx-disabled",t))}function d(e){var t=e.data("regex");if(null!=t){var i=t.split("___"),n=e.closest("td"),r=n.data("invalid-messages"),s=null!=r?r.split("___"):[],o=[];n.attr("data-invalid-message",""),n.removeClass("hpbx-invalid");for(var a=0;a<i.length;a++){var l=null==e.val().match(new RegExp(i[a],"i"));l&&o.push(s[a])}o.length>0&&(n.addClass("hpbx-invalid"),n.attr("data-invalid-message",o.join(" / ")))}}function h(e){var t=e.closest("td");t.attr("data-invalid-message",""),t.removeClass("hpbx-invalid")}function u(){var t=e(".hpbx-bulk-upload-add-table tr").clone();t.find(".chzn-container").remove(),t.find(".chzn-select").removeClass("chzn-done"),t.find(".hpbx-autocomplete").removeClass("hpbx-delay-init"),e(".hpbx-bulk-upload-table tr:last").after(t),initDropdowns(t.find(".chzn-select")),m(t),deviceDropdownInit(t.find(".hpbx-bulk-upload-field-device-brand")),hpbxInitAutoCompletes(t.find(".hpbx-autocomplete")),e('.hpbx-bulk-upload-table tr:last input[type="text"]').each(function(){e(this).change(function(){sgSetClassCompleted(e(this))})}),i(t),p(e(".hpbx-bulk-upload-table tr:last")),e(".hpbx-bulk-upload-row-can-be-deleted").remove(),v(e(".hpbx-bulk-upload-table")),t.closest(".hpbx-scrollable-container").perfectScrollbar("update")}function p(t){if(null!=t)t.find("select").trigger("change",!0),t.find('input[type="text"][data-field-name]').trigger("blur",[!0,!1]),t.find("select").trigger("change",!0),g(t.find(".hpbx-bulk-upload-remove-container")),f(t);else{var i=e(".hpbx-bulk-upload-table");i.find("select").trigger("change",!0),i.find('input[type="text"][data-field-name]').trigger("blur",[!0,!1]),i.find("select").trigger("change",!0),g(i.find(".hpbx-bulk-upload-remove-container")),f(i.find("tr"))}}function f(t){t.each(function(){var t=e(this);t.toggleClass("hpbx-bulk-upload-invalid",t.find("td.hpbx-invalid").length>0)});var i=e(".hpbx-bulk-upload-table tr.hpbx-bulk-upload-invalid").length>0;e(".hpbx-full-screen-footer-button-start").toggleClass("sg-disabled",i),e(".hpbx-full-screen-footer-button-start").toggleClass("sg-btn-primary",!i)}function g(t){t.each(function(){e(this).toggleClass("hpbx-same-as-left-neighbour",!e(this).prev().hasClass("hpbx-disabled"))})}function m(t){t.find(".chzn-container").each(function(){e(this).find(".chzn-drop").css("width",e(this).width()+50)})}function v(t){t.find(".hpbx-autocomplete").each(function(){e(this).find("+.hpbx-autocomplete-popover").css("min-width",e(this).closest("td").width()+50)})}function _(){var t=e(".hpbx-bulk-upload-table .hpbx-bulk-upload-data-row");b(),t.removeClass("hpbx-bulk-upload-successful hpbx-bulk-upload-unsuccessful"),t.each(y),e(".hpbx-bulk-upload-add").hide(),e(".hpbx-full-screen-footer-button-start").addClass("sg-disabled").removeClass("sg-btn-primary"),hpbxBulkUploadNumberOfRowsTotal=hpbxBulkUploadData.length,hpbxShowLoader(),hpbxBulkUploadSendNextRow()}function b(){hpbxBulkUploadData=[],hpbxBulkUploadCounter=0,hpbxBulkUploadSuccessfulCounter=0}function y(){var t=e(this),i={};i.$row=t,i.data={},t.find("[data-field-name]").each(function(){var t=e(this),n=t.data("field-name"),r=t.val();i.data[n]=r}),hpbxBulkUploadData.push(i)}function x(){var t=e(this).closest(".hpbx-bulk-upload-data-row");hpbxBulkUploadRemoveRow(t),setTimeout(hpbxBulkUploadRemoveRowLastStep,hpbxBulkUploadRemoveRowAnimationDuration,t)}e(function(){var i=e("table.hpbx-bulk-upload-table");e(".hpbx-bulk-upload-add-icon").on("click",u),e(".hpbx-full-screen-footer-button-start").on("click",_),t(i)})}(window.jQuery,window,document),function(e){e(function(){"undefined"==typeof pickadateOptions?(e("#hpbx-call-log-start-date").pickadate({onSet:function(){this.open()}}),e("#hpbx-call-log-end-date").pickadate({onSet:function(){this.open()}})):(e("#hpbx-call-log-start-date").pickadate(pickadateOptions),e("#hpbx-call-log-end-date").pickadate(pickadateOptions))})}(window.jQuery,window,document),function(e){e.fn.cancelZoom=function(){return this.each(cancelZoom)},e("input:text,select,textarea").cancelZoom()}(jQuery),function(e){function t(t){if(void 0!==t.originalEvent&&(n=e(t.target),t.preventDefault(),!n.hasClass("sg-disabled"))){var r=n.data("alert-title"),s=n.data("alert-message"),o=n.data("alert-button-text");hpbxShowAlert("small",r,s,o,i)}}function i(){n.trigger("click"),n.find(".hpbx-click-with-alert-input").trigger("click")}var n;e(function(){e(".hpbx-click-with-alert").on("click",t)})}(window.jQuery,window,document),function(e,t,i){function n(){var t=e(this),n=t.data("custom-change-event");e(i).trigger(n,t)}e(function(){e("[data-custom-change-event]").on("change",n)})}(window.jQuery,window,document),function(e){var t=700,i="hpbx-visible";e(function(){var n=e(".hpbx-graph");n.each(function(){function n(e){for(var t=Math.max.apply(null,e),i=(Math.min.apply(null,e),[]),n=0;n<e.length;n++){var r=e[n],s=r/t*p;i[n]=s}return i}function r(e){for(var t=g/(e.length-1),i=[],n=0;n<e.length;n++)i.push(n*t);return i}function s(){for(var e=1;e<_.length-1;e++){var i=b[e],n=p,r=-_[e]+p;L.line(i,2,i,25).attr({"class":"hpbx-graph-legend-line"}),L.line(i,55,i,78).attr({"class":"hpbx-graph-legend-line"});var s=N.circle(i,n,4.5).attr({"class":"hpbx-graph-dots"});s.data("amount",m[e]),s.data("subAmount",v[e]),s.data("sequenceNumber",e),s.hover(o,a),s.animate({cy:r},t,mina.easeinout)}}function o(){k.html(this.data("amount")),C.html(1==this.data("amount")?P:A),S.html(this.data("subAmount")),j.html(1==this.data("subAmount")?D:M),T.addClass(I),w.addClass(i);var e=2*this.data("sequenceNumber"),t=x.find(".hpbx-graph-legend-line:nth-child("+(e+1)+")"),n=x.find(".hpbx-graph-legend-line:nth-child("+(e+2)+")");t.show(),n.show()}function a(){w.removeClass(i);var e=2*this.data("sequenceNumber"),t=x.find(".hpbx-graph-legend-line:nth-child("+(e+1)+")"),n=x.find(".hpbx-graph-legend-line:nth-child("+(e+2)+")");t.hide(),n.hide()}function l(){for(var e=_.length,t=(Math.max.apply(null,_),Math.min.apply(null,_),0);e>t;t++){var i=b[t];N.line(i,p,i,p-_[t]).attr({"class":"hpbx-graph-grid"})}}function c(e){for(var t="",i=0;i<_.length;i++){var n=b[i],r=-_[i]+p;e||(r-=1),t+=0===i?"M"+n+","+r+" L":i===_.length-1?n+","+r:n+","+r+","}return t}function d(e,i){function n(t){for(var i="M0,"+p+" H",n=0;n<e.length;n++)0!==n&&(i+=b[n]+" ");return t&&(i+="V"+p+" H0 Z"),i}var r=c(!1),s=c(!0)+" V"+p+" H0 Z",o=N.path(n()).attr({"class":"hpbx-graph-line"}),a=N.path(n(!0)).attr({fill:i});
o.animate({path:r},t,mina.easeinout),a.animate({path:s},t,mina.easeinout),l(o)}function h(){for(var t=e(".hpbx-graph-legend"),i=1;i<b.length-1;i++)t.append('<div class="hpbx-graph-legend-item" style="left: '+(b[i]-50)+'px">'+y[i-1]+"</div>")}var u=e(this),p=u.data("height"),f=u.data("svg-id"),g=u.width(),m=u.data("values").split(","),v=u.data("sub-values").split(","),_=n(m),b=r(_),y=u.data("legend").split(","),x=u.closest(".hpbx-graph-container"),w=x.find(".hpbx-graph-info"),k=w.find(".hpbx-graph-info-amount"),C=w.find(".hpbx-graph-info-unit"),S=w.find(".hpbx-graph-info-sub-amount"),j=w.find(".hpbx-graph-info-sub-unit"),T=w.find(".hpbx-graph-info-icon"),P=x.data("info-unit-singular"),A=x.data("info-unit-plural"),D=x.data("info-sub-unit-singular"),M=x.data("info-sub-unit-plural"),I=x.data("info-icon-class"),E=x.find(".hpbx-graph-legend-svg"),O=E.data("svg-id"),N=Snap("#"+f),L=Snap("#"+O);u.height(p),h(),d(_,"white"),s()})})}(window.jQuery,window,document),function(e){function t(){var t=e(this).parent().find(".hpbx-device-footer-input-incognito");t.focus(),t.select()}e(function(){e(".hpbx-device-identifier-edit-icon").on("click",t)}),e.fn.selectRange=function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}})},e("select[data-device-list]").each(function(t,i){var n=e(i);deviceDropdownInit(n)})}(jQuery);var hpbxDialogTrigger;!function(e,t){function i(t){var i=e(t.target).closest(".hpbx-dialog"),n=i.data("result-selector"),r=i.data("ok-event");hpbxDialogTrigger.trigger(r,{value:e(n).val(),dialog:i}),e.magnificPopup.close()}function n(t){t.preventDefault(),e.magnificPopup.close()}e(function(){var r=e(".hpbx-dialog-open-trigger");r.each(function(){var n=e(this),r=n.data("dialog-id"),s=n.data("dialog-close"),o=e(r);hpbxDialogTrigger=n;var a={type:"inline",items:{src:r},midClick:!0,closeOnBgClick:!1,callbacks:{close:function(){if(s)try{t[s]&&t[s]()}catch(e){}}}};n.magnificPopup(a),n.on("click",function(){o.find(".hpbx-scrollable-container").perfectScrollbar("update")}),o.find(".hpbx-dialog-ok").on("click",i)}),e(".hpbx-dialog-close-handle").on("click",n)})}(window.jQuery,window,document),function(e){e(function(){e(".hpbx-file-upload-link").on("click",function(t){t.preventDefault(),e(this).parent().find('+ input[type="file"]').trigger("click")})})}(window.jQuery,window,document),function(e){var t=400;e(".hpbx-foldable-list").each(function(){var i=e(this),n=i.find("> .hpbx-foldable-heading");$footers=i.find("> .hpbx-foldable-footer"),0==n.length&&(n=i.find("> .hpbx-foldable-list-item > .hpbx-foldable-heading"),$footers=i.find("> .hpbx-foldable-list-item > .hpbx-foldable-footer")),0==n.length&&(n=i.find("> .hpbx-foldable-list-item > .hpbx-foldable-heading")),n.each(function(i){var r=e(this);0==i?r.addClass("hpbx-foldable-heading-first"):i==n.length-1&&r.addClass("hpbx-foldable-heading-last"),r.hasClass("hpbx-foldable-state-open")?(r.find(".hpbx-foldable-heading-state").each(function(){var t=e(this);t.html('<span class="hpbx-foldable-heading-state-caption">'+t.data("hide-label")+"</span>")}),r.closest(".hpbx-foldable-list-item").find(".hpbx-foldable-footer").addClass("hpbx-foldable-state-open")):(r.addClass("hpbx-foldable-state-close").find(".hpbx-foldable-heading-state").each(function(){var t=e(this);t.html('<span class="hpbx-foldable-heading-state-caption">'+t.data("show-label")+"</span>")}),r.closest(".hpbx-foldable-list-item").find(".hpbx-foldable-footer").addClass("hpbx-foldable-state-close"),r.find("+ dd").slideUp(t))}).on("click",function(i){if(!e(i.currentTarget).hasClass("hpbx-disabled")){var n=e(this),r=n.hasClass("hpbx-foldable-state-open"),s=n.closest(".hpbx-foldable-list-item"),o=s.find(".hpbx-foldable-footer"),a=n.find(".hpbx-foldable-heading-state");r?(n.find("+ dd").slideUp(t),n.removeClass("hpbx-foldable-state-open").addClass("hpbx-foldable-state-close"),o.removeClass("hpbx-foldable-state-open").addClass("hpbx-foldable-state-close"),a.each(function(){var t=e(this);t.html('<span class="hpbx-foldable-heading-state-caption">'+t.data("show-label")+"</span>")})):(n.removeClass("hpbx-foldable-state-close").addClass("hpbx-foldable-state-open"),o.removeClass("hpbx-foldable-state-close").addClass("hpbx-foldable-state-open"),n.find("+ dd").slideDown(t),a.each(function(){var t=e(this);t.html('<span class="hpbx-foldable-heading-state-caption">'+t.data("hide-label")+"</span>")}))}}),$footers.on("click",function(){e(this).closest(".hpbx-foldable-list-item").find(".hpbx-foldable-heading").trigger("click")})})}(window.jQuery,window,document),function(e,t,i){function n(){var t=e(this),i=t.data("checkbox-id"),n=e('.hpbx-hunting-group-user input[type="checkbox"][data-checkbox-id="'+i+'"]'),r=t.closest(".hpbx-hunting-group-user"),s=r.closest(".hpbx-hunting-group-users"),a=0==s.closest(".hpbx-menu-over-menu").length?d:h,l=r.prev().find('input[type="checkbox"]'),c=r.next().find('input[type="checkbox"]'),u=e(".hpbx-hunting-group-user-count"),p=1,f=0;if(t.prop("checked")!=l.prop("checked")&&t.prop("checked")!=c.prop("checked")){var g=s.find(".hpbx-selected:last");1==t.prop("checked")&&0==g.length?s.prepend(r):r.insertAfter(g)}n.each(function(){var i=e(this);i.attr("id")!=t.attr("id")&&(i.prop("checked",t.prop("checked")),o(i))}),o(t),s.children().each(function(){var t=e(this),i=t.find('input[type="hidden"]'),n=t.find('input[type="checkbox"]'),r=n.data("checkbox-id"),s=a.find('input[type="checkbox"][data-checkbox-id="'+r+'"]'),o=s.closest(".hpbx-hunting-group-user"),l=o.find('input[type="hidden"]');a.append(o),i.val(1==n.prop("checked")?p:0),l.val(1==n.prop("checked")?p:0),p++,1==n.prop("checked")&&f++});try{var m=u.data(0==f?"default-label":f>1?"plural-label":"singular-label").replace("{0}",f);u.html(m)}catch(v){}e(".hpbx-hunting-group-select-all input").prop("checked",s.find('input[type="checkbox"]').length==s.find("input:checked").length)}function r(){var t=e(this),i=e('.hpbx-hunting-group-user input[type="checkbox"]');i.prop("checked",t.prop("checked")).trigger("change"),t.closest(".hpbx-menu-over-menu").length>0?e(".hpbx-main-content .hpbx-hunting-group-select-all input").prop("checked",t.prop("checked")):e(".hpbx-menu-over-menu .hpbx-hunting-group-select-all input").prop("checked",t.prop("checked"))}function s(){var t=e(this);e(".hpbx-hunting-group-user").each(function(){var i=e(this),n=i.find(".hpbx-hunting-group-user-name").html().toLowerCase().indexOf(t.val().toLowerCase())>-1,r=i.find(".hpbx-hunting-group-user-phone").html().toLowerCase().indexOf(t.val().toLowerCase())>-1;i.toggle(n||r)})}function o(e){e.closest(".hpbx-hunting-group-user").toggleClass(c,e.prop("checked"))}function a(){e(i.body).addClass("hpbx-contains-menu-over-menu")}function l(t,i){var n=i.item.find('input[type="checkbox"]'),r=i.item.closest(".hpbx-hunting-group-users"),s=!0;r.first().children().each(function(){var t=e(this),i=t.find('input[type="checkbox"]');n.data("checkbox-id")==i.data("checkbox-id")&&(n.prop("checked",s),n.trigger("change")),s=i.prop("checked")})}var c="hpbx-selected",d=e(".hpbx-menu-over-menu .hpbx-hunting-group-users"),h=e(".hpbx-main-content .hpbx-hunting-group-users");e(function(){e('.hpbx-hunting-group-user input[type="checkbox"]').on("change",n),e('.hpbx-hunting-group-select-all input[type="checkbox"]').on("change",r),e(".hpbx-hunting-group-search-input").on("change keyup",s),e(".hpbx-drag-drop-sortable").sortable({stop:l,start:function(){"WebkitAppearance"in i.documentElement.style&&(scrolltop=e(t).scrollTop())},sort:function(e,t){"WebkitAppearance"in i.documentElement.style&&t.helper.css({top:t.position.top+scrolltop+"px"})}}),e(".hpbx-menu-over-menu").length>0&&t.setTimeout(a,1),e('.hpbx-hunting-group-user input[type="checkbox"]').trigger("change")})}(window.jQuery,window,document),$(function(){/iPhone|iPod|iPad/.test(navigator.userAgent)&&$("iframe").wrap(function(){var e=$(this);return $("<div />").css({width:e.attr("width"),height:e.attr("height"),overflow:"auto","-webkit-overflow-scrolling":"touch"})})}),function(e,t,i){function n(){var n=0,r=e(".hpbx-menu"),s=e(i.body),o=e(".hpbx-menu-over-menu:visible").length>0&&250==r.width();if(o&&!s.hasClass(u)){var a=r.find(".hpbx-menu-over-menu-title-container"),l=r.find(".hpbx-hunting-group-search-container"),c=r.find(".hpbx-hunting-group-users"),d=c.length>0,p=r.find(".hpbx-device-subscriber-table"),f=p.length>0,g=e(".hpbx-device-header"),m=e(".hpbx-device-footer");d?(n+=1==a.length?a.height():0,n+=1==l.length?l.height():0,n+=1==c.length?c.height():0):f&&(n+=1==p.length?p.height():0,n+=1==g.length?g.height():0,n+=1==m.length?m.height():0)}else{var v=r.find(".hpbx-menu-items"),_=r.find(".hpbx-menu-items-sub");n+=1==v.length?v.height():0,n+=1==_.length?_.height():0}e(t).height()<n?(s.addClass(h),r.height(Math.max(s.height(),s.height))):s.removeClass(h),s.height()>n&&s.height()>e(t).height()?(r.height(s.height()),o&&r.width()<250):r.height("auto"),o||e(".hpbx-menu-over-menu").height("auto"),s.css("position","")}function r(){e(i.body).toggleClass(u),n(),setTimeout(o,500),setTimeout(a,600),setTimeout(s)}function s(){e(t).width()<480&&e("html, body").animate({scrollTop:"0px"})}function o(){e(i.body).addClass("vrm-android-fix")}function a(){e(i.body).removeClass("vrm-android-fix")}function l(t){t.preventDefault();var i=e(t.target).closest(".hpbx-menu-item"),r=i.data("item-id"),s=e('.hpbx-menu-item-sub[data-parent-id="'+r+'"]');i.toggleClass(p),s.toggleClass(p),n()}function c(){e(".hpbx-menu-item-user .hpbx-menu-item-title-container").each(function(){var t=e(this);t.height()>20&&t.addClass("hpbx-menu-item-user-title-container-multiple-lines")})}function d(){e("body").addClass("hpbx-show-menu-over-menu")}var h="hpbx-menu-in-page-flow",u="hpbx-menu-opened",p="hpbx-menu-item-sub-opened";e(function(){void 0!==t.elementResizeDetectorMaker&&(elementResizeDetectorMaker().listenTo(e(".hpbx-body-background-color"),n),elementResizeDetectorMaker().listenTo(e(".hpbx-main-content"),n)),e(".hpbx-menu-handle, .hpbx-body-menu-opened-overlay").on("click",r),e(".hpbx-menu-item-sub[data-item-id]").on("click",l),n(),c(),d(),setTimeout(o,100),setTimeout(a,200)})}(window.jQuery,window,document),function(e,t,i){e("html:not(.ie8) .hpbx-deletable-row").each(function(){{var t=e(this);t.find(".hpbx-tab-form-label-field-row")}}),(location.href.indexOf("http://lgi-hpbx.acceptance.fronteers.trimm.nl/")>-1||location.href.indexOf("http://localhost")>-1||location.href.indexOf(".ngrok.io")>-1)&&e(i).on("keyup",function(e){switch(e.keyCode){case 85:switchStyleguide("/dist/css/all-upc-business.min.css");break;case 86:switchStyleguide("/dist/css/all-virgin.min.css");break;case 90:switchStyleguide("/dist/css/all-ziggo.min.css");break;case 77:switchStyleguide("/dist/css/all-unitymedia.min.css");break;case 84:switchStyleguide("/dist/css/all-vtr.min.css")}})}(window.jQuery,window,document),function(e,t,i){function n(t,i){var n=i.dialog.find(i.dialog.data("result-selector")),s=n.closest(".hpbx-audio-container"),o=s.find(".hpbx-table-music-title").html(),a=e(this),l=a.closest(".hpbx-audio-selector-container"),c=l.data("connected-id"),d=e('.hpbx-audio-selector-container[data-connected-id="'+c+'"]');d.hide(),l.find(".hpbx-tab-form-label").hide(),l.find(".hpbx-tab-form-label.hpbx-selected").html(o).show(),l.show(),l.toggleClass(r,null!=i.value)}var r="hpbx-audio-is-selected";e(function(){e(".hpbx-audio-selector-library-link").on("hpbx-dialog-ok-music-on-hold",n)}),t.hpbxMusicLibraryCloseHandler=function(){e(i).trigger("hpbx-stop-current-audio-player")}}(window.jQuery,window,document),function(e){e(".hpbx-notification").each(function(){var t=e(this);t.hasClass("hpbx-notification-error")||t.delay(7e3).slideUp()}),e(".hpbx-notification-close-button").on("click",function(){e(this).closest(".hpbx-notification").slideUp()})}(window.jQuery,window,document),function(e){function t(t){var r="#"+t.data("svg-id"),s=t.data("value"),o=e(r).width(),a=o/100*s;if(r&&s){var l=Snap(r);l.line(0,i/2,o,i/2).attr({"class":"hpbx-percentage-display-background-line"});var c="M0 "+i/2+" H"+a,d=l.line(0,i/2,0,i/2),h=l.circle(0,i/2,i/2-1),u=Snap.path.getTotalLength(c);Snap.animate(0,u,function(e){var t=Snap.path.getPointAtLength(c,e);d.attr({x2:t.x}),h.attr({cx:t.x})},n,mina.easeinout)}}var i=11,n=700;e(function(){e(".hpbx-percentage-display").each(function(){t(e(this))})})}(window.jQuery,window,document),function(e){function t(e){for(var t="#"+e.data("svg-id"),l=e.data("percentages").toString().split(","),c=e.data("labels").split(","),d=100,h=3.6*l[0]-90,u=e.hasClass("hpbx-pie-chart-small"),p=u?s:r,f=100,g=Snap(t),m=(g.circle(p/2,p/2,p/2).attr({"class":"hpbx-pie-chart-background"}),g.circle(p/2,p/2,(p-2*o+3)/2).attr({"class":"hpbx-pie-chart-background"}),l.length-1);m>=0;m--){var d=parseInt(l[m]),h=3.6*f-90,v=polarToCartesian(p/2,p/2,p/2-(o/2-1),h);100==f&&(v[0]=p/2-.01);var _=m%4+1;m==l.length-1&&m%4==0&&(_=2);var b=generateAndAnimatePartialCircle(p/2,p/2,p/2-9,v[0],v[1],"hpbx-pie-chart-arc hpbx-pie-chart-color-"+_,g,a);b.hover(i,n),b.attr({label:c[m]+" "+d+"%",number:m+1}),f-=parseInt(d)}generateAndAnimatePartialCircle(p/2,p/2,p/2+2,p/2-.01,-2,"hpbx-pie-chart-edge-arc",g,a),generateAndAnimatePartialCircle(p/2,p/2,p/2-20,p/2-.01,20,"hpbx-pie-chart-edge-arc",g,a)}function i(t){var i=e(t.target);if(i.length>0){var n=i.closest(".hpbx-pie-chart-container"),r=n.find(".hpbx-pie-chart-tooltip");r.html(i.attr("label")),r.addClass("hpbx-pie-chart-color-"+i.attr("number"))}}function n(){var t=e(".hpbx-pie-chart-tooltip");t.html(""),t.removeClass(function(e,t){var i=t.split(" "),n=i.filter(function(e){return e.indexOf("hpbx-pie-chart-color-")>-1});return n.join(" ")})}var r=150,s=80,o=20,a=700;e(function(){e(".hpbx-pie-chart").each(function(){t(e(this))}),e(".hpbx-pie-chart-tooltip").css("left",.82*r)})}(window.jQuery,window,document),function(e){function t(e){{var t="#"+e.data("svg-id"),o=e.data("value"),a=e.data("total"),l=0==a?0:Math.min(99.99,o/a*100),c=0==l?-89:3.6*l-90,d=e.hasClass("hpbx-progress-circle-small"),h=d?r:n,u=Snap(t);u.circle(h/2,h/2,h/2).attr({"class":"hpbx-progress-circle-background"})}u.line(h/2,d?-3:-5,h/2,d?4:6);var p=u.paper.path("m"+h/2+" 0").attr({"class":"hpbx-progress-circle-arc"}),f=u.circle(h/2,0,d?3.5:4.5),g=polarToCartesian(h/2,h/2,h/2,c),m=i(g[0],g[1],h),v=Snap.path.getTotalLength(m);Snap.animate(0,v,function(e){var t=Snap.path.getPointAtLength(m,e),n=i(t.x,t.y,h);p.attr({path:n}),f.attr({cx:t.x,cy:t.y})},s,mina.easeinout)}function i(e,t,i){var n="m"+i/2+" 0";return n+="A "+i/2+" "+i/2+" , 0, ",n+=i/2>e?"1, ":"0, ",n+="1, ",n+=e+" "+t}var n=150,r=80,s=700;e(function(){e(".hpbx-progress-circle").each(function(){t(e(this))})})}(window.jQuery,window,document),function(e){function t(){var t=e(this),i=0==t.prop("checked"),n=t.closest(".hpbx-foldable-heading"),r=n.next(".hpbx-foldable-content"),s=r.find("input"),o=r.find("select"),a=r.find(".hpbx-upload-audio-container");s.toggleClass("sg-disabled",i).prop("disabled",i),s.closest(".sg-btn").toggleClass("sg-disabled",i),o.prop("disabled",i).trigger("liszt:updated"),a.toggleClass("hpbx-disabled",i)}function i(e){e.stopPropagation()}e(function(){var n=e('[data-toggle-type="hpbx-queue-toggle"]');n.on("change",t),n.closest(".sg-custom-toggle").on("click",i)})}(window.jQuery,window,document),function(e){e("form").on("submit",function(t){var i=e(this);i.find("[data-validation-regex]").trigger("validate"),i.data("valid")===!1&&t.preventDefault()}),e("[data-validation-regex]").each(function(t,i){var n=e(i),r=n.closest("form"),s=n.data("validation-regex"),o=void 0!==s?s.split("___"):[],a=n.data("invalid-messages"),l=void 0!==a?a.split("___"):[];0!==o.length&&n.on("blur validate",function(){var t=!1,i=[],s=n.next('[class="sg-input-error"]');s.is('[class="sg-input-error"]')&&s.remove(),r.data("valid",!0),n.removeClass("sg-error");for(var a=0;a<o.length;a++)null==n.val().match(new RegExp(o[a],"i"))&&(t=!0,n.addClass("sg-error"),i.push(l[a]));t&&(r.data("valid",!1),e('<div class="sg-input-error"></div>').text(l.join(" / ")).insertAfter(n))})})}(window.jQuery,window,document),function(e){e(function(){0==e(".ie8").length&&e(".hpbx-scrollable-container").each(function(){var t=e(this);t.perfectScrollbar(t.hasClass("hpbx-also-horizontal")?{maxScrollbarLength:263,minScrollbarLength:263}:{maxScrollbarLength:263,minScrollbarLength:263,suppressScrollX:!0})})})}(window.jQuery,window,document),function(e){function t(){var t=e(this),i=(t.data("show-type"),e("[data-show-type][data-is-show-type-child], [data-hide-type][data-is-show-type-child]"));i.each(function(){var i=e(this);if(i.data("show-value")){var n=i.data("show-value");i.toggle(t.val()==n)}if(i.data("hide-value")){var n=i.data("hide-value");i.toggle(t.val()!=n)}})}e(function(){var i=e("[data-show-type][data-is-show-type-parent]");i.on("change",t),i.trigger("change")})}(window.jQuery,window,document),function(e){function t(){var t=e(this),i=t.closest(".hpbx-slots-row"),r=i.closest(".hpbx-slots-rows"),s=i.closest(".hpbx-slots-container"),o=i.find("select"),a=i.find('input[type="text"]'),l=s.find(".hpbx-add-slot");i.toggleClass(n),o.val(""),o.trigger("liszt:updated"),a.val(""),a.removeClass("sg-completed"),r.append(i),l.addClass("sg-btn-secondary"),l.removeClass("sg-disabled")}function i(){var t=e(this),i=t.closest(".hpbx-slots-container"),r=i.find(".hpbx-slots-rows"),s=r.find("."+n),o=i.find(".hpbx-add-slot");s.first().toggleClass(n),0==r.find("."+n).length&&(o.addClass("sg-disabled"),o.removeClass("sg-btn-secondary"))}var n="hpbx-invisible";e(function(){var n=e(".hpbx-slots-container"),r=n.find(".hpbx-slots-row"),s=r.find(".hpbx-delete"),o=n.find(".hpbx-add-slot");s.on("click",t),o.on("click",i)})}(window.jQuery,window,document),function(e,t){function i(){for(var t=e("#hpbx-huntgroup-settings-how").val(),i=e("#hpbx-huntgroup-settings-how option"),n=0;n<i.length;n++)if(t==e(i[n]).val()){var r=e(i[n]).data("help-text")?e(i[n]).data("help-text"):a;e(".hpbx-menu-over-menu-title").html(r)}}function n(){var t=e(this),i=t.val(),n=t.closest(".hpbx-foldable-content").prev(".hpbx-foldable-heading").find(".hpbx-foldable-heading-destination");switch(i){case"voicebox":n.html(": "+n.data("voicemail-text"));break;case"uri":t.closest(".hpbx-foldable-content").find(".hpbx-call-forwards-destination-number").trigger("change");break;default:n.html(": "+n.data("unknown-text"))}}function r(){var t=e(this),i=t.val(),n=t.closest(".hpbx-foldable-content").prev(".hpbx-foldable-heading").find(".hpbx-foldable-heading-destination"),r="";e(t.data("values")).each(function(){return this.value==i?void(r=this.label):void 0}),""==r&&(r=i),n.html(": "+n.data("number-text").replace("<label>",r))}function s(){var i=e(this),n=i.val(),r=i.closest(".hpbx-foldable-content").prev(".hpbx-foldable-heading").find(".hpbx-foldable-heading-suffix");""!=n?(e(t).width()>749&&r.show(),r.find(".hpbx-foldable-heading-disconnect-after").html(n)):r.hide()}function o(t){-1!==e.inArray(t.keyCode,[46,8,9,27,13,110,190])||65==t.keyCode&&t.ctrlKey===!0||67==t.keyCode&&t.ctrlKey===!0||88==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}var a=e(".hpbx-menu-over-menu-title").html();e(function(){e("#hpbx-huntgroup-settings-how").on("change",i),e(".hpbx-call-forwards-destination-type").on("change",n),e(".hpbx-call-forwards-destination-number").on("hpbx-autocomplete-item-click",r),e(".hpbx-call-forwards-destination-number").on("change",r),e(".hpbx-call-forwards-disconnect-after").on("change",s),e(".hpbx-call-forwards-disconnect-after").on("keydown",o),i(),e(".hpbx-call-forwards-destination-type").trigger("change"),e(".hpbx-call-forwards-destination-number").trigger("change"),e(".hpbx-call-forwards-disconnect-after").trigger("change")}),e(".hpbx-customer-prefix-change-warning-trigger").magnificPopup({type:"inline",items:{src:"#hpbx-customer-prefix-change-warning-dialog"},midClick:!0,closeOnBgClick:!1})}(window.jQuery,window,document),function(e){function t(t){var o=e(t.target).closest(".hpbx-table-row-expandable"),a=o.data("expandable-id"),l=e('.hpbx-table-row-expandable-content[data-expandable-parent-id="'+a+'"]');o.hasClass(i)?(o.removeClass(i),l.removeClass(i)):(r.removeClass(i),s.removeClass(i),o.addClass(i),l.addClass(i)),l.last().addClass(n)}var i="hpbx-table-row-expanded",n="hpbx-table-row-expandable-content-last",r=e(".hpbx-table-row-expandable"),s=e(".hpbx-table-row-expandable-content");e(function(){r.on("click",t)})}(window.jQuery,window,document),function(e){e(".hpbx-table-sortable").each(function(){var t=e(this),i={};t.find("th").each(function(){var t=e(this);t.hasClass("hpbx-sortable")||(i[t.index()]={sorter:!1})}),t.tablesorter({cssAsc:"hpbx-sorted-asc",cssDesc:"hpbx-sorted-desc",cssHeader:"hpbx-sortable",headers:i})})}(window.jQuery,window,document),function(e,t){function i(){e('.hpbx-table-with-select-all input[type="checkbox"]').prop("checked",e(this).prop("checked"))}e(function(){e('.hpbx-table-with-select-all .hpbx-table-head-row input[type="checkbox"]').on("change",i),e("[data-url], [data-delete-url] .hpbx-delete:not(.js-delete)").on("click",function(i){var n=e(this),r=e(i.target).hasClass("hpbx-delete"),s=n.data("url"),o=n.closest("[data-delete-url]").data("delete-url");r&&o?t.location=o:s&&(t.location=s)})})}(window.jQuery,window,document);var hpbxActivatedPanel,hpbxActivatedPanelHeight,hpbxDeactivatedPanel;!function(e,t){function i(i,n){("#tab-details"==n.selector||"#tab-send-fax"==n.selector||"#tab-fax-log"==n.selector)&&(n.panel.find(".chzn-select:not(.hpbx-initialized)").removeClass("chzn-done"),n.panel.find(".chzn-container:not(.hpbx-initialized)").remove(),initDropdowns(n.panel.find(".chzn-select:not(.hpbx-initialized)")),n.panel.find(".chzn-select").addClass("hpbx-initialized"),n.panel.find(".chzn-container").addClass("hpbx-initialized")),"#tab-fax-log"==n.selector?t.setTimeout(function(){e(".hpbx-page-fax .hpbx-pagination-container").animate({opacity:1},300)},500):e(".hpbx-page-fax .hpbx-pagination-container").animate({opacity:0},300),hpbxActivatedPanel=n.panel,hpbxActivatedPanel.height("auto"),hpbxActivatedPanelHeight=hpbxActivatedPanel.outerHeight(),null==hpbxDeactivatedPanel||hpbxDeactivatedPanel==hpbxActivatedPanel?(hpbxActivatedPanel.height(0),hpbxActivatedPanel.hide(),hpbxActivatedPanel.children().css("opacity",0),o()):(hpbxActivatedPanel.height(hpbxDeactivatedPanel.height()),hpbxActivatedPanel.hide(),hpbxActivatedPanel.children().css("opacity",0))}function n(e,i){hpbxDeactivatedPanel=i.panel,hpbxDeactivatedPanel.show(),hpbxDeactivatedPanel.children().animate({opacity:0},300),t.setTimeout(r,300)}function r(){hpbxDeactivatedPanel==hpbxActivatedPanel?hpbxDeactivatedPanel.animate({height:0},500,s):hpbxDeactivatedPanel.hide(),(hpbxDeactivatedPanel!=hpbxActivatedPanel||null==hpbxDeactivatedPanel)&&o()}function s(){hpbxDeactivatedPanel.hide(),hpbxDeactivatedPanel=null}function o(){hpbxActivatedPanel.show(),hpbxActivatedPanel.outerHeight()==hpbxActivatedPanelHeight?a():hpbxActivatedPanel.animate({height:hpbxActivatedPanelHeight},200,a)}function a(){hpbxActivatedPanel.height("auto"),hpbxActivatedPanel.children().animate({opacity:1},300)}function l(){var t=e(this);if(t.data("show-hide-type")){var i=t.data("show-hide-type");e('[data-hide-type="'+i+'"]').toggle(!t.prop("checked")),e('[data-show-type="'+i+'"]').toggle(t.prop("checked"))}if(t.prop("checked")){if(t.data("hide-type")){var i=t.data("hide-type");e('[data-hide-type="'+i+'"]').hide()}if(t.data("show-type")){var i=t.data("show-type");e('[data-show-type="'+i+'"]').show()}}setFormLabelsClass()}function c(){var t=e(this),i=t.data("enable-target").split(","),n=t.data("enable-value").split(","),r=t.data("disable-target").split(","),s=t.data("disable-value").split(",");0!==i.length&&0!==n.length&&e(n).each(function(){var n=this;e(i).each(function(){var i=e.trim(this);d(i,"*"==n&&t.val().length>0||t.val()==n)})}),0!==r.length&&0!==s.length&&e(s).each(function(){var i=this;e(r).each(function(){var n=e.trim(this);d(n,!(t.val()==i))})})}function d(t,i){if(t){var n=e("."+t);i?(n.removeClass("sg-disabled").prop("disabled",!1),n.closest(".sg-custom-check-and-radio").removeClass("sg-disabled")):(n.addClass("sg-disabled").prop("checked",!1).prop("disabled","disabled"),n.closest(".sg-custom-check-and-radio").addClass("sg-disabled"),n.is('input[type="text"]')&&n.val(""))}}function h(){var t=e(this),i=t.data("target"),n=t.data("value");i&&n&&d(i,t.val()==n)}function u(){var t=e(this),i=t.data("target"),n=t.data("value");i&&n&&d(i,t.val()!=n)}e(".hpbx-tabs").responsiveTabs({startCollapsed:"accordion",setHash:!0,activate:i,deactivate:n}),e(function(){e('input[type="checkbox"]').on("change",l),e('input[type="radio"]').on("change",l),e('.hpbx-tab-form input[type="checkbox"]').each(function(){var t=e(this);console.log(t.closest(".hpbx-hunting-group-user").length),0==t.closest(".hpbx-hunting-group-select-all").length&&t.trigger("change")}),e('.hpbx-tab-form input[type="radio"]').trigger("change"),e(".hpbx-enable-target-when-value").on("change",h).trigger("change"),e(".hpbx-disable-target-when-value").on("change",u).trigger("change"),e(".hpbx-toggle-target-when-value").on("change",c).trigger("change"),setFormLabelsClass(),e('.hpbx-tab-form input[type="checkbox"]').each(function(){var t=e(this);0==t.closest(".hpbx-hunting-group-select-all").length&&t.trigger("change")}),e('.hpbx-tab-form input[type="radio"]').trigger("change")})}(window.jQuery,window,document),function(e){function t(e,t,i){function n(){h.text(""),u.removeClass("sg-error"),p.removeClass("sg-error")}function r(e,t){return e&&e.addClass("sg-error"),h.text(h.data(t)),!1}if(e){var a=e.ev,l=a.parent().siblings(".hpbx-timeslots-input"),c=e.currItem.inlineElement,d=c.find(".hpbx-popup-form"),h=d.find(".hpbx-timeslot-error"),u=d.find(".hpbx-timeslot-start"),p=d.find(".hpbx-timeslot-end"),f=d.find(".hpbx-remove-timeslot");return u.val(t.format("HH:mm")),p.val(i.format("HH:mm")),n(),d.off("submit").on("submit",function(a){a.preventDefault();var c=!0,d=moment(u.val(),"HH:mm"),h=moment(p.val(),"HH:mm");n(),0==u.val().length&&(c=r(u,"error-empty-time")),d.isValid()||(c=r(u,"error-invalid-time")),0==p.val().length&&(c=r(p,"error-empty-time")),h.isValid()||(c=r(p,"error-invalid-time")),c&&(s(l,t,i),o(l,d,h),e.close())}),f.off("click").on("click",function(n){n.preventDefault(),s(l,t,i),e.close()}),c}}function i(t){function i(){c.text(""),h.removeClass("sg-error"),u.removeClass("sg-error")}function n(e,t){e&&e.addClass("sg-error"),c.html(c.html()+c.data(t)+"<br />")}function r(){h.removeClass("sg-error").val(""),u.removeClass("sg-error").val(""),f.prop("checked",!1).next().removeClass("hpbx-is-checked"),g.prop("checked",!1).next().removeClass("hpbx-is-checked"),m.prop("checked",!1).next().removeClass("hpbx-is-checked"),v.prop("checked",!1).next().removeClass("hpbx-is-checked"),_.prop("checked",!1).next().removeClass("hpbx-is-checked"),b.prop("checked",!1).next().removeClass("hpbx-is-checked"),y.prop("checked",!1).next().removeClass("hpbx-is-checked"),d.prop("checked",!1).next().removeClass("hpbx-is-checked")}if(t){var s=t.ev.data("target"),a=t.currItem.inlineElement,l=a.find(".hpbx-popup-form"),c=l.find(".hpbx-timeslot-error"),d=l.find(".hpbx-timeslot-add-rule"),h=l.find(".hpbx-timeslot-start"),u=l.find(".hpbx-timeslot-end"),p=l.find(".hpbx-popup-form-days-container"),f=l.find(".hpbx-timeslot-monday"),g=l.find(".hpbx-timeslot-tuesday"),m=l.find(".hpbx-timeslot-wednesday"),v=l.find(".hpbx-timeslot-thursday"),_=l.find(".hpbx-timeslot-friday"),b=l.find(".hpbx-timeslot-saturday"),y=l.find(".hpbx-timeslot-sunday");return r(),e([f,g,m,v,_,b,y]).each(function(){this.off("click change").on("click change",function(){var t=e(this);t.is(":checked")?t.next().addClass("hpbx-is-checked"):t.next().removeClass("hpbx-is-checked")})}),l.off("submit").on("submit",function(a){a.preventDefault();var l=!0,c=moment(h.val(),"HH:mm"),x=moment(u.val(),"HH:mm");i(),0==h.val().length?(n(h,"error-empty-time"),l=!1):c.isValid()||(n(h,"error-invalid-time"),l=!1),0==u.val().length?(n(u,"error-empty-time"),l=!1):x.isValid()||(n(u,"error-invalid-time"),l=!1),f.is(":checked")||g.is(":checked")||m.is(":checked")||v.is(":checked")||_.is(":checked")||b.is(":checked")||y.is(":checked")||(n(p,"error-no-day-selected"),l=!1),l&&(e([{day:1,checked:y.is(":checked")},{day:2,checked:f.is(":checked")},{day:3,checked:g.is(":checked")},{day:4,checked:m.is(":checked")},{day:5,checked:v.is(":checked")},{day:6,checked:_.is(":checked")},{day:7,checked:b.is(":checked")}]).each(function(){this.checked&&o(e('input[name="'+s+"[times]["+this.day+'][ranges]"]'),c,x)}),d.is(":checked")?r():t.close())}),a}}function n(i,n){var r=i.siblings(".hpbx-timeslots"),s=i.data("min"),o=i.data("max"),a=o-s,l=moment(n[0]),c=moment(n[1]),d=60*l.hours()+l.minutes(),h=60*c.hours()+c.minutes(),u=l.format("HH:mm")+" - "+c.format("HH:mm"),p=e('<span class="hpbx-timeslot" data-from="'+d+'" title="'+u+'" data-label="'+u+'" data-to="'+h+'" data-label-edit="edit"></span>').appendTo(r);isNaN(s)&&(s=0),isNaN(o)&&(o=1440),isNaN(a)&&(a=o-s),(isNaN(d)||s>d)&&(d=s),(isNaN(h)||h>o)&&(h=o);var f=(a-(a-(d-s)))/a*100,g=(a-(a-(h-s)))/a*100-f;120>h-d&&p.attr("data-label",""),p.css({left:f+"%",width:g+"%"}),p.magnificPopup({type:"inline",items:{src:"#timeslot-edit-popup"},callbacks:{open:function(){{var e=this;t(e,l,c)}}},midClick:!0})}function r(t){var i=t,n=e.parseJSON(i.val().replace(/'/g,'"'));e(n).each(function(){var t=e(this),n=moment(t[0]),r=moment(t[1]),s=60*n.hours()+n.minutes(),o=60*r.hours()+r.minutes();i.siblings(".hpbx-timeslots").find('.hpbx-timeslot[data-from="'+s+'"][data-to="'+o+'"]').remove()}),i.val(JSON.stringify([]).replace(/"/g,"'")),a(i)}function s(t,i,n){var r=t,s=e.parseJSON(r.val().replace(/'/g,'"')),o=null;if(e(s).each(function(t){var r=e(this),s=moment(r[0]),a=moment(r[1]);i.isSame(s)&&n.isSame(a)&&(o=t)}),null!=o){var l=s.splice(o,1);e(l).each(function(){var t=e(this),i=moment(t[0]),n=moment(t[1]),s=60*i.hours()+i.minutes(),o=60*n.hours()+n.minutes();r.siblings(".hpbx-timeslots").find('.hpbx-timeslot[data-from="'+s+'"][data-to="'+o+'"]').remove()})}return r.val(JSON.stringify(s).replace(/"/g,"'")),a(r),o}function o(t,i,r){var s=t,o=e.parseJSON(s.val().replace(/'/g,'"')),l=e([i,r]),c=!1;return e(o).each(function(){var t=e(this),n=moment(t[0]),s=moment(t[1]);(i.isBetween(n,s)||r.isBetween(n,s))&&(c=!0)}),o.push([i.format("LLLL"),r.format("LLLL")]),s.val(JSON.stringify(o).replace(/"/g,"'")),n(s,l),a(s),c}function a(e){var t=e.closest(".hpbx-foldable-content"),i=t.find(".hpbx-timeslot").length;t.find(".hpbx-last-resort-row").toggle(i>0)}e(".hpbx-delete-timeslots").on("click",function(t){t.preventDefault();var i=e(this),n=e('input[name="'+i.data("target")+'"]');r(n)}),e(".hpbx-timeslots-input").each(function(){var t=e(this),i=e.parseJSON(t.val().replace(/'/g,'"'));e('<div class="hpbx-timeslots"></div>').insertAfter(t),e(i).each(function(){n(t,e(this))})}),e(".hpbx-add-timeslot").each(function(){a(e(this))}),e(".hpbx-add-timeslot").each(function(){e(this).magnificPopup({type:"inline",items:{src:"#timeslot-popup"},callbacks:{open:function(){{var e=this;i(e)}}},midClick:!0})})}(window.jQuery,window,document),function(e){function t(e){e.stopPropagation()}e(function(){e(".hpbx-table-voicemail .js-delete").on("click",t)})}(window.jQuery,window,document),function(e,t){function i(){e('.hpbx-wizard-step-container input[type="checkbox"]').trigger("change"),n(),e(".hpbx-wizard-step-container[data-step]").hide(),e(".hpbx-page-wizard .hpbx-content-container").removeClass("hpbx-hidden"),l(1)}function n(){var t=e(".hpbx-wizard-step-container");t.each(function(){var t=e(this).find(".hpbx-wizard-progress-step"),i=0;t.each(function(){var n=e(this),r=n.width()+2,s=i/(t.length-1)*100,o=Math.round(r/100*s),a="calc("+s+"% - "+o+"px)";n.css("left",a),n.css("z-index",1e3-i),i++})})}function r(i){var n=e(this),r=n.data("click-handler"),s=t[r],o=n.data("keep-propagation");
void 0!=o&&o||(i.preventDefault(),i.stopPropagation()),"function"==typeof s&&s(n.data("click-handler-argument"))}function s(){m=_,v=++_,u(!1)}function o(){m=_,v=--_,u(!1)}function a(e){m=_,v=e,u(!1),_=e}function l(t){e(".hpbx-wizard-step-container[data-step]").hide(),e('.hpbx-wizard-step-container[data-step="'+t+'"]').show(),_=t}function c(){m=_,v=1,u(!0),_=1}function d(){e('.hpbx-wizard-step-container[data-step="'+m+'"]').hide(),e('.hpbx-wizard-step-container[data-step="'+v+'"]').show()}function h(){var t=e('.hpbx-wizard-step-container[data-step="'+_+'"]').data("background-id");e(".hpbx-page-wizard").attr("data-background-id",t)}function u(t){1==t&&(e('.hpbx-wizard-step-container input[type="text"]').val(""),e('.hpbx-wizard-step-container input[type="checkbox"]').prop("checked",!1).trigger("change"),e(".hpbx-wizard-step-container select").each(function(){var t=e(this);t[0].selectedIndex=0,t.trigger("liszt:updated")}));var i="";1==t?i="back-to-start":v>m?i="forward":m>v&&(i="back"),p(m,v,i)}function p(e,t,i){f(),g(e,t,i)}function f(){e(".hpbx-wizard-cartoon").animate({opacity:0},b).animate({opacity:1},b),t.setTimeout(h,b)}function g(i,n,r){switch(r){case"forward":e(".hpbx-content-container").animate({"margin-left":"-50px",opacity:0},y).animate({"margin-left":"50px"},0).animate({"margin-left":"0px",opacity:1},y);break;case"back":e(".hpbx-content-container").animate({"margin-left":"50px",opacity:0},y).animate({"margin-left":"-50px"},0).animate({"margin-left":"0px",opacity:1},y);break;case"back-to-start":e(".hpbx-content-container").animate({"margin-top":"30px",opacity:0},y).animate({"margin-top":"-70px"},0).animate({"margin-top":"-20px",opacity:1},y)}t.setTimeout(d,y)}var m,v,_=0,b=500,y=200;e(function(){t.wizardNextStep=s,t.wizardPreviousStep=o,t.wizardGoToStep=a,t.wizardBackToStart=c,e("[data-click-handler]").on("click",r),i()})}(window.jQuery,window,document),function(e){e(function(){"undefined"!=typeof wysihtml5&&(wysihtml5.commands.customClassLi={exec:function(e,t,i){return wysihtml5.commands.formatBlock.exec(e,t,"li",i,new RegExp(i,"g"))},state:function(e,t,i){return wysihtml5.commands.formatBlock.state(e,t,"li",i,new RegExp(i,"g"))}},wysihtml5.commands.customClassParagraph={exec:function(e,t,i){return wysihtml5.commands.formatBlock.exec(e,t,"p",i,new RegExp(i,"g"))},state:function(e,t,i){return wysihtml5.commands.formatBlock.state(e,t,"p",i,new RegExp(i,"g"))}},e(".hpbx-wysiwyg").each(function(){{var t=e(this);new wysihtml5.Editor(t.attr("id"),{toolbar:t.data("toolbar-id"),parserRules:wysihtml5ParserRules})}}))})}(window.jQuery,window,document),function(e,t){function i(){e(".hpbx-help-edit-saved-item-title").each(function(){var t=e(this);t.height()>30&&t.closest(".hpbx-help-edit-saved-item-info").addClass("hpbx-multiple-lines")})}function n(e){e.preventDefault(),t.parent.openMediaLibraryPopup()}function r(e){"function"==typeof hpbxSitemapContextMenuEdit&&hpbxSitemapContextMenuEdit(e)}function s(e){"function"==typeof hpbxSitemapContextMenuAddHere&&hpbxSitemapContextMenuAddHere(e)}function o(e){"function"==typeof hpbxSitemapContextMenuAddInside&&hpbxSitemapContextMenuAddInside(e)}e(function(){i(),e(".hpbx-help-edit-sitemap").jstree({plugins:["contextmenu"],contextmenu:{items:{edit:{label:"Edit",action:r},newPageHere:{label:"Add new page here",action:s},newPageInside:{label:"Add new page inside",action:o}},show_at_node:!1}}),e(".hpbx-help-edit-open-media-library").on("click",n),e(".hpbx-help-edit-url-popup-trigger").magnificPopup({type:"inline",items:{src:"#hpbx-help-edit-url-popup"},midClick:!0,closeOnBgClick:!1}),e("#hpbx-help-edit-media-library-popup-trigger").magnificPopup({type:"inline",items:{src:"#hpbx-help-edit-media-library-popup"},midClick:!0,closeOnBgClick:!1}),e('.hpbx-page-help-edit .hpbx-help-edit-upload + input[type="file"]').each(function(){var t=e(this),i=t.siblings(".hpbx-help-edit-upload");t.on("change",{inputField:t,label:i},function(e){var t=e.data.inputField.val().split("\\").pop();e.data.label.html(t)})})})}(window.jQuery,window,document);var helpVariables={},hpbxHelpOpenedTimestamp;!function(e,t){function i(t){var i=e("body"),n=e(t.target),r=n.siblings("input"),s=r.closest("form");r.is(":visible")&&r.val().length>0?s.submit():(i.toggleClass("hpbx-help-search-open"),r.focus())}function n(){var t=e(this).data("help-url");null!=t&&(e("iframe.hpbx-help-iframe").contents()[0].location.href=t,e("body").hasClass(helpVariables.bodyClassHelpOpen)||toggleHelp())}function r(){location.href.indexOf("loader.html")>-1&&(location.href=Cookies.get("hpbx-help-url")?Cookies.get("hpbx-help-url"):e(t.frameElement).data("default-url"))}function s(){if("true"==Cookies.get("hpbx-help-open")){var t=e("iframe.hpbx-help-iframe");1==t.length?("true"!=Cookies.get("hpbx-help-animate-on-load")&&e("body").addClass("hpbx-help-no-loader"),toggleHelp()):"false"!=Cookies.get("hpbx-help-animate-on-load")&&-1==location.href.indexOf("loader.html")&&(e("body").addClass("hpbx-help-prepare-animation"),c())}}function o(){e("body").hasClass("hpbx-page-help")&&Cookies.get("hpbx-help-url")!=location.href&&(Cookies.set("hpbx-help-url",location.href),Cookies.set("hpbx-help-scroll-position",0))}function a(){e("body").hasClass("hpbx-page-help")&&Cookies.set("hpbx-help-scroll-position",e(this).scrollTop())}function l(i){var n=e(this).attr("href");i.preventDefault(),t.parent.location.href!=location.href?t.open(n,"_parent"):t.open(n,"_blank")}function c(){var e=new Date,i=Math.abs(e.getTime()-t.parent.hpbxHelpOpenedTimestamp.getTime());i>1800?(t.parent.animateHelpOverlay(),setTimeout(d,500)):setTimeout(c,300)}function d(){e("body").removeClass("hpbx-help-prepare-animation"),Cookies.get("hpbx-help-scroll-position")&&e(".hpbx-help-scrollable-content-container").scrollTop(Cookies.get("hpbx-help-scroll-position")).perfectScrollbar("update"),Cookies.set("hpbx-help-animate-on-load",!1)}function h(i){var n=e(this),r=n.data("image-url");i.preventDefault(),t.parent.openImagePopup(r)}helpVariables.bodyClassHelpOpen="hpbx-help-opened",helpVariables.bodyClassMenuOpen="hpbx-menu-opened",e(function(){helpVariables.hasHelp=e(".hpbx-help").length>0,helpVariables.hasHelp&&0==e("html.ie8").length&&(helpVariables.isOpen=!1),e(".hpbx-help-open-handle").on("click",n),e(".hpbx-menu-help-open-handle").on("click",n),e(".hpbx-help-close-handle").on("click",toggleHelp),e(".hpbx-search-input-icon").on("click",i),e(".hpbx-help-external-link").on("click",l),e(".hpbx-help-article-image, .hpbx-help-step-image").on("click",h),e("body.hpbx-page-help .hpbx-help-scrollable-content-container").on("scroll",a),r(),o(),s()})}(window.jQuery,window,document);
//# sourceMappingURL=all.min.js.map